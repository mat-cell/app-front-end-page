import{a as Vt,b as zr,c as To}from"./chunk-G3DA7Y64.js";import{$a as q,Aa as nt,Ba as ct,C as $,Ca as xi,D as St,Da as Ii,E as bt,Ea as lt,F as V,G as Ti,H as Di,I as J,Ia as st,J as B,Ja as mt,K as ci,Ka as dt,L as z,La as pt,Ma as ut,N as li,O as Lr,Oa as ft,P as O,Pa as ht,Q as si,Qa as gt,R as X,S as Z,Ua as _t,W as $t,Wa as Le,X as tt,Ya as I,Z as Pt,Za as Q,_ as Jt,_a as Tt,aa as et,ab as ie,bb as G,c as Re,cb as Dt,d as Qt,db as re,f as Rt,fa as it,fb as oe,g as H,ga as j,gb as y,h as xt,hb as W,i as qt,ia as rt,ib as U,ja as yt,jb as zt,k as qe,ka as w,kb as C,l as ai,la as F,lb as qr,m as Wt,ma as x,mb as Wr,nb as Vi,o as Ut,oa as Yr,ob as wi,p as We,pa as Qr,pb as mi,q as Kt,qb as Ur,ra as L,rb as Kr,s as It,sb as Je,t as K,tb as ze,u as P,ub as $r,v as Or,va as ot,vb as Jr,w as Pe,wa as Be,x as ni,xa as Y,y as E,ya as A,z as jr,za as at}from"./chunk-N4KSD5ZJ.js";import{c as te,d as He,e as Ct,h as b,n as ee,v as rr}from"./chunk-5TOTVD6K.js";import{Ac as v,Gc as Mt,Hc as vt,Sb as d,Tb as o,Ub as n,Vb as M,Wb as Hr,Xb as Rr,ac as N,bc as Pr,cb as p,cc as f,dc as Br,ec as h,ga as Xt,h as yo,ha as bi,ib as u,ic as wt,jc as At,ka as Zt,kc as Gt,pb as S,qa as g,qb as yi,ra as _,sc as m,tb as D,tc as Ye,ua as Ht,ub as T,uc as Yt,xc as Ee,yc as Fe,zc as ke}from"./chunk-OSBU4Z27.js";var or=class or{static createMainForm(r){return r.group({id:[null],title:[null,[H.required]],definition:[null]})}};or.gv=y.variables;var Ai=or;var ar=class ar{};ar.columnDefs=[{field:"id",hide:!0,checkboxSelection:!0},{field:"title",headerName:"acc.account.accvchtype.title"},{field:"definition",headerName:"acc.account.accvchtype.definition"}];var Gi=ar;var cr=(()=>{let r=class r extends re{constructor(t,e,i){super(),this.service=t,this.translate=e,this.injector=i,this.dialogData=this.injector.get(Pt,null),this.columnDefs=this.translateHeaders(Gi.columnDefs,this.translate)}serverData(){this.dialogData&&this.dialogData.fromDialog&&this.dialogData.fromDialog==!0?this.service.getAll().subscribe(t=>{this.rowData=t}):this.service.getAll().subscribe(t=>{this.rowData=t})}};r.\u0275fac=function(e){return new(e||r)(u(ze),u(I),u(Ht))},r.\u0275cmp=S({type:r,selectors:[["app-acc-vch-type-grid"]],features:[D],decls:8,vars:12,consts:[["dir","rtl",1,"generic-ag-grid-container"],[2,"width","100%","display","flex","gap","8px"],["appearance","outline",2,"flex","1 1 auto","margin-bottom","0px"],["matInput","","type","text","id","filter-text-box",2,"flex","0 0 90%","height","29px","margin-bottom","5px",3,"input","placeholder"],["mat-icon-button","",2,"flex","0 0 calc(1%-8px)",3,"click","matTooltip"],[1,"ag-theme-alpine",2,"height","100%",3,"cellValueChanged","cellEditingStarted","cellClicked","gridReady","selectionChanged","rowDoubleClicked","cellKeyPress","ngClass","rowHeight","headerHeight","floatingFiltersHeight","columnDefs","defaultColDef","gridOptions","rowData"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),f("input",function(l){return i.onFilterTextBoxChanged(l)}),n()(),o(4,"button",4),f("click",function(){return i.gridExport()}),o(5,"mat-icon"),m(6,"file_download"),n()()(),o(7,"ag-grid-angular",5),f("cellValueChanged",function(l){return i.onCellValueChanged(l)})("cellEditingStarted",function(l){return i.onCellEditingStarted(l)})("cellClicked",function(l){return i.onCellClicked(l)})("gridReady",function(l){return i.onGridReady(l)})("selectionChanged",function(l){return i.onSelectionRowChanged(l)})("rowDoubleClicked",function(l){return i.onRowDoubleClicked(l)})("cellKeyPress",function(l){return i.onCellKeyPress(l)}),n()()),e&2&&(p(3),d("placeholder",v(i.filterPlaceholderText)),p(),d("matTooltip",v(i.exportBtnText)),p(3),d("ngClass",i.activeTheme)("rowHeight",i.rowHeight)("headerHeight",i.headerHeight)("floatingFiltersHeight",i.floatingFiltersHeight)("columnDefs",i.columnDefs)("defaultColDef",i.defaultColDef)("gridOptions",i.gridOptions)("rowData",i.rowData))},dependencies:[b,te,G,ie,x,F,E,Qt,V,St,w,yt,A,$t],encapsulation:2});let c=r;return c})();function Do(c,r){if(c&1){let a=N();o(0,"button",16),f("click",function(){g(a);let e=h(2);return _(e.action("save"))}),o(1,"span",17),m(2,"crud.btn.save"),n()()}if(c&2){let a=h(2);d("disabled",a.formGroup.invalid)}}function xo(c,r){if(c&1){let a=N();o(0,"button",18),f("click",function(){g(a);let e=h(2);return _(e.action("delete"))}),o(1,"span",17),m(2,"crud.btn.delete"),n()()}if(c&2){let a=h(2);d("disabled",a.formGroup.invalid)}}function Io(c,r){if(c&1){let a=N();o(0,"div")(1,"app-page-header",1),Mt(2,"translate"),T(3,Do,3,1,"button",2)(4,xo,3,1,"button",3),n(),o(5,"div",4)(6,"mat-card",5)(7,"mat-card-content")(8,"form",6)(9,"div",7)(10,"div",8)(11,"label",9),m(12,"acc.account.accvchtype.title"),n(),o(13,"mat-form-field",10),M(14,"input",11),n()(),o(15,"div",8)(16,"label",12),m(17,"acc.account.accvchtype.definition"),n(),o(18,"mat-form-field",10),M(19,"input",13),n()()()()()(),o(20,"div",14)(21,"app-acc-vch-type-grid",15),f("outputGetFromGrid",function(e){g(a);let i=h();return _(i.onSelectionChanged(e))}),n()()()()}if(c&2){let a=h();p(),d("pageTitle",v(vt(2,6,"menuTitle.AccVchType")))("titleSideButtons",a.titleSideButtons),p(2),d("ngIf",a.permissionResource.W),p(),d("ngIf",a.permissionResource.D),p(4),d("formGroup",a.formGroup)}}var Xr=(()=>{let r=class r extends U{constructor(t,e,i,s){super(t,i,s),this.mainService=t,this.formBuilder=e,this.notifier=i,this.translate=s,this.gv=y.variables,this.formGroup=Ai.createMainForm(this.formBuilder),this.getResourcePermissions(C.AccVchType)}ngOnInit(){}action(t){console.log(t),this.actionAbs(t,this.formGroup,this.child)}onSelectionChanged(t){this.formGroup.patchValue(t)}};r.\u0275fac=function(e){return new(e||r)(u(ze),u(It),u(W),u(I))},r.\u0275cmp=S({type:r,selectors:[["app-acc-vch-type"]],viewQuery:function(e,i){if(e&1&&wt(cr,5),e&2){let s;At(s=Gt())&&(i.child=s.first)}},features:[D],decls:1,vars:1,consts:[[4,"ngIf"],[1,"action",3,"pageTitle","titleSideButtons"],["mat-flat-button","","color","accent","class","action",3,"disabled","click",4,"ngIf"],["mat-stroked-button","","color","warn","class","action",3,"disabled","click",4,"ngIf"],[1,"parent-card-container"],[1,"input-mat-card"],[3,"formGroup"],[1,"row-fields"],[1,"field-item"],["for","title","translate",""],["appearance","outline"],["matInput","","id","title","formControlName","title"],["for","definition","translate",""],["matInput","","id","definition","formControlName","definition"],[1,"ag-grid-to-fill"],[3,"outputGetFromGrid"],["mat-flat-button","","color","accent",1,"action",3,"click","disabled"],["translate",""],["mat-stroked-button","","color","warn",1,"action",3,"click","disabled"]],template:function(e,i){e&1&&T(0,Io,22,8,"div",0),e&2&&d("ngIf",i.permissionResource.R)},dependencies:[b,Ct,P,Wt,Rt,xt,qt,Ut,Kt,K,Dt,q,Q,G,j,E,x,F,Y,tt,L,$,V,bt,J,O,B,z,X,Z,et,it,rt,w,ot,at,nt,ct,lt,st,gt,mt,dt,pt,ut,ft,A,ht,_t,cr,Tt],encapsulation:2});let c=r;return c})();var lr=class lr{};lr.columnDefs=[{field:"topic.id",hide:!0,checkboxSelection:!0},{field:"topic.accID",headerName:"acc.account.ptopic.accid"},{field:"topic.title",headerName:"acc.account.ptopic.title"},{field:"debit",headerName:"acc.account.accSummary.debit"},{field:"credit",headerName:"acc.account.accSummary.credit"},{field:"remDebit",headerName:"acc.account.accSummary.remDebit"},{field:"remCredit",headerName:"acc.account.accSummary.remCredit"}];var Ni=lr;var Xe=(()=>{let r=class r{agInit(t){this.params=t}checkedHandler(t){let e=t.target.checked,i=this.params.column.colId;this.params.node.setDataValue(i,e)}refresh(t){return!1}ngOnDestroy(){}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=S({type:r,selectors:[["checkbox-renderer"]],decls:1,vars:1,consts:[["type","checkbox",3,"click","checked"]],template:function(e,i){e&1&&(Hr(0,"input",0),Br("click",function(l){return i.checkedHandler(l)}),Rr()),e&2&&Pr("checked",i.params.value)},dependencies:[b],encapsulation:2});let c=r;return c})();var Ze=(()=>{let r=class r extends oe{constructor(t){super(t),this.http=t,this.setBaseUrl(C.AccSummary)}getFilterBoxData(t){return this.http.get(`${this.baseUrl}/getFilterBoxData/${t}`)}getAccSummaryByGenericQuery(t){return this.http.post(`${this.baseUrl}/getAccSummaryByGenericQuery`,t)}getAccVchItmForShowByGenericQuery(t){return this.http.post(`${this.baseUrl}/getAccVchItmForShowByGenericQuery`,t)}};r.\u0275fac=function(e){return new(e||r)(Zt(ee))},r.\u0275prov=Xt({token:r,factory:r.\u0275fac,providedIn:"root"});let c=r;return c})();var sr=(()=>{let r=class r extends re{constructor(t,e,i){super(),this.service=t,this.translate=e,this.injector=i,this.dialogData=this.injector.get(Pt,null),this.columnDefs=this.translateHeaders(Ni.columnDefs,this.translate),this.frameworkComponents={checkboxRenderer:Xe}}setParams(t){this.accVchFilterParams=t}serverData(){console.log("from grid"),this.accVchFilterParams?(this.service.getAccSummaryByGenericQuery(this.accVchFilterParams).subscribe(t=>{this.populateNeededFields(t),this.rowData=t,this.setFirstRowAsSelected()}),this.accVchFilterParams=null):this.dialogData&&this.dialogData.fromDialog&&this.dialogData.fromDialog==!0?this.service.getAll().subscribe(t=>{this.rowData=t}):this.service.getAll().subscribe(t=>{this.rowData=t})}populateNeededFields(t){t.forEach(e=>{})}};r.\u0275fac=function(e){return new(e||r)(u(Ze),u(I),u(Ht))},r.\u0275cmp=S({type:r,selectors:[["app-AccSummary-grid"]],inputs:{accVchFilterParams:"accVchFilterParams"},features:[D],decls:8,vars:12,consts:[["dir","rtl",1,"generic-ag-grid-container"],[2,"width","100%","display","flex","gap","8px"],["appearance","outline",2,"flex","1 1 auto","margin-bottom","0px"],["matInput","","type","text","id","filter-text-box",2,"flex","0 0 90%","height","29px","margin-bottom","5px",3,"input","placeholder"],["mat-icon-button","",2,"flex","0 0 calc(1%-8px)",3,"click","matTooltip"],[1,"ag-theme-alpine",2,"height","100%",3,"cellValueChanged","cellEditingStarted","cellClicked","gridReady","selectionChanged","rowDoubleClicked","cellKeyPress","ngClass","rowHeight","headerHeight","floatingFiltersHeight","columnDefs","defaultColDef","gridOptions","rowData"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),f("input",function(l){return i.onFilterTextBoxChanged(l)}),n()(),o(4,"button",4),f("click",function(){return i.gridExport()}),o(5,"mat-icon"),m(6,"file_download"),n()()(),o(7,"ag-grid-angular",5),f("cellValueChanged",function(l){return i.onCellValueChanged(l)})("cellEditingStarted",function(l){return i.onCellEditingStarted(l)})("cellClicked",function(l){return i.onCellClicked(l)})("gridReady",function(l){return i.onGridReady(l)})("selectionChanged",function(l){return i.onSelectionRowChanged(l)})("rowDoubleClicked",function(l){return i.onRowDoubleClicked(l)})("cellKeyPress",function(l){return i.onCellKeyPress(l)}),n()()),e&2&&(p(3),d("placeholder",v(i.filterPlaceholderText)),p(),d("matTooltip",v(i.exportBtnText)),p(3),d("ngClass",i.activeTheme)("rowHeight",i.rowHeight)("headerHeight",i.headerHeight)("floatingFiltersHeight",i.floatingFiltersHeight)("columnDefs",i.columnDefs)("defaultColDef",i.defaultColDef)("gridOptions",i.gridOptions)("rowData",i.rowData))},dependencies:[b,te,G,ie,x,F,E,Qt,V,St,w,yt,A,$t],encapsulation:2});let c=r;return c})();var mr=class mr{static createMainForm(r){return r.group({byDate:[null],fromDate:[null],toDate:[null],byVchNum:[null],fromVchNum:[null],toVchNum:[null],begginingOfYear:[null],endOfYear:[null],profitAndLoss:[null]})}};mr.gv=y.variables;var Fi=mr;var Ke=(function(c){return c.generic="1",c.begginingOfYear="2",c.profitAndLoss="3",c.endOfYear="4",c})(Ke||{});var Hi=class Hi{static NumericCellRenderer(r){var a=new Intl.NumberFormat;return r.value==null&&(r.value=0),a.format(r.value)}};Hi.columnDefs=[{field:"id",hide:!0},{field:"seq",headerName:"acc.account.accvchitm.seq",width:90},{field:"vchNum",headerName:"acc.account.accvchhdr.vchNum",width:150},{field:"tvchNum",headerName:"acc.account.accvchhdr.tvchNum",width:150},{field:"description",headerName:"acc.account.accvchitm.description",width:250},{field:"debit",headerName:"acc.account.accvchitm.debit"},{field:"credit",headerName:"acc.account.accvchitm.credit"},{field:"rem",headerName:"acc.account.accSummary.remDebit"},{field:"remDefinition",headerName:"acc.account.accSummary.remCredit"},{field:"persuitNo",headerName:"acc.account.accvchitm.persuitNo",width:150,cellRenderer:Hi.NumericCellRenderer},{field:"persuitDate",headerName:"acc.account.accvchitm.persuitDate",width:150},{field:"comment.title",headerName:"acc.account.accvchitm.comment"},{field:"statusTitle",headerName:"acc.account.accvchhdr.statusTitle"},{field:"systemName",headerName:"acc.account.accvchhdr.systemName"},{field:"accVchType.title",headerName:"acc.account.accvchtype.accvchtype"}];var ki=Hi;var Mi=yo(To()),di=class{static convertJalaliToGregorian(r){if(!r)return"";let a=Mi.default.from(r,"fa","YYYY/MM/DD");return a.isValid()?a.locale("en").format("YYYY-MM-DD"):""}static convertGregorianToJalali(r){if(!r)return"";let a=Mi.default.from(r,"en","YYYY/MM/DD");return a.isValid()?a.locale("fa").format("YYYY/MM/DD"):""}static convertGregorianToJalaliDateTime(r){if(!r)return"";let a=Mi.default.from(r,"en","YYYY/MM/DD HH:mm");return a.isValid()?a.locale("fa").format("YYYY/MM/DD HH:mm"):""}static formatToJalaliDate(r,a,t){return t?(0,Mi.default)(t).locale("fa").format("YYYY/MM/DD"):""}};var k=class{static getSystemName(r,a){return r=="ACC"?a.instant("acc.account.systemNames.ACC"):r=="STO"?a.instant("acc.account.systemNames.STO"):a.instant("acc.account.systemNames.ACC")}static getStatusTitle(r,a){if(r==0)return a.instant("acc.account.accvchhdr.saveStatusNoteTitle");if(r==1)return a.instant("acc.account.accvchhdr.saveStatusTempTitle");if(r==2)return a.instant("acc.account.accvchhdr.saveStatusConsideredTitle");if(r==3)return a.instant("acc.account.accvchhdr.saveStatusPermTitle")}static getUserFullName(r){if(r!=null)return r.fullName=r.userFirstName+" "+r.userLastName}static checkYear(r){console.log("dddd");let a=Vt.getMisYear()+"";return a=="0"?"dialog.chooseYearFirst":a!=r?"dialog.VchDateMustBeInMisYear":null}static checkVchDate(r){if(r==null)return"dialog.vchDateMustNotBeEmpty";let a=r.split("/")[0],t=this.checkYear(a);return t??null}static validateDateFormat(r){if(r==null||r.trim()===""||!/^\d{4}\/\d{2}\/\d{2}$/.test(r))return!1;let[t,e,i]=r.split("/").map(Number);return!(isNaN(t)||isNaN(e)||isNaN(i)||e<1||e>12||i<1||i>31)}static checkForForwardSlashOfDate(r){let a=this.toEnDigit(r.value);a.length>=8&&a.substring(4,5)!="/"&&(a=a.substring(0,4)+"/"+a.substring(4,6)+"/"+a.substring(6,8)),r.setValue(a)}numericCellRenderer(r){var a=new Intl.NumberFormat;return r.value==null&&(r.value=0),a.format(r.value)}static toEnDigit(r){return r==null||r.length==0?"":r.replace(/[\u0660-\u0669\u06f0-\u06f9]/g,function(a){return a.charCodeAt(0)&15})}static toGregorianDate(r){return di.convertJalaliToGregorian(r)}static toLocalDate(r){return di.convertGregorianToJalali(r)}static toLocalDateTime(r){return di.convertGregorianToJalaliDateTime(r)}static getMonthFromVchDate(r){if(!r)throw new Error("Invalid vchDate");let a=parseInt(r.split("/")[1],10);if(isNaN(a))throw new Error("Invalid month");return a}};var dr=(()=>{let r=class r extends re{constructor(t,e,i){super(),this.service=t,this.translate=e,this.injector=i,this.defaultColDefInternal={editable:!1,resizable:!0,filter:!0,sortable:!0,floatingFilter:!0,floatingFilterComponentParams:{suppressFilterButton:!0}},this.dialogData=this.injector.get(Pt,null),this.columnDefs=this.translateHeaders(ki.columnDefs,this.translate)}setParams(t){this.accVchFilterParams=t}serverData(){console.log("from grid"),this.accVchFilterParams?(this.service.getAccVchItmForShowByGenericQuery(this.accVchFilterParams).subscribe(t=>{this.populateNeededFields(t),this.rowData=t}),this.accVchFilterParams=null):this.rowData=[]}populateNeededFields(t){t.forEach(e=>{this.getSystemName(e),this.getStatusTitle(e),k.getUserFullName(e.creator),k.getUserFullName(e.seconder)})}getSystemName(t){t.systemName=k.getSystemName(t.sys,this.translate)}getStatusTitle(t){t.statusTitle=k.getStatusTitle(t.status,this.translate)}cellEditingStopped(t){}};r.\u0275fac=function(e){return new(e||r)(u(Ze),u(I),u(Ht))},r.\u0275cmp=S({type:r,selectors:[["app-AccVchItmForShow-grid"]],inputs:{accVchFilterParams:"accVchFilterParams"},features:[D],decls:8,vars:12,consts:[["dir","rtl",1,"generic-ag-grid-container"],[2,"width","100%","display","flex","gap","8px"],["appearance","outline",2,"flex","1 1 auto","margin-bottom","0px"],["matInput","","type","text","id","filter-text-box",2,"flex","0 0 90%","height","29px","margin-bottom","5px",3,"input","placeholder"],["mat-icon-button","",2,"flex","0 0 calc(1%-8px)",3,"click","matTooltip"],[1,"ag-theme-alpine",2,"height","100%",3,"cellValueChanged","cellEditingStarted","cellClicked","gridReady","selectionChanged","rowDoubleClicked","cellKeyPress","ngClass","rowHeight","headerHeight","floatingFiltersHeight","columnDefs","defaultColDef","gridOptions","rowData"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),f("input",function(l){return i.onFilterTextBoxChanged(l)}),n()(),o(4,"button",4),f("click",function(){return i.gridExport()}),o(5,"mat-icon"),m(6,"file_download"),n()()(),o(7,"ag-grid-angular",5),f("cellValueChanged",function(l){return i.onCellValueChanged(l)})("cellEditingStarted",function(l){return i.onCellEditingStarted(l)})("cellClicked",function(l){return i.onCellClicked(l)})("gridReady",function(l){return i.onGridReady(l)})("selectionChanged",function(l){return i.onSelectionRowChanged(l)})("rowDoubleClicked",function(l){return i.onRowDoubleClicked(l)})("cellKeyPress",function(l){return i.onCellKeyPress(l)}),n()()),e&2&&(p(3),d("placeholder",v(i.filterPlaceholderText)),p(),d("matTooltip",v(i.exportBtnText)),p(3),d("ngClass",i.activeTheme)("rowHeight",i.rowHeight)("headerHeight",i.headerHeight)("floatingFiltersHeight",i.floatingFiltersHeight)("columnDefs",i.columnDefs)("defaultColDef",i.defaultColDef)("gridOptions",i.gridOptions)("rowData",i.rowData))},dependencies:[b,te,G,ie,x,F,E,Qt,V,St,w,yt,A,$t],encapsulation:2});let c=r;return c})();var $e=class{constructor(r){Object.assign(this,r)}};var pi=class pi{static NumericCellRenderer(r){var a=new Intl.NumberFormat;return r.value==null&&(r.value=0),a.format(r.value)}};pi.columnDefs=[{field:"id",hide:!0,checkboxSelection:!0},{field:"seq",headerName:"acc.account.accvchitm.seq",width:90},{field:"stopic.accID",headerName:"acc.account.stopic.accid",width:120,editable:!0},{field:"dt4.accID",headerName:"acc.account.dtopic.dt4",width:120,editable:!0},{field:"dt5.accID",headerName:"acc.account.dtopic.dt5",width:120,editable:!0},{field:"dt6.accID",headerName:"acc.account.dtopic.dt6",width:120,editable:!0},{field:"description",headerName:"acc.account.accvchitm.description",width:250,editable:!0},{field:"debit",headerName:"acc.account.accvchitm.debit",width:150,editable:!0,cellRenderer:pi.NumericCellRenderer},{field:"credit",headerName:"acc.account.accvchitm.credit",width:150,editable:!0,cellRenderer:pi.NumericCellRenderer},{field:"persuitNo",headerName:"acc.account.accvchitm.persuitNo",width:150,editable:!0,cellRenderer:pi.NumericCellRenderer},{field:"persuitDate",headerName:"acc.account.accvchitm.persuitDate",width:150,editable:!0},{field:"xchAmount",headerName:"acc.account.accvchitm.xchAmount",editable:!0},{field:"xchRate",headerName:"acc.account.accvchitm.xchRate",editable:!0},{field:"xchDebit",headerName:"acc.account.accvchitm.xchDebit",editable:!0},{field:"xchCredit",headerName:"acc.account.accvchitm.xchCredit",editable:!0},{field:"accExchPeriod.id",headerName:"acc.account.accvchitm.accExchPeriodId",editable:!0},{field:"accExchPeriod.title",headerName:"acc.account.accvchitm.accExchPeriodTitle",editable:!0},{field:"comment.title",headerName:"acc.account.accvchitm.comment",editable:!0}];var Ri=pi;var pr=(()=>{let r=class r extends re{constructor(t,e){super(),this.translate=t,this.injector=e,this.dialogData=this.injector.get(Pt,null),this.columnDefs=this.translateHeaders(Ri.columnDefs,this.translate)}serverData(){console.log("AccVchItmGridComponent"),this.rowData=[]}};r.\u0275fac=function(e){return new(e||r)(u(I),u(Ht))},r.\u0275cmp=S({type:r,selectors:[["app-AccVchItmShow-grid"]],features:[D],decls:8,vars:12,consts:[["dir","rtl",1,"generic-ag-grid-container"],[2,"width","100%","display","flex","gap","8px"],["appearance","outline",2,"flex","1 1 auto","margin-bottom","0px"],["matInput","","type","text","id","filter-text-box",2,"flex","0 0 90%","height","29px","margin-bottom","5px",3,"input","placeholder"],["mat-icon-button","",2,"flex","0 0 calc(1%-8px)",3,"click","matTooltip"],[1,"ag-theme-alpine",2,"height","100%",3,"cellValueChanged","cellEditingStarted","cellClicked","gridReady","selectionChanged","rowDoubleClicked","cellKeyPress","ngClass","rowHeight","headerHeight","floatingFiltersHeight","columnDefs","defaultColDef","gridOptions","rowData"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),f("input",function(l){return i.onFilterTextBoxChanged(l)}),n()(),o(4,"button",4),f("click",function(){return i.gridExport()}),o(5,"mat-icon"),m(6,"file_download"),n()()(),o(7,"ag-grid-angular",5),f("cellValueChanged",function(l){return i.onCellValueChanged(l)})("cellEditingStarted",function(l){return i.onCellEditingStarted(l)})("cellClicked",function(l){return i.onCellClicked(l)})("gridReady",function(l){return i.onGridReady(l)})("selectionChanged",function(l){return i.onSelectionRowChanged(l)})("rowDoubleClicked",function(l){return i.onRowDoubleClicked(l)})("cellKeyPress",function(l){return i.onCellKeyPress(l)}),n()()),e&2&&(p(3),d("placeholder",v(i.filterPlaceholderText)),p(),d("matTooltip",v(i.exportBtnText)),p(3),d("ngClass",i.activeTheme)("rowHeight",i.rowHeight)("headerHeight",i.headerHeight)("floatingFiltersHeight",i.floatingFiltersHeight)("columnDefs",i.columnDefs)("defaultColDef",i.defaultColDef)("gridOptions",i.gridOptions)("rowData",i.rowData))},dependencies:[b,te,G,ie,x,F,E,Qt,V,St,w,yt,A,$t],encapsulation:2});let c=r;return c})();var ur=class ur{static createMainForm(r){return r.group({id:[null],vchNum:[null],tvchNum:[null],localNum:[null],dailyId:[null],status:[null],sys:[null],description:[null],attachedDoc:[null],vchDate:[null,[H.required,H.pattern(this.gv.datePattern)]],accVchType:r.group({id:["",H.required],title:[null]})})}};ur.gv=y.variables;var Pi=ur;function Vo(c,r){if(c&1&&(o(0,"mat-option",26),m(1),n()),c&2){let a=r.$implicit;d("value",a.id),p(),Yt(" ",a.title," ")}}var Zr=(()=>{let r=class r extends U{constructor(t,e,i,s,l,ae,je){super(t,s,l),this.mainService=t,this.accVchTypeService=e,this.formBuilder=i,this.notifier=s,this.translate=l,this.dialog=ae,this.injector=je,this.gv=y.variables,this.misYear=y.misYear,this.selectedItmId=0,this.selectedHdrId=0,this.statusTitle="",this.formGroup=Pi.createMainForm(this.formBuilder),this.accVchTypeService.getAll().subscribe(_i=>{this.types=_i});let ri=this.injector.get(Pt,null);console.log(ri),this.selectedItmId=ri.data.selectedItmId,this.selectedHdrId=ri.data.selectedHdrId,this.getSystemName()}ngAfterViewInit(){this.mainService.getHdrItmByItmId(this.selectedItmId).subscribe(t=>{this.formGroup.patchValue(t.accVchHdr),this.child.rowData=t.accVchItm,this.populateCreatorAndSeconderInfo(t.accVchHdr),this.calculateSums(),this.getStatusTitle(),this.getSystemName()})}ngOnInit(){}action(t){console.log(t),t=="gridExport"&&this.gridExport()}gridExport(){this.child.agGrid.exportDataAsCsv()}onSelectionChanged(t){console.log("returned value from onSelectionChanged: "),this.getTopicsTitle(t),this.calculateSums()}getTopicsTitle(t){t!=null&&(t.stopic!=null&&t.stopic.title!=null?this.stopicTitle=t.stopic.title:this.stopicTitle="",t.stopic!=null&&t.stopic.ptopic.title!=null?this.ptopicTitle=t.stopic.ptopic.title:this.ptopicTitle="",t.dt4!=null&&t.dt4.title!=null?this.dt4Title=t.dt4.title:this.dt4Title="",t.dt5!=null&&t.dt5.title!=null?this.dt5Title=t.dt5.title:this.dt5Title="",t.dt6!=null&&t.dt6.title!=null?this.dt6Title=t.dt6.title:this.dt6Title="")}populateCreatorAndSeconderInfo(t){t.creator!=null?this.creatorTitle=t.creator.userFirstName+" "+t.creator.userLastName:this.creatorTitle="",t.seconder!=null?this.seconderTitle=t.seconder.userFirstName+" "+t.seconder.userLastName:this.seconderTitle=""}calculateSums(){let t=0,e=0;this.child.rowData.forEach(s=>{if(s.debit==null)e=+e+0;else{let l=+s.debit;e=+e+l}if(s.credit==null)t=+t+0;else{let l=+s.credit;t=+t+l}});let i=new Intl.NumberFormat;this.sumCredit=i.format(t),this.sumDebit=i.format(e),this.rem=i.format(e-t)}getStatusTitle(){let t=0;this.formGroup.controls.status&&(t=this.formGroup.controls.status.value),this.statusTitle=k.getStatusTitle(t,this.translate)}getSystemName(){let t=this.formGroup.controls.sys.value;this.systemName=k.getSystemName(t,this.translate)}searchForTVchNum(t){if(console.log(this.searchValueForTVchNum),!this.searchValueForTVchNum)return;let e=new $e(null);e.tvchNum=this.searchValueForTVchNum,e.year=this.misYear,this.searchValueForTVchNum="",this.mainService.getHdrItmByCriteriaHdr(e).subscribe(i=>{if(i==null){this.notifier.showSuccess(this.translate.instant("dialog.searchResultIsEmpty"));return}this.formGroup.patchValue(i.accVchHdr),this.child.rowData=i.accVchItm,this.populateCreatorAndSeconderInfo(i.accVchHdr),this.calculateSums(),this.getStatusTitle(),this.getSystemName()})}};r.\u0275fac=function(e){return new(e||r)(u(Je),u(ze),u(It),u(W),u(I),u(Jt),u(Ht))},r.\u0275cmp=S({type:r,selectors:[["app-AccVchItmShow"]],viewQuery:function(e,i){if(e&1&&wt(pr,5),e&2){let s;At(s=Gt())&&(i.child=s.first)}},features:[D],decls:96,vars:26,consts:[[1,"container","parent",2,"width","100%","height","100%"],[1,"ch1"],[3,"formGroup"],[1,"topBoxContent"],["appearance","fill"],["matPrefix","","translate",""],["matInput","","formControlName","vchDate",3,"placeholder","mask","dropSpecialCharacters"],["matInput","","formControlName","localNum"],["appearance","fill","formGroupName","accVchType"],["formControlName","id"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","vchNum",3,"readonly"],["matInput","","formControlName","tvchNum",3,"readonly"],["matInput","","formControlName","dailyId",3,"readonly"],["matInput","",3,"readonly","value"],["matInput","","formControlName","attachedDoc"],["matInput","","formControlName","description"],[1,"card","ch2",2,"margin-top","5px"],[1,"card-body"],[2,"width","100%","height","80%"],[3,"outputGetFromGrid"],[2,"width","20%","float","left"],["role","list"],["role","listitem"],[2,"width","40%","float","right"],[2,"width","30%","float","right"],[3,"value"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"mat-card",1)(2,"form",2)(3,"div",3)(4,"mat-form-field",4)(5,"span",5),m(6,"acc.account.accvchhdr.vchDate \xA0"),n(),M(7,"input",6),n(),o(8,"mat-form-field",4)(9,"span",5),m(10,"acc.account.accvchhdr.localNum \xA0"),n(),M(11,"input",7),n(),o(12,"mat-form-field",8)(13,"span",5),m(14,"acc.account.accvchhdr.accvchtype \xA0"),n(),o(15,"mat-select",9),T(16,Vo,2,2,"mat-option",10),n()(),o(17,"mat-form-field",4)(18,"span",5),m(19,"acc.account.accvchhdr.vchNum \xA0"),n(),M(20,"input",11),n(),o(21,"mat-form-field",4)(22,"span",5),m(23,"acc.account.accvchhdr.tvchNum \xA0"),n(),M(24,"input",12),n(),o(25,"mat-form-field",4)(26,"span",5),m(27,"acc.account.accvchhdr.dailyId \xA0"),n(),M(28,"input",13),n(),o(29,"mat-form-field",4)(30,"span",5),m(31,"acc.account.accvchhdr.statusTitle \xA0"),n(),M(32,"input",14),n(),o(33,"mat-form-field",4)(34,"span",5),m(35,"acc.account.accvchhdr.systemName \xA0"),n(),M(36,"input",14),n(),o(37,"mat-form-field",4)(38,"span",5),m(39,"acc.account.accvchhdr.attachedDoc \xA0"),n(),M(40,"input",15),n(),o(41,"mat-form-field",4)(42,"span",5),m(43,"acc.account.accvchhdr.description \xA0"),n(),M(44,"input",16),n()()()(),o(45,"div",17)(46,"div",18)(47,"div",19)(48,"app-AccVchItmShow-grid",20),f("outputGetFromGrid",function(l){return i.onSelectionChanged(l)}),n()()(),o(49,"div",21)(50,"mat-list",22)(51,"mat-list-item",23)(52,"span",5),m(53,"acc.account.accvchhdr.sumDebit \xA0"),n(),m(54),n(),o(55,"mat-list-item",23)(56,"span",5),m(57,"acc.account.accvchhdr.sumCredit \xA0"),n(),m(58),n(),o(59,"mat-list-item",23)(60,"span",5),m(61,"acc.account.accvchhdr.rem \xA0"),n(),m(62),n()()(),o(63,"div",24)(64,"mat-list",22)(65,"mat-list-item",23)(66,"span",5),m(67,"acc.account.ptopic.ptopic \xA0"),n(),m(68),n(),o(69,"mat-list-item",23)(70,"span",5),m(71,"acc.account.stopic.stopic \xA0"),n(),m(72),n(),o(73,"mat-list-item",23)(74,"span",5),m(75,"acc.account.dtopic.dt4 \xA0"),n(),m(76),n(),o(77,"mat-list-item",23)(78,"span",5),m(79,"acc.account.dtopic.dt5 \xA0"),n(),m(80),n(),o(81,"mat-list-item",23)(82,"span",5),m(83,"acc.account.dtopic.dt6 \xA0"),n(),m(84),n()()(),o(85,"div",25)(86,"mat-list",22)(87,"mat-list-item",23)(88,"span",5),m(89,"acc.account.accvchhdr.creator \xA0"),n(),m(90),n(),o(91,"mat-list-item",23)(92,"span",5),m(93,"acc.account.accvchhdr.seconder \xA0"),n(),m(94),n()()(),M(95,"div"),n()()),e&2&&(p(2),d("formGroup",i.formGroup),p(5),d("placeholder",v(i.gv.dateFormatPlaceHolder))("mask",v(i.gv.dateFormat))("dropSpecialCharacters",!1),p(9),d("ngForOf",i.types),p(4),d("readonly",!0),p(4),d("readonly",!0),p(4),d("readonly",!0),p(4),d("value",v(i.statusTitle))("readonly",!0),p(4),d("value",v(i.systemName))("readonly",!0),p(18),Ye(i.sumDebit),p(4),Ye(i.sumCredit),p(4),Ye(i.rem),p(6),Ye(i.ptopicTitle),p(4),Ye(i.stopicTitle),p(4),Ye(i.dt4Title),p(4),Ye(i.dt5Title),p(4),Ye(i.dt6Title),p(6),Ye(i.creatorTitle),p(4),Ye(i.seconderTitle))},dependencies:[b,He,P,Wt,Rt,xt,qt,Ut,Kt,We,O,B,j,E,Pe,x,F,Y,Be,Re,jr,L,Yr,Qr,Le,q,Q,pr],styles:[".mat-list-item[_ngcontent-%COMP%]{height:17px!important;font-size:14px}.topBoxContent[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr)}"]});let c=r;return c})();var to=(()=>{let r=class r extends U{constructor(t,e,i,s,l,ae){super(t,i,s),this.mainService=t,this.formBuilder=e,this.notifier=i,this.translate=s,this.dialog=l,this.injector=ae,this.gv=y.variables,this.SEPARATOR=":",this.navigationBar="",this.selectedId=0;let je=this.injector.get(Pt,null);console.log(je),this.accVchFilterParams=je.data.filterData,this.navigationBar=je.data.navigationBar}ngAfterViewInit(){this.child.setParams(this.accVchFilterParams),this.child.serverData()}ngOnInit(){}action(t){console.log(t),console.log(this.child.rowData),this.child.setParams(this.accVchFilterParams),this.child.serverData(),t.startsWith("showAccVchItems")?this.openAccVchItmDialog():t.startsWith("report")||t.startsWith("reportDesign")||t.startsWith("refresh")&&(this.selectedId=0,this.child.setParams(this.accVchFilterParams),this.child.serverData())}openAccVchItmDialog(){if(console.log("openAccVchItmShowListDialog "),this.selectedId==0)return;let t={selectedItmId:this.selectedId,selectedHdrId:0},e=this.dialog.open(Zr,{panelClass:"custom-dialog-container",width:"1120px",height:"600px",data:{name:"test",dialogData:!0,data:t}})}onSelectionChanged(t){this.selectedId=t.id,console.log(t)}};r.\u0275fac=function(e){return new(e||r)(u(Ze),u(It),u(W),u(I),u(Jt),u(Ht))},r.\u0275cmp=S({type:r,selectors:[["app-AccSummaryAccVchShow"]],viewQuery:function(e,i){if(e&1&&wt(dr,5),e&2){let s;At(s=Gt())&&(i.child=s.first)}},features:[D],decls:24,vars:1,consts:[[1,"parent-card-container"],[1,"input-mat-card"],[1,"mat-b-p"],[2,"width","95px",3,"click"],["translate",""],[2,"width","100px",3,"click"],[1,"ag-grid-to-fill"],["appearance","outline","dir","rtl",2,"width","100%","padding-right","10px","padding-left","10px"],["matPrefix","","translate",""],["matInput","",3,"ngModelChange","ngModel"],[2,"height","87%"],[3,"outputGetFromGrid"]],template:function(e,i){e&1&&(o(0,"div")(1,"div",0)(2,"mat-card",1)(3,"mat-card-content")(4,"mat-button-toggle-group",2)(5,"mat-button-toggle",3),f("click",function(){return i.action("showAccVchItems")}),o(6,"span",4),m(7," acc.account.accSummary.showAccVchItems "),n()(),o(8,"mat-button-toggle",3),f("click",function(){return i.action("report")}),o(9,"span",4),m(10," acc.account.accSummary.report "),n()(),o(11,"mat-button-toggle",5),f("click",function(){return i.action("reportDesign")}),o(12,"span",4),m(13," acc.account.accSummary.reportDesign "),n()(),o(14,"mat-button-toggle",3),f("click",function(){return i.action("refresh")}),o(15,"span",4),m(16," acc.account.accSummary.refresh "),n()()()()(),o(17,"div",6)(18,"mat-form-field",7)(19,"span",8),m(20,"acc.account.accSummary.accVchDetails"),n(),o(21,"input",9),ke("ngModelChange",function(l){return Fe(i.navigationBar,l)||(i.navigationBar=l),l}),n()(),o(22,"div",10)(23,"app-AccVchItmForShow-grid",11),f("outputGetFromGrid",function(l){return i.onSelectionChanged(l)}),n()()()()()),e&2&&(p(21),Ee("ngModel",i.navigationBar))},dependencies:[b,P,Rt,xt,K,ai,q,Q,G,j,E,Pe,Qt,x,F,Y,tt,L,$,V,J,Ti,Di,O,B,z,X,Z,et,it,rt,w,ot,at,nt,ct,lt,st,gt,mt,dt,pt,ut,ft,A,ht,_t,dr],encapsulation:2});let c=r;return c})();var ti=class{setFilterValue(r,a,t,e){this.filters||(this.filters=[]);let i=new hr;i.field=r,i.operator=t,i.values=a,i.type=e,this.filters.push(i)}},hr=class{};function wo(c,r){if(c&1){let a=N();o(0,"div")(1,"app-page-header",1),Mt(2,"translate"),o(3,"button",2),f("click",function(){g(a);let e=h();return _(e.action("back"))}),o(4,"span",3),m(5,"acc.account.accSummary.back"),n()(),o(6,"button",2),f("click",function(){g(a);let e=h();return _(e.action("accVchDetails"))}),o(7,"span",3),m(8,"acc.account.accSummary.accVchDetails"),n()(),o(9,"button",2),f("click",function(){g(a);let e=h();return _(e.action("debitStatment"))}),o(10,"span",3),m(11,"acc.account.accSummary.debitStatment"),n()(),o(12,"button",2),f("click",function(){g(a);let e=h();return _(e.action("balance"))}),o(13,"span",3),m(14,"acc.account.accSummary.balance"),n()(),o(15,"button",2),f("click",function(){g(a);let e=h();return _(e.action("report"))}),o(16,"span",3),m(17,"acc.account.accSummary.report"),n()(),o(18,"button",2),f("click",function(){g(a);let e=h();return _(e.action("reportDesign"))}),o(19,"span",3),m(20,"acc.account.accSummary.reportDesign"),n()()(),o(21,"div",4)(22,"mat-card",5)(23,"mat-card-content")(24,"mat-button-toggle-group",6)(25,"mat-button-toggle",7),f("click",function(){g(a);let e=h();return _(e.action("sumGTopic"))}),o(26,"span",3),m(27,"acc.account.accSummary.gTopic"),n()(),o(28,"mat-button-toggle",8),f("click",function(){g(a);let e=h();return _(e.action("sumPTopic"))}),o(29,"span",3),m(30,"acc.account.accSummary.pTopic"),n()(),o(31,"mat-button-toggle",7),f("click",function(){g(a);let e=h();return _(e.action("sumSTopic"))}),o(32,"span",3),m(33,"acc.account.accSummary.sTopic"),n()(),o(34,"mat-button-toggle",7),f("click",function(){g(a);let e=h();return _(e.action("sumDt4"))}),o(35,"span",3),m(36,"acc.account.accSummary.dt4"),n()(),o(37,"mat-button-toggle",7),f("click",function(){g(a);let e=h();return _(e.action("sumDt5"))}),o(38,"span",3),m(39,"acc.account.accSummary.dt5"),n()(),o(40,"mat-button-toggle",7),f("click",function(){g(a);let e=h();return _(e.action("sumDt6"))}),o(41,"span",3),m(42,"acc.account.accSummary.dt6"),n()()(),M(43,"br"),o(44,"mat-button-toggle-group",9)(45,"mat-button-toggle",7),f("click",function(){g(a);let e=h();return _(e.action("detailGTopic"))}),o(46,"span",3),m(47,"acc.account.accSummary.dGTopic"),n()(),o(48,"mat-button-toggle",7),f("click",function(){g(a);let e=h();return _(e.action("detailPTopic"))}),o(49,"span",3),m(50,"acc.account.accSummary.dPTopic"),n()(),o(51,"mat-button-toggle",7),f("click",function(){g(a);let e=h();return _(e.action("detailSTopic"))}),o(52,"span",3),m(53,"acc.account.accSummary.dSTopic"),n()(),o(54,"mat-button-toggle",7),f("click",function(){g(a);let e=h();return _(e.action("detailDt4"))}),o(55,"span",3),m(56,"acc.account.accSummary.dDt4"),n()(),o(57,"mat-button-toggle",7),f("click",function(){g(a);let e=h();return _(e.action("detailDt5"))}),o(58,"span",3),m(59,"acc.account.accSummary.dDt5"),n()(),o(60,"mat-button-toggle",7),f("click",function(){g(a);let e=h();return _(e.action("detailDt6"))}),o(61,"span",3),m(62,"acc.account.accSummary.dDt6"),n()()(),M(63,"br")(64,"br"),o(65,"mat-radio-group",10),ke("ngModelChange",function(e){g(a);let i=h();return Fe(i.filterBy,e)||(i.filterBy=e),_(e)}),o(66,"div"),M(67,"mat-radio-button",11),o(68,"span",12),m(69,"acc.account.accSummary.fromDate \xA0"),n(),o(70,"mat-form-field",13)(71,"input",14),ke("ngModelChange",function(e){g(a);let i=h();return Fe(i.fromDate,e)||(i.fromDate=e),_(e)}),n()(),o(72,"span",15),m(73,"acc.account.accSummary.toDate \xA0"),n(),o(74,"mat-form-field",13)(75,"input",14),ke("ngModelChange",function(e){g(a);let i=h();return Fe(i.toDate,e)||(i.toDate=e),_(e)}),n()(),o(76,"mat-checkbox",10),ke("ngModelChange",function(e){g(a);let i=h();return Fe(i.begginingOfYear,e)||(i.begginingOfYear=e),_(e)}),o(77,"span",16),m(78,"acc.account.accSummary.begginingOfYear \xA0"),n()(),o(79,"mat-checkbox",10),ke("ngModelChange",function(e){g(a);let i=h();return Fe(i.endOfYear,e)||(i.endOfYear=e),_(e)}),o(80,"span",16),m(81,"acc.account.accSummary.endOfYear \xA0"),n()(),o(82,"mat-checkbox",10),ke("ngModelChange",function(e){g(a);let i=h();return Fe(i.profitAndLoss,e)||(i.profitAndLoss=e),_(e)}),o(83,"span",16),m(84,"acc.account.accSummary.profitAndLoss \xA0"),n()()(),o(85,"div"),M(86,"mat-radio-button",17),o(87,"span",12),m(88," acc.account.accSummary.fromVchNum\xA0 "),n(),o(89,"mat-form-field",13)(90,"input",18),ke("ngModelChange",function(e){g(a);let i=h();return Fe(i.fromVchNum,e)||(i.fromVchNum=e),_(e)}),n()(),o(91,"span",15),m(92,"acc.account.accSummary.toVchNum \xA0"),n(),o(93,"mat-form-field",13)(94,"input",18),ke("ngModelChange",function(e){g(a);let i=h();return Fe(i.toVchNum,e)||(i.toVchNum=e),_(e)}),n()(),o(95,"button",19),f("click",function(){g(a);let e=h();return _(e.action("filter"))}),o(96,"span",3),m(97,"acc.account.accSummary.filter"),n()()()()()(),o(98,"div",20)(99,"mat-form-field",21)(100,"span",22),m(101,"acc.account.accSummary.accVchDetails"),n(),o(102,"input",18),ke("ngModelChange",function(e){g(a);let i=h();return Fe(i.navigationBar,e)||(i.navigationBar=e),_(e)}),n()(),o(103,"app-AccSummary-grid",23),f("outputGetFromGrid",function(e){g(a);let i=h();return _(i.onSelectionChanged(e))}),n()()()()}if(c&2){let a=h();p(),d("pageTitle",v(vt(2,32,"menuTitle.AccSummary"))),p(24),d("disabled",a.disabledTopic.sumGTopic),p(3),d("disabled",a.disabledTopic.sumPTopic),p(3),d("disabled",a.disabledTopic.sumSTopic),p(3),d("disabled",a.disabledTopic.sumDt4),p(3),d("disabled",a.disabledTopic.sumDt5),p(3),d("disabled",a.disabledTopic.sumDt6),p(5),d("disabled",a.disabledTopic.detailGTopic),p(3),d("disabled",a.disabledTopic.detailPTopic),p(3),d("disabled",a.disabledTopic.detailSTopic),p(3),d("disabled",a.disabledTopic.detailDt4),p(3),d("disabled",a.disabledTopic.detailDt5),p(3),d("disabled",a.disabledTopic.detailDt6),p(5),Ee("ngModel",a.filterBy),p(6),d("mask",v(a.gv.dateFormat)),Ee("ngModel",a.fromDate),d("showMaskTyped",!0)("dropSpecialCharacters",!1),p(4),d("mask",v(a.gv.dateFormat)),Ee("ngModel",a.toDate),d("showMaskTyped",!0)("dropSpecialCharacters",!1),p(),Ee("ngModel",a.begginingOfYear),p(3),Ee("ngModel",a.endOfYear),p(3),Ee("ngModel",a.profitAndLoss),p(8),Ee("ngModel",a.fromVchNum),p(4),Ee("ngModel",a.toVchNum),p(8),Ee("ngModel",a.navigationBar),p(),d("accVchFilterParams",a.accVchFilterParams)}}var eo=(()=>{let r=class r extends U{constructor(t,e,i,s,l){super(t,i,s),this.mainService=t,this.formBuilder=e,this.notifier=i,this.translate=s,this.dialog=l,this.gv=y.variables,this.SEPARATOR=":",this.filterBy="",this.fromDate="",this.toDate="",this.fromVchNum="",this.toVchNum="",this.begginingOfYear=!0,this.endOfYear=!1,this.profitAndLoss=!1,this.selectedDetailTopicsList=[],this.query=[],this.selectedId=0,this.selectedAccID="",this.navigation=[],this.previousAction="",this.lastAccAction="",this.navigationBarItem=[],this.disabledTopic={sumGTopic:!1,sumPTopic:!1,sumSTopic:!1,sumDt4:!1,sumDt5:!1,sumDt6:!1,detailGTopic:!1,detailPTopic:!1,detailSTopic:!1,detailDt4:!1,detailDt5:!1,detailDt6:!1},this.formGroup=Fi.createMainForm(this.formBuilder),this.getResourcePermissions(C.AccSummary)}ngOnInit(){this.initFilterBox()}ngAfterViewInit(){setTimeout(()=>{this.child&&this.getSummary("sumPTopic")},1500)}initFilterBox(){this.mainService.getFilterBoxData(Vt.getMisYear()).subscribe(t=>{this.fromDate=t.fromDate,this.toDate=t.toDate,this.fromVchNum=t.fromVchNum,this.toVchNum=t.toVchNum,this.begginingOfYear=!0,this.filterBy="1",console.log(t)})}action(t){console.log(t),t.startsWith("sum")?this.getSummary(t):t.startsWith("detail")&&this.validateVchDate()?this.getDetailSummary(t):t.startsWith("filter")?this.filterBtn():t.startsWith("back")?this.backBtn():t.startsWith("accVchDetails")&&this.showAccVchDetails(t)}showAccVchDetails(t){if(this.selectedId==0)return;this.accVchFilterParams=this.getFilterBoxForGenericQuery(t);let e=[];this.query.forEach(l=>{e.push(l)});let i=[];this.navigationBarItem.forEach(l=>{i.push(l)}),e.length>0?(i.push(this.lastAccAction+this.SEPARATOR+this.selectedAccID+this.SEPARATOR+t),e.push(this.lastAccAction+this.SEPARATOR+this.selectedId+this.SEPARATOR+t),this.accVchFilterParams.setFilterValue("detailTopics",e,zt.IN,null)):(i.push(this.previousAction+this.SEPARATOR+this.selectedAccID+this.SEPARATOR+t),e.push(this.previousAction+this.SEPARATOR+this.selectedId+this.SEPARATOR+t),this.accVchFilterParams.setFilterValue("detailTopics",e,zt.IN,null));let s="";i.forEach(l=>{let ae=l.split(this.SEPARATOR);s=s+" / ( "+this.getTopicTranslatedName(ae[0].toLowerCase(),"topic.accID","")+" "+ae[1]+" ) "}),this.openAccVchItmShowListDialog(this.accVchFilterParams,s)}openAccVchItmShowListDialog(t,e){console.log("openAccVchItmShowListDialog ");let i={filterData:t,navigationBar:e},s=this.dialog.open(to,{panelClass:"custom-dialog-container",width:"1100px",height:"600px",data:{name:"test",dialogData:!0,data:i}})}getDetailSummary(t){if(!this.validateVchDate()){this.notifier.showError(this.translate.instant("dialog.vchDateIsNotValid"));return}this.selectedId==0||t==this.previousAction||this.navigation.find(i=>i==t)||(this.disableTogglesButton(t),this.navigation.push(this.previousAction),this.query.push(this.previousAction+this.SEPARATOR+this.selectedId+this.SEPARATOR+t),this.navigationBarItem.push(this.previousAction+this.SEPARATOR+this.selectedAccID+this.SEPARATOR+t),this.writeNavigationBar(),console.log("this.query:",this.query),this.lastAccAction=t,this.previousAction=t,this.setColumnName(t),this.accVchFilterParams=this.getFilterBoxForGenericQuery(t),this.accVchFilterParams.setFilterValue("detailTopics",this.query,zt.IN,null),this.child.setParams(this.accVchFilterParams),this.child.serverData(),this.selectedId=0,this.selectedAccID="")}getSummary(t){if(!this.validateVchDate()){this.notifier.showError(this.translate.instant("dialog.vchDateIsNotValid"));return}this.disableTogglesButton(t),this.navigation=[],this.query=[],this.navigationBarItem=[],this.navigationBar="",this.previousAction=t,this.lastAccAction=t,this.setColumnName(t),this.child.setParams(this.getFilterBoxForGenericQuery(t)),this.child.serverData(),this.selectedId=0,this.selectedAccID=""}filterBtn(){if(!this.validateVchDate()){this.notifier.showError(this.translate.instant("dialog.vchDateIsNotValid"));return}this.accVchFilterParams=this.getFilterBoxForGenericQuery(this.previousAction),this.previousAction.startsWith("detail")&&this.accVchFilterParams.setFilterValue("detailTopics",this.query,zt.IN,null),this.previousAction==""&&(this.previousAction="sumPTopic"),this.child.setParams(this.accVchFilterParams),this.child.serverData(),this.selectedId=0,this.selectedAccID=""}backBtn(){this.navigation.length!=0&&(this.disableTogglesButton("back"),this.previousAction=this.navigation[this.navigation.length-1],this.lastAccAction=this.previousAction,this.navigation.splice(this.navigation.length-1),this.navigationBarItem.splice(this.navigationBarItem.length-1),this.query.splice(this.query.length-1),this.setColumnName(this.previousAction),this.writeNavigationBar(),this.action("filter"))}writeNavigationBar(){this.navigationBar="",this.navigationBarItem.forEach(t=>{let e=t.split(this.SEPARATOR);this.navigationBar=this.navigationBar+" / ( "+this.getTopicTranslatedName(e[0].toLowerCase(),"topic.accID","")+" "+e[1]+" ) "})}getTopicTranslatedName(t,e,i){if(t.includes("gtopic")){if(e=="topic.accID")return this.translate.instant("acc.account.gtopic.accid");if(e=="topic.title")return this.translate.instant("acc.account.gtopic.title")}else if(t.includes("ptopic")){if(e=="topic.accID")return this.translate.instant("acc.account.ptopic.accid");if(e=="topic.title")return this.translate.instant("acc.account.ptopic.title")}else if(t.includes("stopic")){if(e=="topic.accID")return this.translate.instant("acc.account.stopic.accid");if(e=="topic.title")return this.translate.instant("acc.account.stopic.title")}else if(t.includes("dt4")){if(e=="topic.accID")return this.translate.instant("acc.account.dtopic.dt4");if(e=="topic.title")return this.translate.instant("acc.account.dtopic.dt4")}else if(t.includes("dt5")){if(e=="topic.accID")return this.translate.instant("acc.account.dtopic.dt5");if(e=="topic.title")return this.translate.instant("acc.account.dtopic.dt5")}else if(t.includes("dt6")){if(e=="topic.accID")return this.translate.instant("acc.account.dtopic.dt6");if(e=="topic.title")return this.translate.instant("acc.account.dtopic.dt6")}return i}setColumnName(t){var e=this.child.agGrid.getColumnDefs();t=t.toLowerCase();for(let i of e)i.headerName=this.getTopicTranslatedName(t,i.field,i.headerName);this.child.columnDefs=e}getFilterBox(t){let e=new $r;e.dataOption=t,e.searchCriteriaList=[];let i=[];return i.push(Ke.generic),this.begginingOfYear&&i.push(Ke.begginingOfYear),this.profitAndLoss&&i.push(Ke.profitAndLoss),this.endOfYear&&i.push(Ke.endOfYear),e.setFilterValues("accVchType",i,zt.IN),e.setFilterValue("status",1,zt.GREATER_THAN_EQUAL),this.filterBy=="1"?(e.setFilterValue("vchDate",this.fromDate,zt.GREATER_THAN_EQUAL),e.setFilterValue("vchDate",this.toDate,zt.LESS_THAN_EQUAL)):(e.setFilterValue("vchNum",this.fromVchNum,zt.GREATER_THAN_EQUAL),e.setFilterValue("vchNum",this.toVchNum,zt.LESS_THAN_EQUAL)),e}getFilterBoxForGenericQuery(t){let e=new ti;e.action=t;let i=[Ke.generic];return this.begginingOfYear&&i.push(Ke.begginingOfYear),this.profitAndLoss&&i.push(Ke.profitAndLoss),this.endOfYear&&i.push(Ke.endOfYear),e.setFilterValue("accVchType.id",i,zt.IN,"int"),e.setFilterValue("status",1,zt.GREATER_THAN_EQUAL,"int"),this.filterBy=="1"?(e.setFilterValue("vchDate",k.toGregorianDate(this.fromDate),zt.GREATER_THAN_EQUAL,"date"),e.setFilterValue("vchDate",k.toGregorianDate(this.toDate),zt.LESS_THAN_EQUAL,"date")):(e.setFilterValue("vchNum",this.fromVchNum,zt.GREATER_THAN_EQUAL,"int"),e.setFilterValue("vchNum",this.toVchNum,zt.LESS_THAN_EQUAL,"int")),e}onSelectionChanged(t){this.selectedId=t.topic.id,this.selectedAccID=t.topic.accID,console.log(t)}validateVchDate(){return this.filterBy=="1"?k.validateDateFormat(this.fromDate)&&k.validateDateFormat(this.toDate):!0}disableTogglesButton(t){if(t.startsWith("sum")){t=t.replace("sum","detail"),this.selectedDetailTopicsList=[],this.selectedDetailTopicsList.push(t);for(let e of Object.keys(this.disabledTopic))e==t?this.disabledTopic[e]=!0:this.disabledTopic[e]=!1}else if(t.startsWith("detail")){this.selectedDetailTopicsList.push(t);for(let e of Object.keys(this.disabledTopic))if(e==t){this.disabledTopic[e]=!0;return}}else if(t.startsWith("back")){if(this.selectedDetailTopicsList.length==1)return;for(let e of Object.keys(this.disabledTopic))if(e===this.selectedDetailTopicsList[this.selectedDetailTopicsList.length-1]){this.selectedDetailTopicsList.pop(),this.disabledTopic[e]=!1;break}}}};r.\u0275fac=function(e){return new(e||r)(u(Ze),u(It),u(W),u(I),u(Jt))},r.\u0275cmp=S({type:r,selectors:[["app-AccSummary"]],viewQuery:function(e,i){if(e&1&&wt(sr,5),e&2){let s;At(s=Gt())&&(i.child=s.first)}},features:[D],decls:1,vars:1,consts:[[4,"ngIf"],[1,"action",3,"pageTitle"],["mat-stroked-button","",1,"action",3,"click"],["translate",""],[1,"parent-card-container"],[1,"input-mat-card"],["id","summary-toggle-group"],[1,"mat-button-toggle-height",3,"click","disabled"],["checked","",1,"mat-button-toggle-height",3,"click","disabled"],["id","detail-toggle-group"],[3,"ngModelChange","ngModel"],["value","1"],["matPrefix","","translate","",2,"display","inline-block","width","60px","font-size","16px"],["appearance","outline",2,"width","150px"],["matInput","",3,"ngModelChange","ngModel","mask","showMaskTyped","dropSpecialCharacters"],["matPrefix","","translate","",2,"margin","8px","display","inline-block","width","60px","font-size","16px"],["matPrefix","","translate",""],["value","2"],["matInput","",3,"ngModelChange","ngModel"],["mat-flat-button","",2,"width","130px","height","70px","float","left",3,"click"],[1,"ag-grid-to-fill"],["appearance","outline",2,"width","calc(100% - 24px)","padding-right","12px","padding-left","12px"],["matPrefix","","translate","",2,"padding","20px"],[3,"outputGetFromGrid","accVchFilterParams"]],template:function(e,i){e&1&&T(0,wo,104,34,"div",0),e&2&&d("ngIf",i.permissionResource.R)},dependencies:[b,Ct,Le,P,Rt,xt,K,ai,Dt,q,Q,G,j,E,Pe,x,F,Y,tt,Ii,xi,L,$,V,bt,J,Ti,Di,O,B,z,X,si,Z,et,it,rt,w,ot,at,nt,ct,lt,st,gt,mt,dt,pt,ut,ft,A,ht,_t,sr,Tt],encapsulation:2});let c=r;return c})();var gr=class gr{};gr.columnDefs=[{field:"id",hide:!0},{field:"vchNum",headerName:"acc.account.accvchhdr.vchNum"},{field:"tvchNum",headerName:"acc.account.accvchhdr.tvchNum"},{field:"localNum",headerName:"acc.account.accvchhdr.localNum"},{field:"dailyId",headerName:"acc.account.accvchhdr.dailyId"},{field:"branch",headerName:"acc.account.accvchhdr.branch"},{field:"year",headerName:"acc.account.accvchhdr.year"},{field:"month",headerName:"acc.account.accvchhdr.month"},{field:"status",hide:!0,headerName:"acc.account.accvchhdr.status"},{field:"statusTitle",headerName:"acc.account.accvchhdr.statusTitle"},{field:"amount",headerName:"acc.account.accvchhdr.amount"},{field:"description",headerName:"acc.account.accvchhdr.description"},{field:"sys",hide:!0,headerName:"acc.account.accvchhdr.sys"},{field:"systemName",headerName:"acc.account.accvchhdr.systemName"},{field:"attachedDoc",headerName:"acc.account.accvchhdr.attachedDoc"},{field:"vchDate",headerName:"acc.account.accvchhdr.vchDate"},{field:"creator.fullName",headerName:"acc.account.accvchhdr.creator"},{field:"creator.id",hide:!0,headerName:"acc.account.accvchhdr.creator"},{field:"seconder.fullName",headerName:"acc.account.accvchhdr.seconder"},{field:"seconder.id",hide:!0,headerName:"acc.account.accvchhdr.seconder"},{field:"accVchType.id",hide:!0,headerName:"acc.account.accvchhdr.accVchTypeId"},{field:"accVchType.title",headerName:"acc.account.accvchtype.accvchtype"}];var Oi=gr;var ei=(()=>{let r=class r extends re{constructor(t,e,i){super(),this.service=t,this.translate=e,this.injector=i,this.dialogData=this.injector.get(Pt,null),this.columnDefs=this.translateHeaders(Oi.columnDefs,this.translate)}serverData(){console.log("t"),this.accVchFilterParams?this.service.getHdrByGenericQuery(this.accVchFilterParams).subscribe(t=>{this.populateNeededFields(t),this.rowData=t}):this.dialogData&&this.dialogData.fromDialog&&this.dialogData.fromDialog==!0?this.service.getHdrItmByYear(Vt.getMisYear()).subscribe(t=>{this.populateNeededFields(t),this.rowData=t}):this.service.getHdrItmByYear(Vt.getMisYear()).subscribe(t=>{this.populateNeededFields(t),this.rowData=t})}populateNeededFields(t){t.forEach(e=>{e.vchDate=k.toLocalDate(e.vchDate),this.getSystemName(e),this.getStatusTitle(e),k.getUserFullName(e.creator),k.getUserFullName(e.seconder)})}getSystemName(t){t.systemName=k.getSystemName(t.sys,this.translate)}getStatusTitle(t){t.statusTitle=k.getStatusTitle(t.status,this.translate)}};r.\u0275fac=function(e){return new(e||r)(u(Je),u(I),u(Ht))},r.\u0275cmp=S({type:r,selectors:[["app-accVchHdr-grid"]],inputs:{accVchStatus:"accVchStatus",accVchFilterParams:"accVchFilterParams"},features:[D],decls:8,vars:12,consts:[["dir","rtl",1,"generic-ag-grid-container"],[2,"width","100%","display","flex","gap","8px"],["appearance","outline",2,"flex","1 1 auto","margin-bottom","0px"],["matInput","","type","text","id","filter-text-box",2,"flex","0 0 90%","height","29px","margin-bottom","5px",3,"input","placeholder"],["mat-icon-button","",2,"flex","0 0 calc(1%-8px)",3,"click","matTooltip"],[1,"ag-theme-alpine",2,"height","100%",3,"cellValueChanged","cellEditingStarted","cellClicked","gridReady","selectionChanged","rowDoubleClicked","cellKeyPress","ngClass","rowHeight","headerHeight","floatingFiltersHeight","columnDefs","defaultColDef","gridOptions","rowData"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),f("input",function(l){return i.onFilterTextBoxChanged(l)}),n()(),o(4,"button",4),f("click",function(){return i.gridExport()}),o(5,"mat-icon"),m(6,"file_download"),n()()(),o(7,"ag-grid-angular",5),f("cellValueChanged",function(l){return i.onCellValueChanged(l)})("cellEditingStarted",function(l){return i.onCellEditingStarted(l)})("cellClicked",function(l){return i.onCellClicked(l)})("gridReady",function(l){return i.onGridReady(l)})("selectionChanged",function(l){return i.onSelectionRowChanged(l)})("rowDoubleClicked",function(l){return i.onRowDoubleClicked(l)})("cellKeyPress",function(l){return i.onCellKeyPress(l)}),n()()),e&2&&(p(3),d("placeholder",v(i.filterPlaceholderText)),p(),d("matTooltip",v(i.exportBtnText)),p(3),d("ngClass",i.activeTheme)("rowHeight",i.rowHeight)("headerHeight",i.headerHeight)("floatingFiltersHeight",i.floatingFiltersHeight)("columnDefs",i.columnDefs)("defaultColDef",i.defaultColDef)("gridOptions",i.gridOptions)("rowData",i.rowData))},dependencies:[b,te,G,ie,x,F,E,Qt,V,St,w,yt,A,$t],encapsulation:2});let c=r;return c})();var _r=(function(c){return c.ACC="ACC",c.STO="STO",c})(_r||{});var ji=class{static getDateNow(){let r;return r={day:"2-digit",month:"2-digit",year:"numeric"},new Date().toLocaleDateString("fa-Ir-u-nu-latn",r)}static getDateNowLong(){let r=" / ",a;a={day:"2-digit",weekday:"long",year:"numeric",month:"long"};let t="";return a={weekday:"long"},t=new Date().toLocaleDateString("fa-Ir",a),a={day:"2-digit"},t=t+r+new Date().toLocaleDateString("fa-Ir",a),a={month:"long"},t=t+r+new Date().toLocaleDateString("fa-Ir",a),a={year:"numeric"},t=t+r+new Date().toLocaleDateString("fa-Ir",a),t}};function Ao(c,r){if(c&1){let a=N();o(0,"button",52),f("click",function(){g(a);let e=h(2);return _(e.action("save"))}),o(1,"span",3),m(2,"crud.btn.save"),n()()}if(c&2){let a=h(2);d("disabled",a.formGroup.invalid)}}function Go(c,r){if(c&1){let a=N();o(0,"button",53),f("click",function(){g(a);let e=h(2);return _(e.action("saveNote"))}),o(1,"span",3),m(2,"crud.btn.saveNote"),n()()}}function No(c,r){if(c&1){let a=N();o(0,"button",54),f("click",function(){g(a);let e=h(2);return _(e.action("delete"))}),o(1,"span",3),m(2,"crud.btn.delete"),n()()}if(c&2){let a=h(2);d("disabled",a.formGroup.invalid)}}function Eo(c,r){if(c&1&&(o(0,"mat-option",55),m(1),n()),c&2){let a=r.$implicit;d("value",a.id),p(),Yt(" ",a.title," ")}}function Fo(c,r){if(c&1){let a=N();o(0,"div")(1,"app-page-header",1),Mt(2,"translate"),o(3,"button",2),f("click",function(){g(a);let e=h();return _(e.openAccVchHdrListDialog())}),o(4,"span",3),m(5,"acc.account.accvchhdr.accvchhdrlist"),n()(),o(6,"div")(7,"mat-form-field",4)(8,"mat-label",3),m(9,"acc.account.accvchhdr.searchTVchNum"),n(),o(10,"input",5),f("keyup.enter",function(e){g(a);let i=h();return _(i.searchForTVchNum(e))}),ke("ngModelChange",function(e){g(a);let i=h();return Fe(i.searchValueForTVchNum,e)||(i.searchValueForTVchNum=e),_(e)}),n()()(),T(11,Ao,3,1,"button",6)(12,Go,3,0,"button",7)(13,No,3,1,"button",8),n(),o(14,"div",9)(15,"mat-card",10)(16,"mat-card-content")(17,"form",11)(18,"div",12)(19,"div",13)(20,"label",14),m(21,"acc.account.accvchhdr.vchDate"),n(),o(22,"mat-form-field",15),M(23,"input",16),n()(),o(24,"div",13)(25,"label",17),m(26,"acc.account.accvchhdr.vchNum"),n(),o(27,"mat-form-field",15),M(28,"input",18),n()(),o(29,"div",13)(30,"label",19),m(31,"acc.account.accvchhdr.tvchNum"),n(),o(32,"mat-form-field",15),M(33,"input",20),n()(),o(34,"div",13)(35,"label",21),m(36,"acc.account.accvchhdr.dailyId"),n(),o(37,"mat-form-field",15),M(38,"input",22),n()(),o(39,"div",13)(40,"label",23),m(41,"acc.account.accvchhdr.localNum"),n(),o(42,"mat-form-field",15),M(43,"input",24),n()(),o(44,"div",13)(45,"label",25),m(46,"acc.account.accvchhdr.statusTitle"),n(),o(47,"mat-form-field",15),M(48,"input",26),n()(),o(49,"div",13)(50,"label",27),m(51,"acc.account.accvchhdr.systemName"),n(),o(52,"mat-form-field",28),M(53,"input",26),n()(),o(54,"div",13)(55,"label",29),m(56,"acc.account.accvchhdr.accvchtype"),n(),o(57,"mat-form-field",30)(58,"mat-select",31),T(59,Eo,2,2,"mat-option",32),n()()(),o(60,"div",13)(61,"label",33),m(62,"acc.account.accvchhdr.description"),n(),o(63,"mat-form-field",34),M(64,"input",35),n()(),o(65,"div",13)(66,"label",36),m(67,"acc.account.accvchhdr.attachedDoc"),n(),o(68,"mat-form-field",28),M(69,"input",37),n()()()()(),M(70,"mat-card-footer"),n(),o(71,"div",38)(72,"app-accvchitm-grid",39),f("outputGetFromGrid",function(e){g(a);let i=h();return _(i.onSelectionChanged(e))}),n()(),o(73,"div")(74,"mat-card",40)(75,"mat-card-content",41)(76,"div",42)(77,"table")(78,"tr")(79,"td",43)(80,"span",44),m(81,"acc.account.ptopic.ptopic\xA0"),n()(),o(82,"td",45),m(83),n(),o(84,"td",43)(85,"span",44),m(86,"acc.account.stopic.stopic\xA0"),n()(),o(87,"td",46),m(88),n(),M(89,"td",47),o(90,"td",48)(91,"button",49),f("click",function(){g(a);let e=h();return _(e.add())}),o(92,"mat-icon"),m(93,"add"),n()(),o(94,"button",49),f("click",function(){g(a);let e=h();return _(e.remove())}),o(95,"mat-icon"),m(96,"remove"),n()(),o(97,"button",49),f("click",function(){g(a);let e=h();return _(e.cancel())}),o(98,"mat-icon"),m(99,"cancel"),n()()()(),o(100,"tr")(101,"td",43)(102,"span",44),m(103,"acc.account.dtopic.dt4\xA0"),n()(),o(104,"td",45),m(105),n(),o(106,"td",43)(107,"span",44),m(108,"acc.account.dtopic.dt5\xA0"),n()(),o(109,"td",46),m(110),n(),o(111,"td",47)(112,"span",44),m(113,"acc.account.accvchhdr.creator\xA0"),n()(),o(114,"td",45),m(115),n()(),o(116,"tr")(117,"td",43)(118,"span",44),m(119,"acc.account.dtopic.dt6\xA0"),n()(),o(120,"td",45),m(121),n(),M(122,"td",43)(123,"td",50),o(124,"td",51)(125,"span",44),m(126,"acc.account.accvchhdr.seconder\xA0"),n()(),o(127,"td",45),m(128),n()()()()()()()()()}if(c&2){let a=h();p(),d("pageTitle",v(vt(2,36,"menuTitle.AccVchHdr")))("titleSideButtons",a.titleSideButtons),p(9),Ee("ngModel",a.searchValueForTVchNum),p(),d("ngIf",a.permissionResource.W),p(),d("ngIf",a.permissionResource.W),p(),d("ngIf",a.permissionResource.D),p(4),d("formGroup",a.formGroup),p(6),d("mask",v(a.gv.dateFormat))("showMaskTyped",!0)("dropSpecialCharacters",!1),p(5),d("readonly",!0),p(5),d("readonly",!0),p(5),d("readonly",!0),p(10),d("value",v(a.statusTitle))("readonly",!0),p(5),d("value",v(a.systemName))("readonly",!0),p(6),d("ngForOf",a.types),p(23),d("matTooltip",a.ptopicTitle),p(),Yt(" ",a.ptopicTitle," "),p(4),d("matTooltip",a.stopicTitle),p(),Yt(" ",a.stopicTitle," "),p(16),d("matTooltip",a.dt4Title),p(),Yt(" ",a.dt4Title," "),p(4),d("matTooltip",a.dt5Title),p(),Yt(" ",a.dt5Title," "),p(4),d("matTooltip",a.creatorTitle),p(),Yt(" ",a.creatorTitle," "),p(5),d("matTooltip",a.dt6Title),p(),Yt(" ",a.dt6Title," "),p(6),d("matTooltip",a.seconderTitle),p(),Yt(" ",a.seconderTitle," ")}}var io=(()=>{let r=class r extends U{constructor(t,e,i,s,l,ae){super(t,s,l),this.mainService=t,this.accVchTypeService=e,this.formBuilder=i,this.notifier=s,this.translate=l,this.dialog=ae,this.gv=y.variables,this.statusTitle="",this.formGroup=Ur.createMainForm(this.formBuilder),this.getResourcePermissions(C.AccVchHdr),this.accVchTypeService.getAll().subscribe(je=>{this.types=je}),this.deletedRows=[],this.getSystemName()}ngOnInit(){}action(t){if(console.log(t),console.log(this.formGroup.controls.vchDate.value),k.checkForForwardSlashOfDate(this.formGroup.controls.vchDate),t=="save"){if(this.checkFormIsInvalid())return;this.create()}else if(t=="saveNote"){if(this.checkFormIsInvalid())return;this.createNote()}else if(t=="delete"){if(this.checkFormIsInvalid())return;this.delete()}else t=="reset"?this.reset():t=="refresh"?this.refresh():t=="gridExport"&&this.gridExport()}gridExport(){this.child.agGrid.exportDataAsCsv()}checksBeforeSave(t){return this.checkVchDate()?this.formGroup.controls.status.value==2||this.formGroup.controls.status.value==3?(this.notifier.showError(this.translate.instant("dialog.isNotAccVchStatusAllowedToChange")),!1):(this.removeEmptyStopics(),this.calculateSums(),t>0&&this.rem!=0?(this.notifier.showError(this.translate.instant("dialog.isNotAccVchBalanced")),!1):!(t>0&&!this.checkRowIfFilledCorrectly()||this.child.rowData.length==0)):!1}checkVchDate(){let t=k.checkVchDate(this.formGroup.controls.vchDate.value);return t!=null?(this.notifier.showError(this.translate.instant(t)),!1):!0}removeEmptyStopics(){let t=this.child.rowData.length,e=this.child.rowData.length;for(let i=0;i<e;i++)this.child.rowData[i].stopic==null&&(this.child.rowData[i].id==null||this.child.rowData[i].id==null||this.child.rowData[i].id=="")&&(this.child.rowData.splice(i,1),e=e-1);t!=this.child.rowData.length&&this.child.agGrid.redrawRows()}checkRowIfFilledCorrectly(){for(let t of this.child.rowData){if(t.stopic!=null&&t.stopic.dt4!=null&&t.stopic.dt4!=""){if(t.dt4==null)return this.notifier.showError(this.translate.instant("dialog.dt4MustNotBeEmpty")+t.seq),!1;if(t.stopic.dt5!=null&&t.stopic.dt5!=""){if(t.dt5==null)return this.notifier.showError(this.translate.instant("dialog.dt5MustNotBeEmpty")+t.seq),!1;if(t.stopic.dt6!=null&&t.stopic.dt6!=""&&t.dt6==null)return this.notifier.showError(this.translate.instant("dialog.dt6MustNotBeEmpty")+t.seq),!1}}if(t.debit==0&&t.credit==0)return this.notifier.showError(this.translate.instant("dialog.rowMustHaveDebitOrCredit")+t.seq),!1;if(t.description==null||t.description=="")return this.notifier.showError(this.translate.instant("dialog.rowMustHaveDescription")+t.seq),!1}return!0}checkFormIsInvalid(){return this.formGroup.invalid?(Object.keys(this.formGroup.controls).forEach(t=>{let e=this.formGroup.get(t);e&&e.invalid&&console.log(`Field "${t}" is invalid. Errors:`,e.errors)}),console.log("form is invalid"),this.formGroup.markAllAsTouched(),!0):!1}onSelectionChanged(t){console.log("returned value from onSelectionChanged: "),this.getTopicsTitle(t),this.calculateSums()}getTopicsTitle(t){t!=null&&(t.stopic!=null&&t.stopic.title!=null?this.stopicTitle=t.stopic.title:this.stopicTitle="",t.stopic!=null&&t.stopic.ptopic.title!=null?this.ptopicTitle=t.stopic.ptopic.title:this.ptopicTitle="",t.dt4!=null&&t.dt4.title!=null?this.dt4Title=t.dt4.title:this.dt4Title="",t.dt5!=null&&t.dt5.title!=null?this.dt5Title=t.dt5.title:this.dt5Title="",t.dt6!=null&&t.dt6.title!=null?this.dt6Title=t.dt6.title:this.dt6Title="")}openAccVchHdrListDialog(){let t=this.dialog.open(ei,{panelClass:"custom-dialog-container",width:"1100px",height:"600px",data:{name:"test",dialogData:!0,data:[]}}),e=t.componentInstance.outputGetFromGridToDialog.subscribe(i=>{console.log("returned value from dialog: "+i.id),this.mainService.getHdrItmById(i.id).subscribe(s=>{this.patchForm(this.formGroup,s.accVchHdr),this.child.rowData=s.accVchItm,this.populateCreatorAndSeconderInfo(s.accVchHdr),this.child.updatePinnedBottomRow(),this.calculateSums(),this.getStatusTitle(),this.getSystemName()}),e.unsubscribe(),t.close()})}populateCreatorAndSeconderInfo(t){t.creator!=null?this.creatorTitle=t.creator.userFirstName+" "+t.creator.userLastName:this.creatorTitle="",t.seconder!=null?this.seconderTitle=t.seconder.userFirstName+" "+t.seconder.userLastName:this.seconderTitle=""}add(){let t=0;this.child.rowData.length>0&&(t=this.child.rowData.length);let e={seq:t+1};this.child.rowData.push(e),this.child.agGrid.applyTransaction({add:[e]})}remove(){let t=this.child.agGrid.getSelectedRows();if(t.length==0||!t[0].seq)return;let e=this.child.rowData.findIndex(i=>i.seq===t[0].seq);e!=-1&&(this.child.rowData.splice(e,1),this.child.agGrid.applyTransaction({remove:t}),t[0].id!=0&&t[0].id!=null&&this.deletedRows.push(t[0]),this.seqFixer()),this.calculateSums()}seqFixer(){let t=1;this.child.rowData.forEach(e=>{e.seq=t++}),this.child.agGrid.redrawRows()}cancel(){this.child.agGrid.undoCellEditing()}calculateSums(){let t=0,e=0;this.child.rowData.forEach(s=>{if(s.debit==null)e=+e+0;else{let l=+s.debit;e=+e+l}if(s.credit==null)t=+t+0;else{let l=+s.credit;t=+t+l}});let i=new Intl.NumberFormat;this.sumCredit=i.format(t),this.sumDebit=i.format(e),this.rem=i.format(e-t)}getStatusTitle(){let t=0;this.formGroup.controls.status&&(t=this.formGroup.controls.status.value),this.statusTitle=k.getStatusTitle(t,this.translate)}saveHdrItm(t){if(this.seqFixer(),this.child.agGrid.redrawRows(),!this.checksBeforeSave(t))return;let e=new Kr(null);e.accVchHdr=this.formGroup.value,e.accVchItm=this.child.rowData,e.deletedRows=this.deletedRows,this.rowCheckAndFix(e.accVchItm),e.accVchHdr.sys="ACC",e.accVchHdr.status=t,e.accVchHdr.year=Vt.getMisYear(),e.accVchHdr.month=k.getMonthFromVchDate(e.accVchHdr.vchDate),e.accVchHdr.vchDate=k.toGregorianDate(e.accVchHdr.vchDate),this.mainService.createHdrItm(e).subscribe(i=>{if(i==null){this.notifier.showError(this.translate.instant("dialog.operationFailed"));return}this.patchForm(this.formGroup,i.accVchHdr),this.child.rowData=[],this.child.rowData=i.accVchItm,this.child.agGrid.redrawRows(),this.deletedRows=[],this.getStatusTitle(),this.notifier.showSuccess(this.translate.instant("dialog.operationIsDone"))})}patchForm(t,e){e.vchDate=k.toLocalDate(e.vchDate),t.patchValue(e)}rowCheckAndFix(t){t.forEach(e=>{e.persuitDate==""&&(e.persuitDate=null)})}create(){this.saveHdrItm(1)}createNote(){this.saveHdrItm(0)}delete(){var t=confirm(this.translate.instant("dialog.beforeDelete"));let e=this.formGroup.controls.id.value,i=this.formGroup.controls.sys.value;if(e==null){this.reset();return}if(i!="ACC"){this.notifier.showError(this.translate.instant("dialog.isNotPossibleToDeleteOtherSystemsVch"));return}let s=this.formGroup.controls.status.value;if(s!=null&&(s==2||s==3)){this.notifier.showError(this.translate.instant("dialog.isNotPossibleToDeletePermOrFixedVch"));return}e&&t&&this.mainService.delete(e).subscribe(()=>{this.reset(),this.notifier.showSuccess(this.translate.instant("dialog.operationIsDone"))})}reset(){this.formGroup.reset(),this.child.rowData=[],this.deletedRows=[],this.formGroup.controls.sys.setValue(_r.ACC),this.getSystemName(),this.statusTitle="",this.systemName="",this.creatorTitle="",this.seconderTitle="",this.formGroup.controls.vchDate.setValue(ji.getDateNow()),this.types&&this.types.length>0&&this.formGroup.controls.accVchType.patchValue({id:this.types[0].id,title:this.types[0].title}),this.child.clearPinnedBottomRow(),this.add()}getSystemName(){let t=this.formGroup.controls.sys.value;this.systemName=k.getSystemName(t,this.translate)}searchForTVchNum(t){if(console.log(this.searchValueForTVchNum),!this.searchValueForTVchNum)return;let e=new $e(null);e.tvchNum=this.searchValueForTVchNum,e.year=Vt.getMisYear(),this.searchValueForTVchNum="",this.mainService.getHdrItmByCriteriaHdr(e).subscribe(i=>{if(i==null){this.notifier.showSuccess(this.translate.instant("dialog.searchResultIsEmpty"));return}this.patchForm(this.formGroup,i.accVchHdr),this.child.setDataFromOutside(i.accVchItm),this.populateCreatorAndSeconderInfo(i.accVchHdr),this.getStatusTitle(),this.getSystemName()})}};r.\u0275fac=function(e){return new(e||r)(u(Je),u(ze),u(It),u(W),u(I),u(Jt))},r.\u0275cmp=S({type:r,selectors:[["app-accVchHdr"]],viewQuery:function(e,i){if(e&1&&wt(mi,5),e&2){let s;At(s=Gt())&&(i.child=s.first)}},features:[D],decls:1,vars:1,consts:[[4,"ngIf"],[1,"action",3,"pageTitle","titleSideButtons"],["mat-stroked-button","",3,"click"],["translate",""],["appearance","outline","floatLabel","always",2,"width","100%","height","28px","margin-top","0px"],["matInput","",3,"keyup.enter","ngModelChange","ngModel"],["mat-flat-button","","class","action",3,"disabled","click",4,"ngIf"],["mat-stroked-button","","class","action",3,"click",4,"ngIf"],["mat-stroked-button","","class","action",3,"disabled","click",4,"ngIf"],[1,"parent-card-container"],[1,"input-mat-card"],[3,"formGroup"],[1,"row-fields"],[1,"field-item"],["for","vchDate","translate",""],["appearance","outline",1,"form-field-1x"],["matInput","","id","vchDate","formControlName","vchDate","appInputMask","",3,"mask","showMaskTyped","dropSpecialCharacters"],["for","vchNum","translate",""],["matInput","","id","vchNum","formControlName","vchNum",3,"readonly"],["for","tvchNum","translate",""],["matInput","","id","tvchNum","formControlName","tvchNum",3,"readonly"],["for","dailyId","translate",""],["matInput","","id","dailyId","formControlName","dailyId",3,"readonly"],["for","localNum","translate",""],["matInput","","id","localNum","formControlName","localNum"],["for","statusTitle","translate",""],["matInput","",3,"value","readonly"],["for","systemName","translate",""],["appearance","outline",1,"form-field-2x"],["for","accVchType","translate",""],["appearance","outline","formGroupName","accVchType",1,"form-field-2x"],["id","accVchType","formControlName","id"],[3,"value",4,"ngFor","ngForOf"],["for","description","translate",""],["appearance","outline",1,"form-field-4x"],["matInput","","id","description","formControlName","description"],["for","attachedDoc","translate",""],["matInput","","id","attachedDoc","formControlName","attachedDoc"],[1,"ag-grid-to-fill"],[3,"outputGetFromGrid"],[1,"acc-vch-hdr-info-mat-card"],[2,"padding-top","0px"],[2,"float","right"],[2,"width","60px","min-width","60px","opacity","0.5"],["matPrefix","","translate",""],[2,"width","330px","max-width","330px","overflow","hidden","text-overflow","ellipsis","white-space","nowrap",3,"matTooltip"],[2,"width","360px","max-width","360px","overflow","hidden","text-overflow","ellipsis","white-space","nowrap",3,"matTooltip"],[2,"width","100px","min-width","60px","opacity","0.5"],[2,"width","330px","max-width","330px","overflow","hidden","text-overflow","ellipsis","white-space","nowrap","float","left"],["mat-icon-button","",3,"click"],[2,"width","330px","max-width","330px","overflow","hidden","text-overflow","ellipsis","white-space","nowrap"],[2,"width","100px","min-width","100px","opacity","0.5"],["mat-flat-button","",1,"action",3,"click","disabled"],["mat-stroked-button","",1,"action",3,"click"],["mat-stroked-button","",1,"action",3,"click","disabled"],[3,"value"]],template:function(e,i){e&1&&T(0,Fo,129,38,"div",0),e&2&&d("ngIf",i.permissionResource.R)},dependencies:[b,He,Ct,Le,P,Wt,Rt,xt,qt,Ut,Kt,We,K,ai,Dt,q,Q,G,j,E,Or,Pe,x,F,Y,Be,Re,tt,L,$,V,bt,St,J,O,B,z,Lr,X,Z,et,it,rt,w,yt,ot,at,nt,ct,lt,st,gt,mt,dt,pt,ut,ft,A,$t,ht,_t,mi,Tt],styles:[".mat-list-item[_ngcontent-%COMP%]{height:20px!important;font-size:14px}"]});let c=r;return c})();var Mr=class Mr{static createMainForm(r){return r.group({id:[null],vchDate:[null,[H.required,H.pattern(this.gv.datePattern)]]})}};Mr.gv=y.variables;var Li=Mr;var ro=(()=>{let r=class r extends oe{constructor(t){super(t),this.http=t,this.setBaseUrl(C.AccVchHdrBeginningOFYear)}saveBeginningOfYearVch(t){return this.http.post(`${this.baseUrl}/saveBeginningOfYearVch`,t)}getAccVchHdrBeginningOfYear(t){return this.http.get(`${this.baseUrl}/getAccVchHdrBeginningOfYear/${t}`)}};r.\u0275fac=function(e){return new(e||r)(Zt(ee))},r.\u0275prov=Xt({token:r,factory:r.\u0275fac,providedIn:"root"});let c=r;return c})();function Ho(c,r){if(c&1){let a=N();o(0,"button",10),f("click",function(){g(a);let e=h(2);return _(e.action("save"))}),o(1,"span",11),m(2,"crud.btn.save"),n()()}}function Ro(c,r){if(c&1&&(o(0,"mat-card",4)(1,"mat-card-header")(2,"mat-card-title")(3,"span",11),m(4,"dialog.beginningOfYearVchAlreadyCreated"),n()()(),o(5,"mat-card-content"),M(6,"br"),o(7,"div",12)(8,"div",13)(9,"label",14),m(10,"acc.account.accvchhdr.vchNum"),n(),o(11,"mat-form-field",7),M(12,"input",15),n()(),o(13,"div",13)(14,"label",16),m(15,"acc.account.accvchhdr.tvchNum"),n(),o(16,"mat-form-field",7),M(17,"input",17),n()()()()()),c&2){let a=h(2);p(12),d("value",a.vchNum),p(5),d("value",a.tvchNum)}}function Po(c,r){if(c&1&&(o(0,"div")(1,"app-page-header",1),Mt(2,"translate"),T(3,Ho,3,0,"button",2),n(),o(4,"div",3)(5,"mat-card",4)(6,"mat-card-content")(7,"form",5)(8,"label",6),m(9,"acc.account.accvchhdr.vchDate"),n(),o(10,"mat-form-field",7),M(11,"input",8),n()()()(),T(12,Ro,18,2,"mat-card",9),n()()),c&2){let a=h();p(),d("pageTitle",v(vt(2,10,"menuTitle.AccVchHdrBeginningOFYear"))),p(2),d("ngIf",a.permissionResource.W),p(4),d("formGroup",a.formGroup),p(4),d("placeholder",v(a.gv.dateFormatPlaceHolder))("mask",v(a.gv.dateFormat))("dropSpecialCharacters",!1),p(),d("ngIf",a.isVchHdrCreated)}}var oo=(()=>{let r=class r extends U{constructor(t,e,i,s,l){super(t,i,s),this.mainService=t,this.formBuilder=e,this.notifier=i,this.translate=s,this.dialog=l,this.gv=y.variables,this.vchNum=null,this.tvchNum=null,this.isVchHdrCreated=!1,this.toppings=new qe(""),this.formGroup=Li.createMainForm(this.formBuilder),this.getResourcePermissions(C.AccVchHdrBeginningOFYear)}ngOnInit(){this.getBeginningYearVchHdr()}action(t){this.vchNum!=null||this.tvchNum!=null||this.create()}create(){let t=this.formGroup.controls.vchDate.value,e=k.checkVchDate(t);if(e!=null){this.notifier.showError(this.translate.instant(e));return}let i=new $e;i.vchDate=k.toGregorianDate(t),i.year=Vt.getMisYear(),i.month=k.getMonthFromVchDate(t),this.mainService.saveBeginningOfYearVch(i).subscribe(s=>{this.getBeginningYearVchHdr(),this.notifier.showSuccess(this.translate.instant("dialog.operationIsDone"))})}getBeginningYearVchHdr(){this.mainService.getAccVchHdrBeginningOfYear(Vt.getMisYear()).subscribe(t=>{t!=null&&(this.formGroup.controls.vchDate.setValue(t.vchDate),this.vchNum=t.vchNum,this.tvchNum=t.tvchNum,this.isVchHdrCreated=this.vchNum!=null&&this.tvchNum!=null)})}};r.\u0275fac=function(e){return new(e||r)(u(ro),u(It),u(W),u(I),u(Jt))},r.\u0275cmp=S({type:r,selectors:[["app-accVchHdrBeginningOfYear"]],features:[D],decls:1,vars:1,consts:[[4,"ngIf"],[1,"action",3,"pageTitle"],["mat-flat-button","","color","accent","class","action",3,"click",4,"ngIf"],[1,"parent-card-container"],[1,"input-mat-card"],[3,"formGroup"],["for","vchDate","translate",""],["appearance","outline"],["matInput","","id","vchDate","formControlName","vchDate",3,"placeholder","mask","dropSpecialCharacters"],["class","input-mat-card",4,"ngIf"],["mat-flat-button","","color","accent",1,"action",3,"click"],["translate",""],[1,"row-fields"],[1,"field-item"],["for","vchNum","translate",""],["matInput","","id","vchNum","readonly","",3,"value"],["for","tvchNum","translate",""],["matInput","","id","tvchNum","readonly","",3,"value"]],template:function(e,i){e&1&&T(0,Po,13,12,"div",0),e&2&&d("ngIf",i.permissionResource.R)},dependencies:[b,Ct,Le,P,Wt,Rt,xt,qt,Ut,Kt,K,Dt,q,Q,G,j,E,x,F,Y,tt,L,$,V,bt,J,O,B,z,li,ci,X,Z,et,it,rt,w,ot,at,nt,ct,lt,st,gt,mt,dt,pt,ut,ft,A,ht,_t,Tt],encapsulation:2});let c=r;return c})();var vr=class vr{};vr.columnDefs=[{field:"id",hide:!0,checkboxSelection:!0},{field:"stopic.id",hide:!0,headerName:"acc.account.stopic"},{field:"stopic.accID",headerName:"acc.account.stopic.accid"},{field:"stopic.title",headerName:"acc.account.stopic.title"},{field:"dt4.id",hide:!0,headerName:"acc.account.dtopic.dt4"},{field:"dt4.accID",headerName:"acc.account.dtopic.accid"},{field:"dt4.title",headerName:"acc.account.dt4"},{field:"dt5.id",hide:!0,headerName:"acc.account.dtopic.dt5"},{field:"dt5.accID",headerName:"acc.account.dtopic.accid"},{field:"dt5.title",headerName:"acc.account.dt5"},{field:"dt6.id",hide:!0,headerName:"acc.account.dt6"},{field:"dt6.accID",headerName:"acc.account.dtopic.accid"},{field:"dt6.title",headerName:"acc.account.dt6"},{field:"accVchHdr.vchNum",headerName:"acc.account.accvchhdr.vchNum"},{field:"accVchHdr.tvchNum",headerName:"acc.account.accvchhdr.tvchNum"},{field:"year",headerName:"acc.account.accvchhdr.year"},{field:"month",headerName:"acc.account.accvchhdr.month"},{field:"description",headerName:"acc.account.accvchhdr.description"},{field:"vchDate",headerName:"acc.account.accvchhdr.vchDate"},{field:"creator.fullName",headerName:"acc.account.accvchhdr.creator"},{field:"creator.id",hide:!0,headerName:"acc.account.accvchhdr.creator"},{field:"seconder.fullName",headerName:"acc.account.accvchhdr.seconder"},{field:"seconder.id",hide:!0,headerName:"acc.account.accvchhdr.seconder"}];var Yi=vr;var Qi=(()=>{let r=class r extends oe{constructor(t){super(t),this.http=t,this.setBaseUrl(C.AccVchHdrClose)}getHdrItmById(t){return this.http.get(`${this.baseUrl}/getHdrItmById/${t}`)}getHdrItmByYear(t){return this.http.get(`${this.baseUrl}/getHdrItmByYear/${t}`)}getHdrItmByCriteriaHdr(t){return this.http.post(`${this.baseUrl}/getHdrItmByCriteriaHdr`,t)}};r.\u0275fac=function(e){return new(e||r)(Zt(ee))},r.\u0275prov=Xt({token:r,factory:r.\u0275fac,providedIn:"root"});let c=r;return c})();var Cr=(()=>{let r=class r extends re{constructor(t,e,i){super(),this.service=t,this.translate=e,this.injector=i,this.dialogData=this.injector.get(Pt,null),this.columnDefs=this.translateHeaders(Yi.columnDefs,this.translate),this.frameworkComponents={checkboxRenderer:Xe}}serverData(){console.log("t"),this.dialogData&&this.dialogData.fromDialog&&this.dialogData.fromDialog==!0?this.service.getAll().subscribe(t=>{this.populateNeededFields(t),this.rowData=t}):this.service.getAll().subscribe(t=>{this.populateNeededFields(t),this.rowData=t})}populateNeededFields(t){t.forEach(e=>{k.getUserFullName(e.creator),k.getUserFullName(e.seconder)})}};r.\u0275fac=function(e){return new(e||r)(u(Qi),u(I),u(Ht))},r.\u0275cmp=S({type:r,selectors:[["app-accVchHdrClose-grid"]],features:[D],decls:8,vars:12,consts:[["dir","rtl",1,"generic-ag-grid-container"],[2,"width","100%","display","flex","gap","8px"],["appearance","outline",2,"flex","1 1 auto","margin-bottom","0px"],["matInput","","type","text","id","filter-text-box",2,"flex","0 0 90%","height","29px","margin-bottom","5px",3,"input","placeholder"],["mat-icon-button","",2,"flex","0 0 calc(1%-8px)",3,"click","matTooltip"],[1,"ag-theme-alpine",2,"height","100%",3,"cellValueChanged","cellEditingStarted","cellClicked","gridReady","selectionChanged","rowDoubleClicked","cellKeyPress","ngClass","rowHeight","headerHeight","floatingFiltersHeight","columnDefs","defaultColDef","gridOptions","rowData"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),f("input",function(l){return i.onFilterTextBoxChanged(l)}),n()(),o(4,"button",4),f("click",function(){return i.gridExport()}),o(5,"mat-icon"),m(6,"file_download"),n()()(),o(7,"ag-grid-angular",5),f("cellValueChanged",function(l){return i.onCellValueChanged(l)})("cellEditingStarted",function(l){return i.onCellEditingStarted(l)})("cellClicked",function(l){return i.onCellClicked(l)})("gridReady",function(l){return i.onGridReady(l)})("selectionChanged",function(l){return i.onSelectionRowChanged(l)})("rowDoubleClicked",function(l){return i.onRowDoubleClicked(l)})("cellKeyPress",function(l){return i.onCellKeyPress(l)}),n()()),e&2&&(p(3),d("placeholder",v(i.filterPlaceholderText)),p(),d("matTooltip",v(i.exportBtnText)),p(3),d("ngClass",i.activeTheme)("rowHeight",i.rowHeight)("headerHeight",i.headerHeight)("floatingFiltersHeight",i.floatingFiltersHeight)("columnDefs",i.columnDefs)("defaultColDef",i.defaultColDef)("gridOptions",i.gridOptions)("rowData",i.rowData))},dependencies:[b,te,G,ie,x,F,E,Qt,V,St,w,yt,A,$t],encapsulation:2});let c=r;return c})();var Sr=class Sr{static createMainForm(r){return r.group({id:[null],vchDate:[null,[H.required,H.pattern(this.gv.datePattern)]],stopic:r.group({id:["",H.required],accID:[null,H.required],title:[null]}),dt4:r.group({id:[null],accID:[null],title:[null]}),dt5:r.group({id:[null],accID:[null],title:[null]}),dt6:r.group({id:[null],accID:[null],title:[null]}),vchNum:[null],tvchNum:[null],description:[null,H.required]})}};Sr.gv=y.variables;var qi=Sr;var vi=(()=>{let r=class r extends re{constructor(t,e,i){super(),this.service=t,this.translate=e,this.injector=i,this.dialogData=this.injector.get(Pt,null),this.columnDefs=this.translateHeaders(qr.columnDefs,this.translate),this.frameworkComponents={checkboxRenderer:Xe}}serverData(){console.log("t"),this.dialogData&&this.dialogData.fromDialog&&this.dialogData.fromDialog==!0?this.service.getAll().subscribe(t=>{t.forEach(e=>{e=this.convertDtopicType(e)}),this.rowData=t}):this.service.getAll().subscribe(t=>{t.forEach(e=>{e=this.convertDtopicType(e)}),this.rowData=t})}convertDtopicType(t){t.dt4=this.convertDt(t.dt4),t.dt5=this.convertDt(t.dt5),t.dt6=this.convertDt(t.dt6)}convertDt(t){if(!t||t.trim()==="")return[];let e=t.split(","),i=[];return e.forEach(s=>{var l=+s;i.push(l)}),i}};r.\u0275fac=function(e){return new(e||r)(u(Vi),u(I),u(Ht))},r.\u0275cmp=S({type:r,selectors:[["app-stopic-grid"]],features:[D],decls:8,vars:12,consts:[["dir","rtl",1,"generic-ag-grid-container"],[2,"width","100%","display","flex","gap","8px"],["appearance","outline",2,"flex","1 1 auto","margin-bottom","0px"],["matInput","","type","text","id","filter-text-box",2,"flex","0 0 90%","height","29px","margin-bottom","5px",3,"input","placeholder"],["mat-icon-button","",2,"flex","0 0 calc(1%-8px)",3,"click","matTooltip"],[1,"ag-theme-alpine",2,"height","100%",3,"cellValueChanged","cellEditingStarted","cellClicked","gridReady","selectionChanged","rowDoubleClicked","cellKeyPress","ngClass","rowHeight","headerHeight","floatingFiltersHeight","columnDefs","defaultColDef","gridOptions","rowData"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),f("input",function(l){return i.onFilterTextBoxChanged(l)}),n()(),o(4,"button",4),f("click",function(){return i.gridExport()}),o(5,"mat-icon"),m(6,"file_download"),n()()(),o(7,"ag-grid-angular",5),f("cellValueChanged",function(l){return i.onCellValueChanged(l)})("cellEditingStarted",function(l){return i.onCellEditingStarted(l)})("cellClicked",function(l){return i.onCellClicked(l)})("gridReady",function(l){return i.onGridReady(l)})("selectionChanged",function(l){return i.onSelectionRowChanged(l)})("rowDoubleClicked",function(l){return i.onRowDoubleClicked(l)})("cellKeyPress",function(l){return i.onCellKeyPress(l)}),n()()),e&2&&(p(3),d("placeholder",v(i.filterPlaceholderText)),p(),d("matTooltip",v(i.exportBtnText)),p(3),d("ngClass",i.activeTheme)("rowHeight",i.rowHeight)("headerHeight",i.headerHeight)("floatingFiltersHeight",i.floatingFiltersHeight)("columnDefs",i.columnDefs)("defaultColDef",i.defaultColDef)("gridOptions",i.gridOptions)("rowData",i.rowData))},dependencies:[b,te,G,ie,x,F,E,Qt,V,St,w,yt,A,$t],encapsulation:2});let c=r;return c})();var oi=(()=>{let r=class r extends re{constructor(t,e,i){super(),this.service=t,this.translate=e,this.injector=i,this.dialogData=this.injector.get(Pt,null),this.columnDefs=this.translateHeaders(Wr.columnDefs,this.translate),this.frameworkComponents={checkboxRenderer:Xe}}serverData(){this.dialogData&&this.dialogData.fromDialog&&this.dialogData.fromDialog==!0?this.service.getAll().subscribe(t=>{this.rowData=t}):this.service.getAll().subscribe(t=>{this.rowData=t})}};r.\u0275fac=function(e){return new(e||r)(u(wi),u(I),u(Ht))},r.\u0275cmp=S({type:r,selectors:[["app-dtopic-grid"]],features:[D],decls:8,vars:12,consts:[["dir","rtl",1,"generic-ag-grid-container"],[2,"width","100%","display","flex","gap","8px"],["appearance","outline",2,"flex","1 1 auto","margin-bottom","0px"],["matInput","","type","text","id","filter-text-box",2,"flex","0 0 90%","height","29px","margin-bottom","5px",3,"input","placeholder"],["mat-icon-button","",2,"flex","0 0 calc(1%-8px)",3,"click","matTooltip"],[1,"ag-theme-alpine",2,"height","100%",3,"cellValueChanged","cellEditingStarted","cellClicked","gridReady","selectionChanged","rowDoubleClicked","cellKeyPress","ngClass","rowHeight","headerHeight","floatingFiltersHeight","columnDefs","defaultColDef","gridOptions","rowData"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),f("input",function(l){return i.onFilterTextBoxChanged(l)}),n()(),o(4,"button",4),f("click",function(){return i.gridExport()}),o(5,"mat-icon"),m(6,"file_download"),n()()(),o(7,"ag-grid-angular",5),f("cellValueChanged",function(l){return i.onCellValueChanged(l)})("cellEditingStarted",function(l){return i.onCellEditingStarted(l)})("cellClicked",function(l){return i.onCellClicked(l)})("gridReady",function(l){return i.onGridReady(l)})("selectionChanged",function(l){return i.onSelectionRowChanged(l)})("rowDoubleClicked",function(l){return i.onRowDoubleClicked(l)})("cellKeyPress",function(l){return i.onCellKeyPress(l)}),n()()),e&2&&(p(3),d("placeholder",v(i.filterPlaceholderText)),p(),d("matTooltip",v(i.exportBtnText)),p(3),d("ngClass",i.activeTheme)("rowHeight",i.rowHeight)("headerHeight",i.headerHeight)("floatingFiltersHeight",i.floatingFiltersHeight)("columnDefs",i.columnDefs)("defaultColDef",i.defaultColDef)("gridOptions",i.gridOptions)("rowData",i.rowData))},dependencies:[b,te,G,ie,x,F,E,Qt,V,St,w,yt,A,$t],encapsulation:2});let c=r;return c})();function jo(c,r){if(c&1){let a=N();o(0,"button",29),f("click",function(){g(a);let e=h(2);return _(e.action("save"))}),o(1,"span",30),m(2,"crud.btn.save"),n()()}if(c&2){let a=h(2);d("disabled",a.formGroup.invalid)}}function Lo(c,r){if(c&1){let a=N();o(0,"div")(1,"app-page-header",1),Mt(2,"translate"),T(3,jo,3,1,"button",2),n(),o(4,"div",3)(5,"mat-card",4)(6,"mat-card-content")(7,"form",5)(8,"div",6)(9,"div",7)(10,"label",8),m(11,"acc.account.accvchhdr.vchDate"),n(),o(12,"mat-form-field",9),M(13,"input",10),n()(),o(14,"div",7)(15,"label",11),m(16,"acc.account.accvchhdr.description"),n(),o(17,"mat-form-field",9),M(18,"input",12),n()(),o(19,"div",7)(20,"label",13),m(21,"acc.account.stopic.accid"),n(),o(22,"mat-form-field",14),M(23,"input",15),o(24,"button",16),f("click",function(){g(a);let e=h();return _(e.openStopicDialog())}),o(25,"mat-icon"),m(26,"search"),n()()()(),o(27,"div",7)(28,"label",17),m(29,"acc.account.dtopic.dt4"),n(),o(30,"mat-form-field",18),M(31,"input",15),o(32,"button",16),f("click",function(){g(a);let e=h();return _(e.openDt4Dialog())}),o(33,"mat-icon"),m(34,"search"),n()()()(),o(35,"div",7)(36,"label",19),m(37,"acc.account.dtopic.dt5"),n(),o(38,"mat-form-field",20),M(39,"input",15),o(40,"button",16),f("click",function(){g(a);let e=h();return _(e.openDt5Dialog())}),o(41,"mat-icon"),m(42,"search"),n()()()(),o(43,"div",7)(44,"label",21),m(45,"acc.account.dtopic.dt6"),n(),o(46,"mat-form-field",22),M(47,"input",15),o(48,"button",16),f("click",function(){g(a);let e=h();return _(e.openDt6Dialog())}),o(49,"mat-icon"),m(50,"search"),n()()()(),o(51,"div",7)(52,"label",23),m(53,"acc.account.accvchhdr.vchNum"),n(),o(54,"mat-form-field",9),M(55,"input",24),n()(),o(56,"div",7)(57,"label",25),m(58,"acc.account.accvchhdr.tvchNum"),n(),o(59,"mat-form-field",9),M(60,"input",26),n()()()()()(),o(61,"div",27)(62,"app-accVchHdrClose-grid",28),f("outputGetFromGrid",function(e){g(a);let i=h();return _(i.onSelectionChanged(e))}),n()()()()}if(c&2){let a=h();p(),d("pageTitle",v(vt(2,12,"menuTitle.AccVchHdrClose")))("titleSideButtons",a.titleSideButtons),p(2),d("ngIf",a.permissionResource.W),p(4),d("formGroup",a.formGroup),p(6),d("placeholder",v(a.gv.dateFormatPlaceHolder))("mask",v(a.gv.dateFormat))("dropSpecialCharacters",!1),p(42),d("readonly",!0),p(5),d("readonly",!0)}}var no=(()=>{let r=class r extends U{constructor(t,e,i,s,l){super(t,i,s),this.mainService=t,this.formBuilder=e,this.notifier=i,this.translate=s,this.dialog=l,this.gv=y.variables,this.misYear=y.misYear,this.toppings=new qe(""),this.formGroup=qi.createMainForm(this.formBuilder),this.getResourcePermissions(C.AccVchHdrClose)}ngOnInit(){}action(t){console.log(t),this.actionAbs(t,this.formGroup,this.child),console.log(this.child.rowData)}create(){let t=k.checkVchDate(this.formGroup.controls.vchDate.value);if(t!=null){this.notifier.showError(this.translate.instant(t));return}this.mainService.create(this.getFormValues()).subscribe(e=>{this.child.rowData.push(e),this.child.agGrid.applyTransaction({add:[e]}),this.reset(),this.notifier.showSuccess(this.translate.instant("dialog.operationIsDone"))})}update(){}onSelectionChanged(t){this.formGroup.patchValue(t)}getFormValues(){let t=this.formGroup.value;return t.year=Vt.getMisYear(),t.month=k.getMonthFromVchDate(t.vchDate),t.vchDate=k.toGregorianDate(t.vchDate),(t.dt4==null||t.dt4.accID==null)&&(t.dt4=null),(t.dt5==null||t.dt5.accID==null)&&(t.dt5=null),(t.dt6==null||t.dt6.accID==null)&&(t.dt6=null),t}openStopicDialog(){let t=this.dialog.open(vi,{panelClass:"custom-dialog-container",width:"600px",height:"400px",data:{name:"test",dialogData:!0,data:[]}}),e=t.componentInstance.outputGetFromGridToDialog.subscribe(i=>{console.log("returned value from dialog: "+i.id),this.formGroup.controls.stopic.controls.id.setValue(i.id),this.formGroup.controls.stopic.controls.accID.setValue(i.accID),this.formGroup.controls.stopic.controls.title.setValue(i.title),e.unsubscribe(),t.close()})}openDt4Dialog(){let t=this.dialog.open(oi,{panelClass:"custom-dialog-container",width:"600px",height:"400px",data:{name:"test",dialogData:!0,data:[]}}),e=t.componentInstance.outputGetFromGridToDialog.subscribe(i=>{console.log("returned value from dialog: "+i.id),this.formGroup.controls.dt4.controls.id.setValue(i.id),this.formGroup.controls.dt4.controls.accID.setValue(i.accID),this.formGroup.controls.dt4.controls.title.setValue(i.title),e.unsubscribe(),t.close()})}openDt5Dialog(){let t=this.dialog.open(oi,{panelClass:"custom-dialog-container",width:"600px",height:"400px",data:{name:"test",dialogData:!0,data:[]}}),e=t.componentInstance.outputGetFromGridToDialog.subscribe(i=>{console.log("returned value from dialog: "+i.id),this.formGroup.controls.dt5.controls.id.setValue(i.id),this.formGroup.controls.dt5.controls.accID.setValue(i.accID),this.formGroup.controls.dt5.controls.title.setValue(i.title),e.unsubscribe(),t.close()})}openDt6Dialog(){let t=this.dialog.open(oi,{panelClass:"custom-dialog-container",width:"600px",height:"400px",data:{name:"test",dialogData:!0,data:[]}}),e=t.componentInstance.outputGetFromGridToDialog.subscribe(i=>{console.log("returned value from dialog: "+i.id),this.formGroup.controls.dt6.controls.id.setValue(i.id),this.formGroup.controls.dt6.controls.accID.setValue(i.accID),this.formGroup.controls.dt6.controls.title.setValue(i.title),e.unsubscribe(),t.close()})}};r.\u0275fac=function(e){return new(e||r)(u(Qi),u(It),u(W),u(I),u(Jt))},r.\u0275cmp=S({type:r,selectors:[["app-accVchHdrClose"]],viewQuery:function(e,i){if(e&1&&wt(Cr,5),e&2){let s;At(s=Gt())&&(i.child=s.first)}},features:[D],decls:1,vars:1,consts:[[4,"ngIf"],[1,"action",3,"pageTitle","titleSideButtons"],["mat-flat-button","","color","accent","class","action",3,"disabled","click",4,"ngIf"],[1,"parent-card-container"],[1,"input-mat-card"],[3,"formGroup"],[1,"row-fields"],[1,"field-item"],["for","vchDate","translate",""],["appearance","outline"],["matInput","","id","vchDate","formControlName","vchDate",3,"placeholder","mask","dropSpecialCharacters"],["for","description","translate",""],["matInput","","id","description","formControlName","description"],["for","stopicAccID","translate",""],["appearance","outline","formGroupName","stopic",2,"width","212px"],["matInput","","formControlName","accID"],["matSuffix","","mat-icon-button","","aria-label","search",1,"small-icon-btn",3,"click"],["for","dt4AccID","translate",""],["appearance","outline","formGroupName","dt4",2,"width","212px"],["for","dt5AccID","translate",""],["appearance","outline","formGroupName","dt5",2,"width","212px"],["for","dt6AccID","translate",""],["appearance","outline","formGroupName","dt6",2,"width","212px"],["for","vchNum","translate",""],["matInput","","id","vchNum","formControlName","vchNum",3,"readonly"],["for","tvchNum","translate",""],["matInput","","id","tvchNum","formControlName","tvchNum",3,"readonly"],[1,"ag-grid-to-fill"],[3,"outputGetFromGrid"],["mat-flat-button","","color","accent",1,"action",3,"click","disabled"],["translate",""]],template:function(e,i){e&1&&T(0,Lo,63,14,"div",0),e&2&&d("ngIf",i.permissionResource.R)},dependencies:[b,Ct,Le,P,Wt,Rt,xt,qt,Ut,Kt,We,K,Dt,q,Q,G,j,E,ni,x,F,Y,tt,L,$,V,bt,St,J,O,B,z,X,Z,et,it,rt,w,yt,ot,at,nt,ct,lt,st,gt,mt,dt,pt,ut,ft,A,ht,_t,Cr,Tt],encapsulation:2});let c=r;return c})();var co=(()=>{let r=class r extends oe{constructor(t){super(t),this.http=t,this.setBaseUrl(C.AccVchHdrConsideration)}getByYearAndStatus(t,e){return this.http.get(`${this.baseUrl}/getByYearAndStatus/${t}/${e}`)}updateAccVchStatus(t){return this.http.put(`${this.baseUrl}/updateAccVchStatus`,t)}};r.\u0275fac=function(e){return new(e||r)(Zt(ee))},r.\u0275prov=Xt({token:r,factory:r.\u0275fac,providedIn:"root"});let c=r;return c})();function Qo(c,r){if(c&1){let a=N();o(0,"button",11),f("click",function(){g(a);let e=h(2);return _(e.action("considerationHdr"))}),o(1,"span",5),m(2,"acc.account.accConsideration.considerationAcc"),n()()}}function qo(c,r){if(c&1){let a=N();o(0,"button",11),f("click",function(){g(a);let e=h(2);return _(e.action("tempHdr"))}),o(1,"span",5),m(2,"acc.account.accConsideration.tempAcc"),n()()}}function Wo(c,r){if(c&1){let a=N();o(0,"div")(1,"app-page-header",1),Mt(2,"translate"),T(3,Qo,3,0,"button",2)(4,qo,3,0,"button",2),o(5,"mat-radio-group",3),f("change",function(e){g(a);let i=h();return _(i.changeAccVchHdr(e))}),o(6,"mat-radio-button",4)(7,"span",5),m(8,"acc.account.accvchhdr.saveStatusTempTitle"),n()(),o(9,"mat-radio-button",6)(10,"span",5),m(11,"acc.account.accvchhdr.saveStatusConsideredTitle"),n()()()(),o(12,"div",7)(13,"mat-card",8),M(14,"mat-card-content"),n(),o(15,"div",9)(16,"app-accVchHdr-grid",10),f("outputGetFromGrid",function(e){g(a);let i=h();return _(i.onSelectionHdrChanged(e))}),n()(),o(17,"div",9),M(18,"app-accvchitm-grid"),n()()()}if(c&2){let a=h();p(),d("pageTitle",v(vt(2,6,"menuTitle.AccVchHdrConsideration"))),p(2),d("ngIf",a.permissionResource.W),p(),d("ngIf",a.permissionResource.W),p(),d("value","1"),p(11),d("accVchFilterParams",a.accVchFilterParams)}}var lo=(()=>{let r=class r extends U{constructor(t,e,i,s,l){super(t,i,s),this.mainService=t,this.accVchHdrItmService=e,this.notifier=i,this.translate=s,this.dialog=l,this.gv=y.variables,this.selectedHdrId=0,this.accVchFilterParams=this.getParamsForGenericQuery(),this.getResourcePermissions(C.AccVchHdrConsideration)}ngOnInit(){}getParamsForGenericQuery(){let t=new ti;return t.setFilterValue("status",1,zt.EQUAL),t.setFilterValue("year",Vt.getMisYear(),zt.EQUAL),t}action(t){console.log(t),this.selectedHdrId!=0&&(t=="considerationHdr"?this.updateAccVchStatus(this.selectedHdrId,2):t=="tempHdr"&&this.updateAccVchStatus(this.selectedHdrId,1))}onSelectionHdrChanged(t){if(t)this.selectedHdrId=t.id;else{this.selectedHdrId=0;return}this.accVchHdrItmService.getHdrItmById(this.selectedHdrId).subscribe(e=>{this.childItm.rowData=e.accVchItm,this.childItm.updatePinnedBottomRow()})}changeAccVchHdr(t){let e=t.value;this.loadDataByYearAndStatus(Vt.getMisYear(),e)}loadDataByYearAndStatus(t,e){this.childItm.rowData=[],this.mainService.getByYearAndStatus(t,e).subscribe(i=>{this.childHdr.setDataFromOutside(i)})}updateAccVchStatus(t,e){this.mainService.updateAccVchStatus({id:t,status:e}).subscribe(i=>{this.updateHdr()})}updateHdr(){let t=this.childHdr.rowData.findIndex(e=>e.id===this.selectedHdrId);if(t!=-1){this.childHdr.rowData.splice(t,1);let e=this.childHdr.agGrid.getSelectedRows();this.childHdr.agGrid.applyTransaction({remove:e})}this.childItm.rowData=[],this.notifier.showSuccess(this.translate.instant("dialog.operationIsDone"))}};r.\u0275fac=function(e){return new(e||r)(u(co),u(Je),u(W),u(I),u(Jt))},r.\u0275cmp=S({type:r,selectors:[["app-accVchHdrConsideration"]],viewQuery:function(e,i){if(e&1&&(wt(ei,5),wt(mi,5)),e&2){let s;At(s=Gt())&&(i.childHdr=s.first),At(s=Gt())&&(i.childItm=s.first)}},features:[D],decls:1,vars:1,consts:[[4,"ngIf"],[1,"action",3,"pageTitle"],["mat-stroked-button","","class","action",3,"click",4,"ngIf"],["aria-label","Select an option",3,"change","value"],["value","1"],["translate",""],["value","2"],[1,"parent-card-container"],["hidden",""],[1,"ag-grid-to-fill"],[3,"outputGetFromGrid","accVchFilterParams"],["mat-stroked-button","",1,"action",3,"click"]],template:function(e,i){e&1&&T(0,Wo,19,8,"div",0),e&2&&d("ngIf",i.permissionResource.R)},dependencies:[b,Ct,P,K,Dt,q,Q,G,j,x,Y,tt,Ii,xi,L,$,V,bt,J,O,B,z,X,Z,et,it,rt,w,ot,at,nt,ct,lt,st,gt,mt,dt,pt,ut,ft,A,ht,_t,mi,ei,Tt],encapsulation:2});let c=r;return c})();var br=class br{static createMainForm(r){return r.group({id:[null],vchDate:[null,[H.required,H.pattern(this.gv.datePattern)]]})}};br.gv=y.variables;var Wi=br;var so=(()=>{let r=class r extends oe{constructor(t){super(t),this.http=t,this.setBaseUrl(C.AccVchHdrEndOFYear)}saveEndOfYearVch(t){return this.http.post(`${this.baseUrl}/saveEndOfYearVch`,t)}getAccVchHdrEndOfYear(t){return this.http.get(`${this.baseUrl}/getAccVchHdrEndOfYear/${t}`)}};r.\u0275fac=function(e){return new(e||r)(Zt(ee))},r.\u0275prov=Xt({token:r,factory:r.\u0275fac,providedIn:"root"});let c=r;return c})();function Ko(c,r){if(c&1){let a=N();o(0,"button",11),f("click",function(){g(a);let e=h(2);return _(e.action("save"))}),o(1,"span",12),m(2,"crud.btn.save"),n()()}if(c&2){let a=h(2);d("disabled",a.formGroup.invalid)}}function $o(c,r){if(c&1){let a=N();o(0,"button",13),f("click",function(){g(a);let e=h(2);return _(e.action("delete"))}),o(1,"span",12),m(2,"crud.btn.delete"),n()()}if(c&2){let a=h(2);d("disabled",a.formGroup.invalid)}}function Jo(c,r){if(c&1&&(o(0,"mat-card",5)(1,"mat-card-header")(2,"mat-card-title")(3,"span",12),m(4,"dialog.endOfYearVchAlreadyCreated"),n()()(),o(5,"mat-card-content"),M(6,"br"),o(7,"div",14)(8,"div",15)(9,"label",16),m(10,"acc.account.accvchhdr.vchNum"),n(),o(11,"mat-form-field",8),M(12,"input",17),n()(),o(13,"div",15)(14,"label",18),m(15,"acc.account.accvchhdr.tvchNum"),n(),o(16,"mat-form-field",8),M(17,"input",19),n()()()()()),c&2){let a=h(2);p(12),d("value",a.vchNum),p(5),d("value",a.tvchNum)}}function zo(c,r){if(c&1&&(o(0,"div")(1,"app-page-header",1),Mt(2,"translate"),T(3,Ko,3,1,"button",2)(4,$o,3,1,"button",3),n(),o(5,"div",4)(6,"mat-card",5)(7,"mat-card-content")(8,"form",6)(9,"label",7),m(10,"acc.account.accvchhdr.vchDate"),n(),o(11,"mat-form-field",8),M(12,"input",9),n()()()(),T(13,Jo,18,2,"mat-card",10),n()()),c&2){let a=h();p(),d("pageTitle",v(vt(2,11,"menuTitle.AccVchHdrEndOFYear"))),p(2),d("ngIf",a.permissionResource.W),p(),d("ngIf",a.permissionResource.D),p(4),d("formGroup",a.formGroup),p(4),d("placeholder",v(a.gv.dateFormatPlaceHolder))("mask",v(a.gv.dateFormat))("dropSpecialCharacters",!1),p(),d("ngIf",a.isVchHdrCreated)}}var mo=(()=>{let r=class r extends U{constructor(t,e,i,s,l){super(t,i,s),this.mainService=t,this.formBuilder=e,this.notifier=i,this.translate=s,this.dialog=l,this.gv=y.variables,this.vchNum=null,this.tvchNum=null,this.isVchHdrCreated=!1,this.toppings=new qe(""),this.formGroup=Wi.createMainForm(this.formBuilder),this.getResourcePermissions(C.AccVchHdrEndOFYear)}ngOnInit(){this.getEndYearVchHdr()}action(t){this.vchNum!=null||this.tvchNum!=null||this.create()}create(){let t=this.formGroup.controls.vchDate.value,e=k.checkVchDate(t);if(e!=null){this.notifier.showError(this.translate.instant(e));return}let i=new $e;i.vchDate=k.toGregorianDate(t),i.year=Vt.getMisYear(),i.month=k.getMonthFromVchDate(t),this.mainService.saveEndOfYearVch(i).subscribe(s=>{this.getEndYearVchHdr(),this.notifier.showSuccess(this.translate.instant("dialog.operationIsDone"))})}getEndYearVchHdr(){console.log("Fetching end of year voucher header..."),this.mainService.getAccVchHdrEndOfYear(Vt.getMisYear()).subscribe(t=>{t!=null&&(this.formGroup.controls.vchDate.setValue(t.vchDate),this.vchNum=t.vchNum,this.tvchNum=t.tvchNum,this.isVchHdrCreated=this.vchNum!=null&&this.tvchNum!=null)})}};r.\u0275fac=function(e){return new(e||r)(u(so),u(It),u(W),u(I),u(Jt))},r.\u0275cmp=S({type:r,selectors:[["app-accVchHdrEndOfYear"]],features:[D],decls:1,vars:1,consts:[[4,"ngIf"],[1,"action",3,"pageTitle"],["mat-flat-button","","color","accent","class","action",3,"disabled","click",4,"ngIf"],["mat-stroked-button","","color","warn","class","action",3,"disabled","click",4,"ngIf"],[1,"parent-card-container"],[1,"input-mat-card"],[3,"formGroup"],["for","vchDate","translate",""],["appearance","outline"],["matInput","","id","vchDate","formControlName","vchDate",3,"placeholder","mask","dropSpecialCharacters"],["class","input-mat-card",4,"ngIf"],["mat-flat-button","","color","accent",1,"action",3,"click","disabled"],["translate",""],["mat-stroked-button","","color","warn",1,"action",3,"click","disabled"],[1,"row-fields"],[1,"field-item"],["for","vchNum","translate",""],["matInput","","id","vchNum","readonly","",3,"value"],["for","tvchNum","translate",""],["matInput","","id","tvchNum","readonly","",3,"value"]],template:function(e,i){e&1&&T(0,zo,14,13,"div",0),e&2&&d("ngIf",i.permissionResource.R)},dependencies:[b,Ct,Le,P,Wt,Rt,xt,qt,Ut,Kt,K,Dt,q,Q,G,j,E,x,F,Y,tt,L,$,V,bt,J,O,B,z,li,ci,X,Z,et,it,rt,w,ot,at,nt,ct,lt,st,gt,mt,dt,pt,ut,ft,A,ht,_t,Tt],encapsulation:2});let c=r;return c})();var po=(()=>{let r=class r extends oe{constructor(t){super(t),this.http=t,this.setBaseUrl(C.AccVchHdrPermanent)}setPermHdr(t,e){return this.http.put(`${this.baseUrl}/permHdr/${t}`,e)}};r.\u0275fac=function(e){return new(e||r)(Zt(ee))},r.\u0275prov=Xt({token:r,factory:r.\u0275fac,providedIn:"root"});let c=r;return c})();function Zo(c,r){if(c&1){let a=N();o(0,"button",7),f("click",function(){g(a);let e=h(2);return _(e.action("permHdr"))}),o(1,"span",8),m(2,"acc.account.accConsideration.permHdr"),n()()}}function ta(c,r){if(c&1){let a=N();o(0,"div")(1,"app-page-header",1),Mt(2,"translate"),T(3,Zo,3,0,"button",2),n(),o(4,"div",3)(5,"mat-card",4),M(6,"mat-card-content"),n(),o(7,"div",5)(8,"app-accVchHdr-grid",6),f("outputGetFromGrid",function(e){g(a);let i=h();return _(i.onSelectionHdrChanged(e))}),n()()()()}if(c&2){let a=h();p(),d("pageTitle",v(vt(2,4,"menuTitle.AccVchHdrPermanent"))),p(2),d("ngIf",a.permissionResource.W),p(5),d("accVchFilterParams",a.accVchFilterParams)}}var uo=(()=>{let r=class r extends U{constructor(t,e,i,s){super(t,e,i),this.mainService=t,this.notifier=e,this.translate=i,this.dialog=s,this.gv=y.variables,this.permanentStatusTitle=k.getStatusTitle(3,this.translate),this.selectedHdrId=0,this.accVchFilterParams=this.getParamsForGenericQuery(),this.getResourcePermissions(C.AccVchHdrPermanent)}ngOnInit(){}getParamsForGenericQuery(){let t=new ti;return t.setFilterValue("status",[2,3],zt.IN),t.setFilterValue("year",Vt.getMisYear(),zt.EQUAL),t}action(t){console.log(t),this.selectedHdrId!=0&&t=="permHdr"&&this.permHdr()}permHdr(){if(this.selectedHdrId==0)return;let t=this.childHdr.rowData.findIndex(e=>e.id===this.selectedHdrId);if(t!==-1){if(this.childHdr.rowData[t].status==3){this.notifier.showError(this.translate.instant("dialog.alreadyPermanent"));return}this.mainService.setPermHdr(this.selectedHdrId,[]).subscribe(()=>{this.childHdr.agGrid.redrawRows(),this.childHdr.rowData[t].status=3,this.childHdr.rowData[t].statusTitle=this.permanentStatusTitle,this.childHdr.agGrid.redrawRows(),this.notifier.showSuccess(this.translate.instant("dialog.operationIsDone"))})}}onSelectionHdrChanged(t){if(t)this.selectedHdrId=t.id;else{this.selectedHdrId=0;return}console.log("returned value from onSelectionHdrChanged: ")}};r.\u0275fac=function(e){return new(e||r)(u(po),u(W),u(I),u(Jt))},r.\u0275cmp=S({type:r,selectors:[["app-accVchHdrPermanent"]],viewQuery:function(e,i){if(e&1&&wt(ei,5),e&2){let s;At(s=Gt())&&(i.childHdr=s.first)}},features:[D],decls:1,vars:1,consts:[[4,"ngIf"],[1,"action",3,"pageTitle"],["mat-flat-button","","color","accent","class","action",3,"click",4,"ngIf"],[1,"parent-card-container"],["hidden",""],[1,"ag-grid-to-fill"],[3,"outputGetFromGrid","accVchFilterParams"],["mat-flat-button","","color","accent",1,"action",3,"click"],["translate",""]],template:function(e,i){e&1&&T(0,ta,9,6,"div",0),e&2&&d("ngIf",i.permissionResource.R)},dependencies:[b,Ct,P,K,Dt,q,Q,G,j,x,Y,tt,L,$,V,bt,J,O,B,z,X,Z,et,it,rt,w,ot,at,nt,ct,lt,st,gt,mt,dt,pt,ut,ft,A,ht,_t,ei,Tt],encapsulation:2});let c=r;return c})();var yr=class yr{};yr.columnDefs=[{field:"id",hide:!0,checkboxSelection:!0},{field:"title",headerName:"acc.account.dtopictype.title"},{field:"type",headerName:"acc.account.dtopictype.type"}];var Ui=yr;var ii=(()=>{let r=class r extends oe{constructor(t){super(t),this.http=t,this.setBaseUrl(C.DtopicType)}};r.\u0275fac=function(e){return new(e||r)(Zt(ee))},r.\u0275prov=Xt({token:r,factory:r.\u0275fac,providedIn:"root"});let c=r;return c})();var Tr=(()=>{let r=class r extends re{constructor(t,e,i){super(),this.service=t,this.translate=e,this.injector=i,this.dialogData=this.injector.get(Pt,null),this.columnDefs=this.translateHeaders(Ui.columnDefs,this.translate)}serverData(){this.dialogData&&this.dialogData.fromDialog&&this.dialogData.fromDialog==!0?this.service.getAll().subscribe(t=>{this.rowData=t}):this.service.getAll().subscribe(t=>{this.rowData=t})}};r.\u0275fac=function(e){return new(e||r)(u(ii),u(I),u(Ht))},r.\u0275cmp=S({type:r,selectors:[["app-dtopic-type-grid"]],features:[D],decls:8,vars:12,consts:[["dir","rtl",1,"generic-ag-grid-container"],[2,"width","100%","display","flex","gap","8px"],["appearance","outline",2,"flex","1 1 auto","margin-bottom","0px"],["matInput","","type","text","id","filter-text-box",2,"flex","0 0 90%","height","29px","margin-bottom","5px",3,"input","placeholder"],["mat-icon-button","",2,"flex","0 0 calc(1%-8px)",3,"click","matTooltip"],[1,"ag-theme-alpine",2,"height","100%",3,"cellValueChanged","cellEditingStarted","cellClicked","gridReady","selectionChanged","rowDoubleClicked","cellKeyPress","ngClass","rowHeight","headerHeight","floatingFiltersHeight","columnDefs","defaultColDef","gridOptions","rowData"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),f("input",function(l){return i.onFilterTextBoxChanged(l)}),n()(),o(4,"button",4),f("click",function(){return i.gridExport()}),o(5,"mat-icon"),m(6,"file_download"),n()()(),o(7,"ag-grid-angular",5),f("cellValueChanged",function(l){return i.onCellValueChanged(l)})("cellEditingStarted",function(l){return i.onCellEditingStarted(l)})("cellClicked",function(l){return i.onCellClicked(l)})("gridReady",function(l){return i.onGridReady(l)})("selectionChanged",function(l){return i.onSelectionRowChanged(l)})("rowDoubleClicked",function(l){return i.onRowDoubleClicked(l)})("cellKeyPress",function(l){return i.onCellKeyPress(l)}),n()()),e&2&&(p(3),d("placeholder",v(i.filterPlaceholderText)),p(),d("matTooltip",v(i.exportBtnText)),p(3),d("ngClass",i.activeTheme)("rowHeight",i.rowHeight)("headerHeight",i.headerHeight)("floatingFiltersHeight",i.floatingFiltersHeight)("columnDefs",i.columnDefs)("defaultColDef",i.defaultColDef)("gridOptions",i.gridOptions)("rowData",i.rowData))},dependencies:[b,te,G,ie,x,F,E,Qt,V,St,w,yt,A,$t],encapsulation:2});let c=r;return c})();var Dr=class Dr{static createMainForm(r){return r.group({id:[null],title:[null,[H.required]],type:[null,[H.required]]})}};Dr.gv=y.variables;var $i=Dr;function ea(c,r){if(c&1){let a=N();o(0,"button",16),f("click",function(){g(a);let e=h(2);return _(e.action("save"))}),o(1,"span",17),m(2,"crud.btn.save"),n()()}if(c&2){let a=h(2);d("disabled",a.formGroup.invalid)}}function ia(c,r){if(c&1){let a=N();o(0,"button",18),f("click",function(){g(a);let e=h(2);return _(e.action("delete"))}),o(1,"span",17),m(2,"crud.btn.delete"),n()()}if(c&2){let a=h(2);d("disabled",a.formGroup.invalid)}}function ra(c,r){if(c&1){let a=N();o(0,"div")(1,"app-page-header",1),Mt(2,"translate"),T(3,ea,3,1,"button",2)(4,ia,3,1,"button",3),n(),o(5,"div",4)(6,"mat-card",5)(7,"mat-card-content")(8,"form",6)(9,"div",7)(10,"div",8)(11,"label",9),m(12,"acc.account.dtopictype.title"),n(),o(13,"mat-form-field",10),M(14,"input",11),n()(),o(15,"div",8)(16,"label",12),m(17,"acc.account.dtopictype.type"),n(),o(18,"mat-form-field",10),M(19,"input",13),n()()()()()(),o(20,"div",14)(21,"app-dtopic-type-grid",15),f("outputGetFromGrid",function(e){g(a);let i=h();return _(i.onSelectionChanged(e))}),n()()()()}if(c&2){let a=h();p(),d("pageTitle",v(vt(2,6,"menuTitle.DtopicType")))("titleSideButtons",a.titleSideButtons),p(2),d("ngIf",a.permissionResource.W),p(),d("ngIf",a.permissionResource.D),p(4),d("formGroup",a.formGroup)}}var fo=(()=>{let r=class r extends U{constructor(t,e,i,s){super(t,i,s),this.mainService=t,this.formBuilder=e,this.notifier=i,this.translate=s,this.gv=y.variables,this.formGroup=$i.createMainForm(this.formBuilder),this.getResourcePermissions(C.DtopicType)}ngOnInit(){}action(t){console.log(t),this.actionAbs(t,this.formGroup,this.child)}onSelectionChanged(t){this.formGroup.patchValue(t)}};r.\u0275fac=function(e){return new(e||r)(u(ii),u(It),u(W),u(I))},r.\u0275cmp=S({type:r,selectors:[["app-dtopic-type"]],viewQuery:function(e,i){if(e&1&&wt(Tr,5),e&2){let s;At(s=Gt())&&(i.child=s.first)}},features:[D],decls:1,vars:1,consts:[[4,"ngIf"],[1,"action",3,"titleSideButtons","pageTitle"],["mat-flat-button","","color","accent","class","action",3,"disabled","click",4,"ngIf"],["mat-stroked-button","","color","warn","class","action",3,"disabled","click",4,"ngIf"],[1,"parent-card-container"],[1,"input-mat-card"],[3,"formGroup"],[1,"row-fields"],[1,"field-item"],["for","title","translate",""],["appearance","outline"],["matInput","","id","title","formControlName","title"],["for","type","translate",""],["matInput","","id","type","formControlName","type"],[1,"ag-grid-to-fill"],[3,"outputGetFromGrid"],["mat-flat-button","","color","accent",1,"action",3,"click","disabled"],["translate",""],["mat-stroked-button","","color","warn",1,"action",3,"click","disabled"]],template:function(e,i){e&1&&T(0,ra,22,8,"div",0),e&2&&d("ngIf",i.permissionResource.R)},dependencies:[b,Ct,P,Wt,Rt,xt,qt,Ut,Kt,K,Dt,q,Q,G,j,E,x,F,Y,tt,L,$,V,bt,J,O,B,z,X,Z,et,it,rt,w,ot,at,nt,ct,lt,st,gt,mt,dt,pt,ut,ft,A,ht,_t,Tr,Tt],encapsulation:2});let c=r;return c})();var xr=class xr{static createMainForm(r){return r.group({id:[null],accID:[null,[H.required]],title:[null,[H.required]],typeId:[null,[H.required]],typeName:[null],definition:[null],active:[null]})}};xr.gv=y.variables;var Ji=xr;function oa(c,r){if(c&1){let a=N();o(0,"button",23),f("click",function(){g(a);let e=h(2);return _(e.action("save"))}),o(1,"span",24),m(2,"crud.btn.save"),n()()}if(c&2){let a=h(2);d("disabled",a.formGroup.invalid)}}function aa(c,r){if(c&1){let a=N();o(0,"button",25),f("click",function(){g(a);let e=h(2);return _(e.action("delete"))}),o(1,"span",24),m(2,"crud.btn.delete"),n()()}if(c&2){let a=h(2);d("disabled",a.formGroup.invalid)}}function na(c,r){if(c&1&&(o(0,"mat-option",26),m(1),n()),c&2){let a=r.$implicit;d("value",a.id),p(),Yt(" ",a.title," ")}}function ca(c,r){if(c&1){let a=N();o(0,"div")(1,"app-page-header",1),Mt(2,"translate"),T(3,oa,3,1,"button",2)(4,aa,3,1,"button",3),n(),o(5,"div",4)(6,"mat-card",5)(7,"mat-card-content")(8,"form",6)(9,"div",7)(10,"div",8)(11,"label",9),m(12,"acc.account.dtopic.accid"),n(),o(13,"mat-form-field",10),M(14,"input",11),n()(),o(15,"div",8)(16,"label",12),m(17,"acc.account.dtopic.title"),n(),o(18,"mat-form-field",10),M(19,"input",13),n()(),o(20,"div",8)(21,"label",14),m(22,"acc.account.dtopic.type"),n(),o(23,"mat-form-field",10)(24,"mat-select",15),T(25,na,2,2,"mat-option",16),n()()(),o(26,"div",8)(27,"label",17),m(28,"acc.account.dtopic.definition"),n(),o(29,"mat-form-field",10),M(30,"input",18),n()(),o(31,"div",8)(32,"mat-checkbox",19)(33,"span",20),m(34,"generic.generic.active \xA0"),n()()()()()()(),o(35,"div",21)(36,"app-dtopic-grid",22),f("outputGetFromGrid",function(e){g(a);let i=h();return _(i.onSelectionChanged(e))}),n()()()()}if(c&2){let a=h();p(),d("pageTitle",v(vt(2,7,"menuTitle.Dtopic")))("titleSideButtons",a.titleSideButtons),p(2),d("ngIf",a.permissionResource.W),p(),d("ngIf",a.permissionResource.D),p(4),d("formGroup",a.formGroup),p(17),d("ngForOf",a.types)}}var ho=(()=>{let r=class r extends U{constructor(t,e,i,s,l){super(t,s,l),this.mainService=t,this.dtopicTypeService=e,this.formBuilder=i,this.notifier=s,this.translate=l,this.gv=y.variables,this.formGroup=Ji.createMainForm(this.formBuilder),this.getResourcePermissions(C.Dtopic),this.dtopicTypeService.getAll().subscribe(ae=>{this.types=ae})}ngOnInit(){}action(t){console.log(t),this.actionAbs(t,this.formGroup,this.child)}onSelectionChanged(t){this.formGroup.patchValue(t)}};r.\u0275fac=function(e){return new(e||r)(u(wi),u(ii),u(It),u(W),u(I))},r.\u0275cmp=S({type:r,selectors:[["app-dtopic"]],viewQuery:function(e,i){if(e&1&&wt(oi,5),e&2){let s;At(s=Gt())&&(i.child=s.first)}},features:[D],decls:1,vars:1,consts:[[4,"ngIf"],[1,"action",3,"titleSideButtons","pageTitle"],["mat-flat-button","","color","accent","class","action",3,"disabled","click",4,"ngIf"],["mat-stroked-button","","color","warn","class","action",3,"disabled","click",4,"ngIf"],[1,"parent-card-container"],[1,"input-mat-card"],[3,"formGroup"],[1,"row-fields"],[1,"field-item"],["for","dtopicAccID","translate",""],["appearance","outline"],["matInput","","id","dtopicAccID","formControlName","accID"],["for","title","translate",""],["matInput","","id","title","formControlName","title"],["for","typeId","translate",""],["id","typeId","formControlName","typeId"],[3,"value",4,"ngFor","ngForOf"],["for","definition","translate",""],["matInput","","id","definition","formControlName","definition"],["formControlName","active"],["matPrefix","","translate",""],[1,"ag-grid-to-fill"],[3,"outputGetFromGrid"],["mat-flat-button","","color","accent",1,"action",3,"click","disabled"],["translate",""],["mat-stroked-button","","color","warn",1,"action",3,"click","disabled"],[3,"value"]],template:function(e,i){e&1&&T(0,ca,37,9,"div",0),e&2&&d("ngIf",i.permissionResource.R)},dependencies:[b,He,Ct,P,Wt,Rt,xt,qt,Ut,Kt,K,Dt,q,Q,G,j,E,Pe,x,F,Y,Be,Re,tt,L,$,V,bt,J,O,B,z,X,si,Z,et,it,rt,w,ot,at,nt,ct,lt,st,gt,mt,dt,pt,ut,ft,A,ht,_t,oi,Tt],encapsulation:2});let c=r;return c})();var Ir=class Ir{static createMainForm(r){return r.group({id:[null],accID:[null,[H.required]],title:[null,[H.required]],typeId:[null,[H.required]],typeName:[null],definition:[null]})}};Ir.gv=y.variables;var zi=Ir;var Vr=class Vr{};Vr.columnDefs=[{field:"id",hide:!0,checkboxSelection:!0},{field:"accID",headerName:"acc.account.gtopic.accid"},{field:"title",headerName:"acc.account.gtopic.title"},{field:"typeId",hide:!0,headerName:"acc.account.type"},{field:"typeName",headerName:"acc.account.gtopic.type"},{field:"definition",headerName:"acc.account.gtopic.definition"}];var Xi=Vr;var fi=(()=>{let r=class r extends oe{constructor(t){super(t),this.http=t,this.setBaseUrl(C.Gtopic)}};r.\u0275fac=function(e){return new(e||r)(Zt(ee))},r.\u0275prov=Xt({token:r,factory:r.\u0275fac,providedIn:"root"});let c=r;return c})();var Ci=(()=>{let r=class r extends re{constructor(t,e,i){super(),this.service=t,this.translate=e,this.injector=i,this.dialogData=this.injector.get(Pt,null),this.columnDefs=this.translateHeaders(Xi.columnDefs,this.translate)}serverData(){this.dialogData&&this.dialogData.fromDialog&&this.dialogData.fromDialog==!0?this.service.getAll().subscribe(t=>{this.rowData=t}):this.service.getAll().subscribe(t=>{this.rowData=t})}};r.\u0275fac=function(e){return new(e||r)(u(fi),u(I),u(Ht))},r.\u0275cmp=S({type:r,selectors:[["app-gtopic-grid"]],features:[D],decls:8,vars:12,consts:[["dir","rtl",1,"generic-ag-grid-container"],[2,"width","100%","display","flex","gap","8px"],["appearance","outline",2,"flex","1 1 auto","margin-bottom","0px"],["matInput","","type","text","id","filter-text-box",2,"flex","0 0 90%","height","29px","margin-bottom","5px",3,"input","placeholder"],["mat-icon-button","",2,"flex","0 0 calc(1%-8px)",3,"click","matTooltip"],[1,"ag-theme-alpine",2,"height","100%",3,"cellValueChanged","cellEditingStarted","cellClicked","gridReady","selectionChanged","rowDoubleClicked","cellKeyPress","ngClass","rowHeight","headerHeight","floatingFiltersHeight","columnDefs","defaultColDef","gridOptions","rowData"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),f("input",function(l){return i.onFilterTextBoxChanged(l)}),n()(),o(4,"button",4),f("click",function(){return i.gridExport()}),o(5,"mat-icon"),m(6,"file_download"),n()()(),o(7,"ag-grid-angular",5),f("cellValueChanged",function(l){return i.onCellValueChanged(l)})("cellEditingStarted",function(l){return i.onCellEditingStarted(l)})("cellClicked",function(l){return i.onCellClicked(l)})("gridReady",function(l){return i.onGridReady(l)})("selectionChanged",function(l){return i.onSelectionRowChanged(l)})("rowDoubleClicked",function(l){return i.onRowDoubleClicked(l)})("cellKeyPress",function(l){return i.onCellKeyPress(l)}),n()()),e&2&&(p(3),d("placeholder",v(i.filterPlaceholderText)),p(),d("matTooltip",v(i.exportBtnText)),p(3),d("ngClass",i.activeTheme)("rowHeight",i.rowHeight)("headerHeight",i.headerHeight)("floatingFiltersHeight",i.floatingFiltersHeight)("columnDefs",i.columnDefs)("defaultColDef",i.defaultColDef)("gridOptions",i.gridOptions)("rowData",i.rowData))},dependencies:[b,te,G,ie,x,F,E,Qt,V,St,w,yt,A,$t],encapsulation:2});let c=r;return c})();var hi=(()=>{let r=class r extends oe{constructor(t){super(t),this.http=t,this.setBaseUrl(Jr.MisTypes)}getByType(t){return this.http.get(`${this.baseUrl}/getbytype/${t}`)}};r.\u0275fac=function(e){return new(e||r)(Zt(ee))},r.\u0275prov=Xt({token:r,factory:r.\u0275fac,providedIn:"root"});let c=r;return c})();function la(c,r){if(c&1){let a=N();o(0,"button",21),f("click",function(){g(a);let e=h(2);return _(e.action("save"))}),o(1,"span",22),m(2,"crud.btn.save"),n()()}if(c&2){let a=h(2);d("disabled",a.formGroup.invalid)}}function sa(c,r){if(c&1){let a=N();o(0,"button",23),f("click",function(){g(a);let e=h(2);return _(e.action("delete"))}),o(1,"span",22),m(2,"crud.btn.delete"),n()()}if(c&2){let a=h(2);d("disabled",a.formGroup.invalid)}}function ma(c,r){if(c&1&&(o(0,"mat-option",24),m(1),n()),c&2){let a=r.$implicit;d("value",a.id),p(),Yt(" ",a.name," ")}}function da(c,r){if(c&1){let a=N();o(0,"div")(1,"app-page-header",1),Mt(2,"translate"),T(3,la,3,1,"button",2)(4,sa,3,1,"button",3),n(),o(5,"div",4)(6,"mat-card",5)(7,"mat-card-content")(8,"form",6)(9,"div",7)(10,"div",8)(11,"label",9),m(12,"acc.account.gtopic.accid"),n(),o(13,"mat-form-field",10),M(14,"input",11),n()(),o(15,"div",8)(16,"label",12),m(17,"acc.account.gtopic.title"),n(),o(18,"mat-form-field",10),M(19,"input",13),n()(),o(20,"div",8)(21,"label",14),m(22,"acc.account.gtopic.type "),n(),o(23,"mat-form-field",10)(24,"mat-select",15),T(25,ma,2,2,"mat-option",16),n()()(),o(26,"div",8)(27,"label",17),m(28,"acc.account.gtopic.definition"),n(),o(29,"mat-form-field",10),M(30,"input",18),n()()()()()(),o(31,"div",19)(32,"app-gtopic-grid",20),f("outputGetFromGrid",function(e){g(a);let i=h();return _(i.onSelectionChanged(e))}),n()()()()}if(c&2){let a=h();p(),d("pageTitle",v(vt(2,7,"menuTitle.Gtopic")))("titleSideButtons",a.titleSideButtons),p(2),d("ngIf",a.permissionResource.W),p(),d("ngIf",a.permissionResource.D),p(4),d("formGroup",a.formGroup),p(17),d("ngForOf",a.types)}}var go=(()=>{let r=class r extends U{constructor(t,e,i,s,l){super(t,s,l),this.mainService=t,this.misTypesService=e,this.formBuilder=i,this.notifier=s,this.translate=l,this.gv=y.variables,this.formGroup=zi.createMainForm(this.formBuilder),this.getResourcePermissions(C.Gtopic),this.misTypesService.getByType(1).subscribe(ae=>{this.types=ae})}ngOnInit(){}action(t){console.log(t),this.actionAbs(t,this.formGroup,this.child)}onSelectionChanged(t){console.log("onSelectionChanged : "+t),this.formGroup.patchValue(t)}};r.\u0275fac=function(e){return new(e||r)(u(fi),u(hi),u(It),u(W),u(I))},r.\u0275cmp=S({type:r,selectors:[["app-gtopic"]],viewQuery:function(e,i){if(e&1&&wt(Ci,5),e&2){let s;At(s=Gt())&&(i.child=s.first)}},features:[D],decls:1,vars:1,consts:[[4,"ngIf"],[1,"action",3,"titleSideButtons","pageTitle"],["mat-flat-button","","color","accent","class","action",3,"disabled","click",4,"ngIf"],["mat-stroked-button","","color","warn","class","action",3,"disabled","click",4,"ngIf"],[1,"parent-card-container"],[1,"input-mat-card"],[3,"formGroup"],[1,"row-fields"],[1,"field-item"],["for","accID","translate",""],["appearance","outline"],["matInput","","id","accID","formControlName","accID"],["for","title","translate",""],["matInput","","id","title","formControlName","title"],["for","typeId","matPrefix","","translate",""],["formControlName","typeId"],[3,"value",4,"ngFor","ngForOf"],["for","definition","translate",""],["matInput","","id","definition","formControlName","definition"],[1,"ag-grid-to-fill"],[3,"outputGetFromGrid"],["mat-flat-button","","color","accent",1,"action",3,"click","disabled"],["translate",""],["mat-stroked-button","","color","warn",1,"action",3,"click","disabled"],[3,"value"]],template:function(e,i){e&1&&T(0,da,33,9,"div",0),e&2&&d("ngIf",i.permissionResource.R)},dependencies:[b,He,Ct,P,Wt,Rt,xt,qt,Ut,Kt,K,Dt,q,Q,G,j,E,Pe,x,F,Y,Be,Re,tt,L,$,V,bt,J,O,B,z,X,Z,et,it,rt,w,ot,at,nt,ct,lt,st,gt,mt,dt,pt,ut,ft,A,ht,_t,Ci,Tt],encapsulation:2});let c=r;return c})();var Gr=class Gr{static createMainForm(r){return r.group({id:[null],accID:[null,[H.required]],title:[null,[H.required]],gtopic:r.group({id:["",H.required],accID:[null,H.required],title:[null]}),typeId:[null,[H.required]],typeName:[null],definition:[null]})}};Gr.gv=y.variables;var Zi=Gr;var Nr=class Nr{};Nr.columnDefs=[{field:"id",hide:!0,checkboxSelection:!0},{field:"accID",headerName:"acc.account.ptopic.accid"},{field:"title",headerName:"acc.account.ptopic.title"},{field:"typeId",hide:!0,headerName:"acc.account.ptopic.type"},{field:"typeName",headerName:"acc.account.ptopic.type"},{field:"definition",headerName:"acc.account.ptopic.definition"},{field:"gtopic.id",hide:!0,headerName:"acc.account.gtopic"},{field:"gtopic.accID",headerName:"acc.account.gtopic.accid"},{field:"gtopic.title",headerName:"acc.account.gtopic.title"}];var tr=Nr;var gi=(()=>{let r=class r extends oe{constructor(t){super(t),this.http=t,this.setBaseUrl(C.Ptopic)}};r.\u0275fac=function(e){return new(e||r)(Zt(ee))},r.\u0275prov=Xt({token:r,factory:r.\u0275fac,providedIn:"root"});let c=r;return c})();var Si=(()=>{let r=class r extends re{constructor(t,e,i){super(),this.service=t,this.translate=e,this.injector=i,this.dialogData=this.injector.get(Pt,null),this.columnDefs=this.translateHeaders(tr.columnDefs,this.translate)}serverData(){this.dialogData&&this.dialogData.fromDialog&&this.dialogData.fromDialog==!0?this.service.getAll().subscribe(t=>{this.rowData=t}):this.service.getAll().subscribe(t=>{this.rowData=t})}};r.\u0275fac=function(e){return new(e||r)(u(gi),u(I),u(Ht))},r.\u0275cmp=S({type:r,selectors:[["app-ptopic-grid"]],features:[D],decls:8,vars:12,consts:[["dir","rtl",1,"generic-ag-grid-container"],[2,"width","100%","display","flex","gap","8px"],["appearance","outline",2,"flex","1 1 auto","margin-bottom","0px"],["matInput","","type","text","id","filter-text-box",2,"flex","0 0 90%","height","29px","margin-bottom","5px",3,"input","placeholder"],["mat-icon-button","",2,"flex","0 0 calc(1%-8px)",3,"click","matTooltip"],[1,"ag-theme-alpine",2,"height","100%",3,"cellValueChanged","cellEditingStarted","cellClicked","gridReady","selectionChanged","rowDoubleClicked","cellKeyPress","ngClass","rowHeight","headerHeight","floatingFiltersHeight","columnDefs","defaultColDef","gridOptions","rowData"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),f("input",function(l){return i.onFilterTextBoxChanged(l)}),n()(),o(4,"button",4),f("click",function(){return i.gridExport()}),o(5,"mat-icon"),m(6,"file_download"),n()()(),o(7,"ag-grid-angular",5),f("cellValueChanged",function(l){return i.onCellValueChanged(l)})("cellEditingStarted",function(l){return i.onCellEditingStarted(l)})("cellClicked",function(l){return i.onCellClicked(l)})("gridReady",function(l){return i.onGridReady(l)})("selectionChanged",function(l){return i.onSelectionRowChanged(l)})("rowDoubleClicked",function(l){return i.onRowDoubleClicked(l)})("cellKeyPress",function(l){return i.onCellKeyPress(l)}),n()()),e&2&&(p(3),d("placeholder",v(i.filterPlaceholderText)),p(),d("matTooltip",v(i.exportBtnText)),p(3),d("ngClass",i.activeTheme)("rowHeight",i.rowHeight)("headerHeight",i.headerHeight)("floatingFiltersHeight",i.floatingFiltersHeight)("columnDefs",i.columnDefs)("defaultColDef",i.defaultColDef)("gridOptions",i.gridOptions)("rowData",i.rowData))},dependencies:[b,te,G,ie,x,F,E,Qt,V,St,w,yt,A,$t],encapsulation:2});let c=r;return c})();function pa(c,r){if(c&1){let a=N();o(0,"button",26),f("click",function(){g(a);let e=h(2);return _(e.action("save"))}),o(1,"span",27),m(2,"crud.btn.save"),n()()}if(c&2){let a=h(2);d("disabled",a.formGroup.invalid)}}function ua(c,r){if(c&1){let a=N();o(0,"button",28),f("click",function(){g(a);let e=h(2);return _(e.action("delete"))}),o(1,"span",27),m(2,"crud.btn.delete"),n()()}if(c&2){let a=h(2);d("disabled",a.formGroup.invalid)}}function fa(c,r){if(c&1&&(o(0,"mat-option",29),m(1),n()),c&2){let a=r.$implicit;d("value",a.id),p(),Yt(" ",a.name," ")}}function ha(c,r){if(c&1){let a=N();o(0,"div")(1,"app-page-header",1),Mt(2,"translate"),T(3,pa,3,1,"button",2)(4,ua,3,1,"button",3),n(),o(5,"div",4)(6,"mat-card",5)(7,"mat-card-content")(8,"form",6)(9,"div",7)(10,"div",8)(11,"label",9),m(12,"acc.account.gtopic.accid"),n(),o(13,"mat-form-field",10),M(14,"input",11),o(15,"span",12)(16,"button",13),f("click",function(){g(a);let e=h();return _(e.openGtopicDialog())}),o(17,"mat-icon"),m(18,"search"),n()()()()(),o(19,"div",8)(20,"label",14),m(21,"acc.account.ptopic.accid"),n(),o(22,"mat-form-field",15),M(23,"input",16),n()(),o(24,"div",8)(25,"label",17),m(26,"acc.account.ptopic.title"),n(),o(27,"mat-form-field",15),M(28,"input",18),n()(),o(29,"div",8)(30,"label",19),m(31,"acc.account.ptopic.type"),n(),o(32,"mat-form-field",15)(33,"mat-select",20),T(34,fa,2,2,"mat-option",21),n()()(),o(35,"div",8)(36,"label",22),m(37,"acc.account.ptopic.definition"),n(),o(38,"mat-form-field",15),M(39,"input",23),n()()()()()(),o(40,"div",24)(41,"app-ptopic-grid",25),f("outputGetFromGrid",function(e){g(a);let i=h();return _(i.onSelectionChanged(e))}),n()()()()}if(c&2){let a=h();p(),d("pageTitle",v(vt(2,7,"menuTitle.Ptopic")))("titleSideButtons",a.titleSideButtons),p(2),d("ngIf",a.permissionResource.W),p(),d("ngIf",a.permissionResource.D),p(4),d("formGroup",a.formGroup),p(26),d("ngForOf",a.types)}}var _o=(()=>{let r=class r extends U{constructor(t,e,i,s,l,ae,je){super(t,l,ae),this.mainService=t,this.gtopicService=e,this.misTypesService=i,this.formBuilder=s,this.notifier=l,this.translate=ae,this.dialog=je,this.gv=y.variables,this.formGroup=Zi.createMainForm(this.formBuilder),this.getResourcePermissions(C.Ptopic),this.misTypesService.getByType(2).subscribe(ri=>{this.types=ri})}ngOnInit(){}action(t){console.log(t),this.actionAbs(t,this.formGroup,this.child)}onSelectionChanged(t){this.formGroup.patchValue(t)}openGtopicDialog(){let t=this.dialog.open(Ci,{panelClass:"custom-dialog-container",width:"600px",height:"400px",data:{name:"test",dialogData:!0,data:[]}}),e=t.componentInstance.outputGetFromGridToDialog.subscribe(i=>{console.log("returned value from dialog: "+i.id),this.formGroup.controls.gtopic.controls.id.setValue(i.id),this.formGroup.controls.gtopic.controls.accID.setValue(i.accID),this.formGroup.controls.gtopic.controls.title.setValue(i.title),e.unsubscribe(),t.close()})}};r.\u0275fac=function(e){return new(e||r)(u(gi),u(fi),u(hi),u(It),u(W),u(I),u(Jt))},r.\u0275cmp=S({type:r,selectors:[["app-ptopic"]],viewQuery:function(e,i){if(e&1&&wt(Si,5),e&2){let s;At(s=Gt())&&(i.child=s.first)}},features:[D],decls:1,vars:1,consts:[[4,"ngIf"],[1,"action",3,"titleSideButtons","pageTitle"],["mat-flat-button","","color","accent","class","action",3,"disabled","click",4,"ngIf"],["mat-stroked-button","","color","warn","class","action",3,"disabled","click",4,"ngIf"],[1,"parent-card-container"],[1,"input-mat-card"],[3,"formGroup"],[1,"row-fields"],[1,"field-item"],["for","gtopicAccID","translate",""],["appearance","outline","formGroupName","gtopic",2,"width","212px"],["matInput","","formControlName","accID"],["matSuffix",""],["mat-icon-button","",1,"small-icon-btn",3,"click"],["for","ptopicAccID","translate",""],["appearance","outline"],["matInput","","id","ptopicAccID","formControlName","accID"],["for","title","translate",""],["matInput","","id","title","formControlName","title"],["for","typeId","translate",""],["id","typeId","formControlName","typeId"],[3,"value",4,"ngFor","ngForOf"],["for","definition","translate",""],["matInput","","id","definition","formControlName","definition"],[1,"ag-grid-to-fill"],[3,"outputGetFromGrid"],["mat-flat-button","","color","accent",1,"action",3,"click","disabled"],["translate",""],["mat-stroked-button","","color","warn",1,"action",3,"click","disabled"],[3,"value"]],template:function(e,i){e&1&&T(0,ha,42,9,"div",0),e&2&&d("ngIf",i.permissionResource.R)},dependencies:[b,He,Ct,P,Wt,Rt,xt,qt,Ut,Kt,We,K,Dt,q,Q,G,j,E,ni,x,F,Y,Be,Re,tt,L,$,V,bt,St,J,O,B,z,X,Z,et,it,rt,w,yt,ot,at,nt,ct,lt,st,gt,mt,dt,pt,ut,ft,A,ht,_t,Si,Tt],encapsulation:2});let c=r;return c})();var Fr=class Fr{static createMainForm(r){return r.group({id:[null],accID:[null,[H.required]],title:[null,[H.required]],ptopic:r.group({id:["",H.required],accID:[null,H.required],title:[null]}),typeId:[null,[H.required]],typeName:[null],dt4:[null],dt5:[null],dt6:[null],definition:[null],active:[null],hasPersuit:[null],hasExchange:[null]})}};Fr.gv=y.variables;var er=Fr;function ga(c,r){if(c&1){let a=N();o(0,"button",36),f("click",function(){g(a);let e=h(2);return _(e.action("save"))}),o(1,"span",37),m(2,"crud.btn.save"),n()()}if(c&2){let a=h(2);d("disabled",a.formGroup.invalid)}}function _a(c,r){if(c&1){let a=N();o(0,"button",38),f("click",function(){g(a);let e=h(2);return _(e.action("delete"))}),o(1,"span",37),m(2,"crud.btn.delete"),n()()}if(c&2){let a=h(2);d("disabled",a.formGroup.invalid)}}function Ma(c,r){if(c&1&&(o(0,"mat-option",39),m(1),n()),c&2){let a=r.$implicit;d("value",a.id),p(),Yt(" ",a.name," ")}}function va(c,r){if(c&1&&(o(0,"mat-option",39),m(1),n()),c&2){let a=r.$implicit;d("value",a.id),p(),Yt(" ",a.title," ")}}function Ca(c,r){if(c&1&&(o(0,"mat-option",39),m(1),n()),c&2){let a=r.$implicit;d("value",a.id),p(),Yt(" ",a.title," ")}}function Sa(c,r){if(c&1&&(o(0,"mat-option",39),m(1),n()),c&2){let a=r.$implicit;d("value",a.id),p(),Yt(" ",a.title," ")}}function ba(c,r){if(c&1){let a=N();o(0,"div")(1,"app-page-header",1),Mt(2,"translate"),T(3,ga,3,1,"button",2)(4,_a,3,1,"button",3),n(),o(5,"div",4)(6,"mat-card",5)(7,"mat-card-content")(8,"form",6)(9,"div",7)(10,"div",8)(11,"label",9),m(12,"acc.account.ptopic.accid"),n(),o(13,"mat-form-field",10),M(14,"input",11),o(15,"span",12)(16,"button",13),f("click",function(){g(a);let e=h();return _(e.openPtopicDialog())}),o(17,"mat-icon"),m(18,"search"),n()()()()(),o(19,"div",8)(20,"label",14),m(21,"acc.account.stopic.accid"),n(),o(22,"mat-form-field",15),M(23,"input",16),n()(),o(24,"div",8)(25,"label",17),m(26,"acc.account.stopic.title"),n(),o(27,"mat-form-field",15),M(28,"input",18),n()(),o(29,"div",8)(30,"label",19),m(31,"acc.account.stopic.type"),n(),o(32,"mat-form-field",15)(33,"mat-select",20),T(34,Ma,2,2,"mat-option",21),n()()(),o(35,"div",8)(36,"label",22),m(37,"acc.account.stopic.definition"),n(),o(38,"mat-form-field",15),M(39,"input",23),n()(),o(40,"div",8)(41,"label",24),m(42,"acc.account.dt4"),n(),o(43,"mat-form-field",15)(44,"mat-select",25),T(45,va,2,2,"mat-option",21),n()()(),o(46,"div",8)(47,"label",26),m(48,"acc.account.dt5"),n(),o(49,"mat-form-field",15)(50,"mat-select",27),T(51,Ca,2,2,"mat-option",21),n()()(),o(52,"div",8)(53,"label",28),m(54,"acc.account.dt6"),n(),o(55,"mat-form-field",15)(56,"mat-select",29),T(57,Sa,2,2,"mat-option",21),n()()(),o(58,"div",8)(59,"mat-checkbox",30)(60,"span",31),m(61,"generic.generic.active \xA0"),n()()(),o(62,"div",8)(63,"mat-checkbox",32)(64,"span",31),m(65,"acc.account.stopic.hasPersuit \xA0"),n()()(),o(66,"div",8)(67,"mat-checkbox",33)(68,"span",31),m(69,"acc.account.stopic.hasExchange \xA0"),n()()()()()()(),o(70,"div",34)(71,"app-stopic-grid",35),f("outputGetFromGrid",function(e){g(a);let i=h();return _(i.onSelectionChanged(e))}),n()()()()}if(c&2){let a=h();p(),d("pageTitle",v(vt(2,10,"menuTitle.Stopic")))("titleSideButtons",a.titleSideButtons),p(2),d("ngIf",a.permissionResource.W),p(),d("ngIf",a.permissionResource.D),p(4),d("formGroup",a.formGroup),p(26),d("ngForOf",a.types),p(11),d("ngForOf",a.dtopicTypes),p(6),d("ngForOf",a.dtopicTypes),p(6),d("ngForOf",a.dtopicTypes)}}var Mo=(()=>{let r=class r extends U{constructor(t,e,i,s,l,ae,je,ri){super(t,ae,je),this.mainService=t,this.gtopicService=e,this.dtopicTypeService=i,this.misTypesService=s,this.formBuilder=l,this.notifier=ae,this.translate=je,this.dialog=ri,this.gv=y.variables,this.toppings=new qe(""),this.formGroup=er.createMainForm(this.formBuilder),this.getResourcePermissions(C.Stopic),this.misTypesService.getByType(3).subscribe(_i=>{this.types=_i}),this.dtopicTypeService.getAll().subscribe(_i=>{this.dtopicTypes=_i})}ngOnInit(){}action(t){console.log(t),this.actionAbs(t,this.formGroup,this.child),console.log(this.child.rowData)}create(){this.service.create(this.getFormValues()).subscribe(t=>{this.child.convertDtopicType(t),this.child.rowData.push(t),this.child.agGrid.applyTransaction({add:[t]}),this.reset(),this.notifier.showSuccess(this.translate.instant("dialog.operationIsDone"))})}update(){this.service.update(this.formId,this.getFormValues()).subscribe(t=>{let e=this.child.rowData.findIndex(s=>s.id===this.formId);if(e!=-1){this.child.convertDtopicType(t),this.child.rowData.splice(e,1,t);var i=this.child.agGrid.getRowNode(""+e);i?.setData(t),this.reset(),this.notifier.showSuccess(this.translate.instant("dialog.operationIsDone"))}})}onSelectionChanged(t){this.formGroup.patchValue(t)}getFormValues(){let t=this.formGroup.value;return t.dt4=t.dt4!==null?t.dt4.toString():null,t.dt5=t.dt5!==null?t.dt5.toString():null,t.dt6=t.dt6!==null?t.dt6.toString():null,t}openPtopicDialog(){let t=this.dialog.open(Si,{panelClass:"custom-dialog-container",width:"600px",height:"400px",data:{name:"test",dialogData:!0,data:[]}}),e=t.componentInstance.outputGetFromGridToDialog.subscribe(i=>{console.log("returned value from dialog: "+i.id),this.formGroup.controls.ptopic.controls.id.setValue(i.id),this.formGroup.controls.ptopic.controls.accID.setValue(i.accID),this.formGroup.controls.ptopic.controls.title.setValue(i.title),e.unsubscribe(),t.close()})}};r.\u0275fac=function(e){return new(e||r)(u(Vi),u(gi),u(ii),u(hi),u(It),u(W),u(I),u(Jt))},r.\u0275cmp=S({type:r,selectors:[["app-stopic"]],viewQuery:function(e,i){if(e&1&&wt(vi,5),e&2){let s;At(s=Gt())&&(i.child=s.first)}},features:[D],decls:1,vars:1,consts:[[4,"ngIf"],[1,"action",3,"titleSideButtons","pageTitle"],["mat-flat-button","","color","accent","class","action",3,"disabled","click",4,"ngIf"],["mat-stroked-button","","color","warn","class","action",3,"disabled","click",4,"ngIf"],[1,"parent-card-container"],[1,"input-mat-card"],[3,"formGroup"],[1,"row-fields"],[1,"field-item"],["for","ptopicAccID","translate",""],["appearance","outline","formGroupName","ptopic",2,"width","212px"],["matInput","","formControlName","accID"],["matSuffix",""],["mat-icon-button","",1,"small-icon-btn",3,"click"],["for","stopicAccID","translate",""],["appearance","outline"],["matInput","","id","stopicAccID","formControlName","accID"],["for","title","translate",""],["matInput","","id","title","formControlName","title"],["for","typeId","translate",""],["id","typeId","formControlName","typeId"],[3,"value",4,"ngFor","ngForOf"],["for","definition","translate",""],["matInput","","id","definition","formControlName","definition"],["for","dt4","translate",""],["id","dt4","formControlName","dt4","multiple",""],["for","dt5","translate",""],["id","dt5","formControlName","dt5","multiple",""],["for","dt6","translate",""],["id","dt6","formControlName","dt6","multiple",""],["formControlName","active"],["matPrefix","","translate",""],["formControlName","hasPersuit"],["formControlName","hasExchange"],[1,"ag-grid-to-fill"],[3,"outputGetFromGrid"],["mat-flat-button","","color","accent",1,"action",3,"click","disabled"],["translate",""],["mat-stroked-button","","color","warn",1,"action",3,"click","disabled"],[3,"value"]],template:function(e,i){e&1&&T(0,ba,72,12,"div",0),e&2&&d("ngIf",i.permissionResource.R)},dependencies:[b,He,Ct,P,Wt,Rt,xt,qt,Ut,Kt,We,K,Dt,q,Q,G,j,E,Pe,ni,x,F,Y,Be,Re,tt,L,$,V,bt,St,J,O,B,z,X,si,Z,et,it,rt,w,yt,ot,at,nt,ct,lt,st,gt,mt,dt,pt,ut,ft,A,ht,_t,vi,Tt],encapsulation:2});let c=r;return c})();var kr=class kr{static createMainForm(r){return r.group({id:[null],year:[null]})}};kr.gv=y.variables;var ir=kr;function ya(c,r){if(c&1){let a=N();o(0,"button",15),f("click",function(){g(a);let e=h(2);return _(e.action("save"))}),o(1,"span",3),m(2,"crud.btn.save"),n()()}if(c&2){let a=h(2);d("disabled",a.formGroup.invalid)}}function Ta(c,r){if(c&1){let a=N();o(0,"button",16),f("click",function(){g(a);let e=h(2);return _(e.action("delete"))}),o(1,"span",3),m(2,"crud.btn.delete"),n()()}if(c&2){let a=h(2);d("disabled",a.formGroup.invalid)}}function Da(c,r){if(c&1&&(o(0,"mat-option",17),m(1),n()),c&2){let a=r.$implicit;d("value",a.year),p(),Yt(" ",a.year," ")}}function xa(c,r){if(c&1){let a=N();o(0,"div")(1,"app-page-header",1),Mt(2,"translate"),o(3,"button",2),f("click",function(){g(a);let e=h();return _(e.action("refresh"))}),o(4,"span",3),m(5,"crud.btn.refresh"),n()(),T(6,ya,3,1,"button",4)(7,Ta,3,1,"button",5),n(),o(8,"div",6)(9,"mat-card",7)(10,"mat-card-content")(11,"form",8)(12,"div",9)(13,"div",10)(14,"label",11),m(15,"acc.account.misYear.misYear"),n(),o(16,"mat-form-field",12)(17,"mat-select",13),T(18,Da,2,2,"mat-option",14),n()()()()()()()()()}if(c&2){let a=h();p(),d("pageTitle",v(vt(2,7,"menuTitle.MisYear")))("titleSideButtons",a.titleSideButtons),p(5),d("ngIf",a.permissionResource.W),p(),d("ngIf",a.permissionResource.D),p(4),d("formGroup",a.formGroup),p(7),d("ngForOf",a.years)}}var vo=(()=>{let r=class r extends U{constructor(t,e,i,s){super(t,i,s),this.mainService=t,this.formBuilder=e,this.notifier=i,this.translate=s,this.formGroup=ir.createMainForm(this.formBuilder),this.getResourcePermissions(C.MisYear),this.getAll()}ngOnInit(){}action(t){console.log(t),t=="save"?this.update():t=="new"&&this.new()}getAll(){this.mainService.getAll().subscribe(t=>{this.years=t}),this.formGroup.patchValue({year:Vt.getMisYear()})}new(){this.mainService.createNewYear().subscribe(t=>{this.getAll(),this.notifier.showSuccess(this.translate.instant("dialog.operationIsDone"))})}update(){this.formGroup.controls.id.setValue(1),this.mainService.update(1,this.formGroup.value).subscribe(t=>{Vt.setMisYear(this.formGroup.controls.year.value),this.notifier.showSuccess(this.translate.instant("dialog.operationIsDone"))})}};r.\u0275fac=function(e){return new(e||r)(u(zr),u(It),u(W),u(I))},r.\u0275cmp=S({type:r,selectors:[["app-mis-year"]],features:[D],decls:1,vars:1,consts:[[4,"ngIf"],[1,"action",3,"titleSideButtons","pageTitle"],["mat-stroked-button","","color","primary",1,"action",3,"click"],["translate",""],["mat-flat-button","","color","accent","class","action",3,"disabled","click",4,"ngIf"],["mat-stroked-button","","color","warn","class","action",3,"disabled","click",4,"ngIf"],[1,"parent-card-container"],[1,"input-mat-card"],[3,"formGroup"],[1,"row-fields"],[1,"field-item"],["for","misYear","translate",""],["appearance","outline"],["id","misYear","formControlName","year"],[3,"value",4,"ngFor","ngForOf"],["mat-flat-button","","color","accent",1,"action",3,"click","disabled"],["mat-stroked-button","","color","warn",1,"action",3,"click","disabled"],[3,"value"]],template:function(e,i){e&1&&T(0,xa,19,9,"div",0),e&2&&d("ngIf",i.permissionResource.R)},dependencies:[b,He,Ct,P,Wt,xt,qt,Ut,Kt,K,Dt,q,Q,G,j,E,x,Y,Be,Re,tt,L,$,V,bt,J,O,B,z,X,Z,et,it,rt,w,ot,at,nt,ct,lt,st,gt,mt,dt,pt,ut,ft,A,ht,_t,Tt],encapsulation:2});let c=r;return c})();var Co=(()=>{let r=class r extends oe{constructor(t){super(t),this.http=t,this.setBaseUrl(C.AccVchHdrNumbering)}doAccvchhdrNumbering(t){return this.http.post(`${this.baseUrl}/do_accvchhdr_numbering/${t}`,null)}};r.\u0275fac=function(e){return new(e||r)(Zt(ee))},r.\u0275prov=Xt({token:r,factory:r.\u0275fac,providedIn:"root"});let c=r;return c})();function Va(c,r){if(c&1){let a=N();o(0,"button",6),f("click",function(){g(a);let e=h(2);return _(e.action("save"))}),o(1,"span",4),m(2,"crud.btn.save"),n()()}}function wa(c,r){if(c&1&&(o(0,"div"),M(1,"app-page-header",1),Mt(2,"translate"),o(3,"div",2)(4,"mat-card",3)(5,"mat-card-header")(6,"mat-card-title")(7,"span",4),m(8,"dialog.areYouSureFromNumberingOfAccVchHdr"),n()()(),o(9,"mat-card-content"),T(10,Va,3,0,"button",5),n()()()()),c&2){let a=h();p(),d("pageTitle",v(vt(2,3,"menuTitle.AccVchHdrNumbering"))),p(9),d("ngIf",a.permissionResource.W)}}var So=(()=>{let r=class r extends U{constructor(t,e,i,s){super(t,e,i),this.mainService=t,this.notifier=e,this.translate=i,this.dialog=s,this.gv=y.variables,this.toppings=new qe(""),this.getResourcePermissions(C.AccVchHdrNumbering)}ngOnInit(){}action(t){this.mainService.doAccvchhdrNumbering(Vt.getMisYear()).subscribe(e=>{this.notifier.showSuccess(this.translate.instant("dialog.operationIsDone"))})}};r.\u0275fac=function(e){return new(e||r)(u(Co),u(W),u(I),u(Jt))},r.\u0275cmp=S({type:r,selectors:[["app-accVchHdrNumbering"]],features:[D],decls:1,vars:1,consts:[[4,"ngIf"],[1,"action",3,"pageTitle"],[1,"parent-card-container"],[1,"input-mat-card"],["translate",""],["mat-flat-button","","color","accent","class","action",3,"click",4,"ngIf"],["mat-flat-button","","color","accent",1,"action",3,"click"]],template:function(e,i){e&1&&T(0,wa,11,5,"div",0),e&2&&d("ngIf",i.permissionResource.R)},dependencies:[b,Ct,P,K,Dt,q,Q,G,j,x,Y,tt,L,$,V,bt,J,O,B,z,li,ci,X,Z,et,it,rt,w,ot,at,nt,ct,lt,st,gt,mt,dt,pt,ut,ft,A,ht,_t,Tt],encapsulation:2});let c=r;return c})();var Aa=[{path:C.Gtopic,component:go},{path:C.Ptopic,component:_o},{path:C.Stopic,component:Mo},{path:C.Dtopic,component:ho},{path:C.DtopicType,component:fo},{path:C.AccVchType,component:Xr},{path:C.AccVchHdr,component:io},{path:C.AccVchHdrConsideration,component:lo},{path:C.AccVchHdrPermanent,component:uo},{path:C.AccVchHdrClose,component:no},{path:C.AccVchHdrEndOFYear,component:mo},{path:C.AccVchHdrBeginningOFYear,component:oo},{path:C.AccSummary,component:eo},{path:C.MisYear,component:vo},{path:C.AccVchHdrNumbering,component:So}],bo=(()=>{let r=class r{};r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=yi({type:r}),r.\u0275inj=bi({imports:[rr.forChild(Aa),rr]});let c=r;return c})();var Dp=(()=>{let r=class r{};r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=yi({type:r}),r.\u0275inj=bi({imports:[bo]});let c=r;return c})();export{Dp as AccModule};
