import{c as je,d as hi,f as ke}from"./chunk-SWKCXBI6.js";import{$a as Ae,A as qe,Aa as Me,B as ze,Ba as ve,C as te,D as si,E as ie,Ea as Ce,F as N,I as re,Ia as xe,J as oe,Ja as ye,Ka as Se,L as ne,La as Re,Ma as we,Oa as Ie,P as ae,Pa as Te,Q as li,Qa as De,R as se,S as le,Ua as Fe,W as ci,X as ce,Ya as w,Z as ui,Za as mi,_a as Ge,aa as ue,ab as U,bb as O,c as Xe,cb as Ee,d as ni,db as pi,f as X,fa as me,fb as I,g as G,ga as pe,gb as di,h as q,hb as fi,i as z,ia as de,ib as gi,j as Bt,ja as fe,ka as k,la as V,m as Q,ma as B,o as K,q as Y,r as ai,ra as ge,s as J,t as Z,u as ee,va as he,vb as L,xa as _e,y as E,ya as P,za as be}from"./chunk-33GDL65U.js";import{c as oi,d as $e,e as $,g as He,h as A,n as H,v as Yt}from"./chunk-5TOTVD6K.js";import{Ac as Kt,Gc as d,Hc as f,K as Ue,Sb as m,Tb as n,Ub as s,Uc as ri,Vb as S,Z as Oe,a as zt,ac as v,b as ti,cb as l,cc as g,ec as p,ga as j,ha as Gt,ib as M,ic as Et,jc as Nt,ka as W,kc as kt,la as Qt,oc as Le,pb as R,qa as _,qb as At,ra as b,rc as Ne,sc as u,tb as T,tc as C,ua as ii,ub as y,uc as x,wc as Vt,x as Pe}from"./chunk-OSBU4Z27.js";var _i=(()=>{let i=class i{constructor(){this.columnDefinitions=[],this.dataset=[],this.isDarkTheme=!1,this.cdr=Qt(ri),this.translate=Qt(w),this.isDarkTheme=document.body.classList.contains("dark-theme")}onGridReady(e){this.gridApi=e.api,console.log("\u2714\uFE0F AG-Grid is Ready. Loading Data..."),this.loadData(),setTimeout(()=>{this.gridApi&&this.dataset.length>0&&console.log("Initial focus and selection set")},500)}gridConstructor(){this.columnDefinitions=this.getColumnDefinitions(),this.gridOptions={theme:"legacy",columnDefs:this.columnDefinitions,rowData:this.dataset,defaultColDef:{sortable:!0,filter:!0,floatingFilter:!0,resizable:!0,minWidth:100,filterParams:{buttons:["reset"],debounceMs:300}},enableRtl:!0,rowSelection:{mode:"singleRow",checkboxes:!1},suppressRowClickSelection:!1,suppressCellFocus:!1,onRowClicked:e=>this.onRowClicked(e),onSelectionChanged:e=>this.onSelectedRowChanged(e),onCellFocused:e=>this.onCellFocused(e),onCellKeyDown:e=>this.onCellKeyDown(e),navigateToNextCell:e=>this.navigateToNextCell(e),animateRows:!0,suppressMenuHide:!1,enableBrowserTooltips:!0,pagination:!0,paginationPageSize:20,paginationPageSizeSelector:[10,20,50,100,200,500,1e3],suppressPaginationPanel:!1,suppressScrollOnNewData:!0,localeText:{page:"\u0635\u0641\u062D\u0647",more:"\u0628\u06CC\u0634\u062A\u0631",to:"\u062A\u0627",of:"\u0627\u0632",next:"\u0628\u0639\u062F\u06CC",last:"\u0622\u062E\u0631",first:"\u0627\u0648\u0644",previous:"\u0642\u0628\u0644\u06CC",loadingOoo:"\u062F\u0631 \u062D\u0627\u0644 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC...",filterOoo:"\u0641\u06CC\u0644\u062A\u0631...",equals:"\u0628\u0631\u0627\u0628\u0631",notEqual:"\u0646\u0627 \u0628\u0631\u0627\u0628\u0631",lessThan:"\u06A9\u0645\u062A\u0631 \u0627\u0632",greaterThan:"\u0628\u06CC\u0634\u062A\u0631 \u0627\u0632",inRange:"\u062F\u0631 \u0645\u062D\u062F\u0648\u062F\u0647",lessThanOrEqual:"\u06A9\u0645\u062A\u0631 \u06CC\u0627 \u0628\u0631\u0627\u0628\u0631",greaterThanOrEqual:"\u0628\u06CC\u0634\u062A\u0631 \u06CC\u0627 \u0628\u0631\u0627\u0628\u0631",contains:"\u0634\u0627\u0645\u0644",notContains:"\u0634\u0627\u0645\u0644 \u0646\u0645\u06CC\u200C\u0634\u0648\u062F",startsWith:"\u0634\u0631\u0648\u0639 \u0628\u0627",endsWith:"\u067E\u0627\u06CC\u0627\u0646 \u0628\u0627",searchOoo:"\u062C\u0633\u062A\u062C\u0648...",selectAll:"\u0627\u0646\u062A\u062E\u0627\u0628 \u0647\u0645\u0647",blanks:"\u062E\u0627\u0644\u06CC",blank:"\u062E\u0627\u0644\u06CC \u0627\u0633\u062A",notBlank:"\u062E\u0627\u0644\u06CC \u0646\u06CC\u0633\u062A",noMatches:"\u0647\u06CC\u0686 \u0645\u0648\u0631\u062F\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F",applyFilter:"\u0627\u0639\u0645\u0627\u0644 \u0641\u06CC\u0644\u062A\u0631",resetFilter:"\u067E\u0627\u06A9 \u06A9\u0631\u062F\u0646 \u0641\u06CC\u0644\u062A\u0631",clearFilter:"\u067E\u0627\u06A9 \u06A9\u0631\u062F\u0646 \u0641\u06CC\u0644\u062A\u0631",true:"\u062F\u0627\u0631\u062F",false:"\u0646\u062F\u0627\u0631\u062F",andCondition:"\u0648",orCondition:"\u06CC\u0627"}}}exportToExcel(e="export.csv"){console.log("export to excel"),this.gridApi&&this.gridApi.exportDataAsCsv({fileName:e})}print(){}onRowClicked(e){console.log("Row clicked:",e.data),e.node.isSelected()||e.node.setSelected(!0),this.populateFormWithRowData(e.data)}onSelectedRowChanged(e){console.log("Selection changed:",e);let t=this.gridApi.getSelectedRows();if(console.log("Selected rows:",t),t&&t.length>0){let o=t[0];this.populateFormWithRowData(o)}else console.log("No rows selected")}onCellFocused(e){if(e.rowIndex!==null&&e.rowIndex!==void 0){console.log("Cell focused on row:",e.rowIndex);let t=this.gridApi.getDisplayedRowAtIndex(e.rowIndex);t&&(this.gridApi.deselectAll(),t.setSelected(!0),console.log("Row selected via keyboard navigation:",t.data))}}onCellKeyDown(e){let{key:t}=e.event;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t)){console.log("Arrow key pressed:",t,"on row:",e.rowIndex);return}}navigateToNextCell(e){let{key:t,previousCellPosition:o,nextCellPosition:c}=e;return c}focusGrid(){if(this.gridApi&&this.dataset.length>0){this.gridApi.setFocusedCell(0,this.columnDefinitions[0].field||"");let e=this.gridApi.getDisplayedRowAtIndex(0);e&&!e.isSelected()&&(this.gridApi.deselectAll(),e.setSelected(!0)),console.log("Grid focused programmatically")}}getGridThemeClass(){return"ag-theme-balham"+(this.isDarkTheme?" dark-theme":"")}setupThemeObserver(){this.themeObserver=new MutationObserver(e=>{e.forEach(t=>{if(t.type==="attributes"&&t.attributeName==="class"){let o=document.body.classList.contains("dark-theme");this.isDarkTheme!==o&&(console.log("Theme changed to:",o?"dark":"light"),this.isDarkTheme=o,this.cdr.detectChanges())}})}),this.themeObserver.observe(document.body,{attributes:!0,attributeFilter:["class"]}),console.log("Theme observer set up. Current theme:",this.isDarkTheme?"dark":"light")}updateGridRow(e,t){console.log("Updating row with database id:",e,"with data:",t);let o=null;this.gridApi.forEachNode(c=>{c.data&&c.data.id===e&&(o=c)}),o?(o.setData(t),console.log("\u2705 Row updated successfully")):console.warn("\u26A0\uFE0F Row with database id",e,"not found in grid")}addGridRow(e){this.gridApi.applyTransaction({add:[e]}),this.dataset.push(e),this.cdr.detectChanges(),console.log("\u2705 Row added successfully")}removeGridRow(e){console.log("Removing row with database id:",e);let t=null;this.gridApi.forEachNode(o=>{o.data&&o.data.id===e&&(t=o)}),t?(this.gridApi.applyTransaction({remove:[t.data]}),console.log("\u2705 Row removed successfully")):console.warn("\u26A0\uFE0F Row with database id",e,"not found in grid")}ngOnDestroy(){this.themeObserver&&this.themeObserver.disconnect()}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=R({type:i,selectors:[["ng-component"]],viewQuery:function(t,o){if(t&1&&Et(U,5),t&2){let c;Nt(c=kt())&&(o.agGrid=c.first)}},standalone:!1,decls:0,vars:0,template:function(t,o){},encapsulation:2});let r=i;return r})();var Ve=(()=>{let i=class i extends _i{constructor(e,t){super(),this.service=e,this.permissionResource={},this.translate=t}getResourcePermissions(e){this.service.getPermissionsByUserNameAndResource(e).subscribe(t=>{t!==null&&t.permissions&&(this.permissionResource.R=t.permissions.includes("R"),this.permissionResource.W=t.permissions.includes("W"),this.permissionResource.E=t.permissions.includes("E"),this.permissionResource.D=t.permissions.includes("D"),this.permissionResource.P=t.permissions.includes("P"),this.permissionResource.X=t.permissions.includes("X"),console.log(t))})}hasEditPermission(){return this.permissionResource.E?!0:(console.warn("You do not have permission to edit this resource."),!1)}translateHeaders(e){return e.map(t=>t.name?ti(zt({},t),{name:this.translate.instant(t.name)}):zt({},t))}onClick(e,t){this.onSelectedRowsChanged(e,{rows:[t.row]})}onSelectedRowsChanged(e,t){console.log("Selected rows changed:",t.rows)}manipulateDataBeforeSave(e){return e}loadData(){this.getAllEntities().subscribe(e=>{this.dataset=this.manipulateDataAfterFetch(e),console.log("\u2714\uFE0F Data loaded:",this.dataset),this.gridApi?this.gridApi.setGridOption("rowData",this.dataset):(console.warn("GridApi is not initialized. Retrying in 500ms..."),setTimeout(()=>{this.gridApi&&this.gridApi.setGridOption("rowData",this.dataset)},500))})}save(){let e=this.getFormGroup();if(e&&e.valid){let t=e.value,o=this.getMessageService();this.manipulateDataBeforeSave(t),this.selectedId?(console.log("Form Data to be updated:",t),this.updateEntity(t).subscribe({next:c=>{this.updateGridRow(this.selectedId,t),this.resetForm(),o.showMessage(this.translate.instant("crud.btn.updated"),3e3)},error:c=>{console.error("\u274C Error updating entity:",c)}})):this.saveEntity(t).subscribe({next:c=>{this.addGridRow(c),this.resetForm(),o.showMessage(this.translate.instant("crud.btn.saved"),3e3)},error:c=>{console.error("\u274C Error creating entity:",c)}})}else this.markFormGroupTouched(e)}delete(){if(this.selectedId&&confirm(this.translate.instant("crud.btn.areYouSureToDelete"))){let e=this.getMessageService();this.deleteEntity(this.selectedId).subscribe({next:t=>{console.log("\u2714\uFE0F Entity deleted successfully:",t),this.removeGridRow(this.selectedId),this.resetForm(),e.showMessage(this.translate.instant("crud.btn.deleted"),3e3)},error:t=>{console.error("\u274C Error deleting entity:",t)}})}}markFormGroupTouched(e){Object.values(e.controls).forEach(t=>{t.markAsTouched(),t instanceof Bt&&this.markFormGroupTouched(t)})}resetForm(){let e=this.getFormGroup();e&&(e.reset(),this.selectedId=0)}getInvestorName(e){return e&&e.investor&&e.investor.lastName!==null?`${e.investor.firstName} ${e.investor.lastName}`:e&&e.investor?`${e.investor.firstName}`:""}getVeteranName(e){return e&&e.veteran&&e.veteran.lastName!==null?`${e.veteran.firstName} ${e.veteran.lastName} ${e.veteran.nationalId!==null?`(${e.veteran.nationalId})`:""}`:e&&e.veteran?`${e.veteran.firstName}`:""}getProductName(e){return e&&e.product?`${e.product.carModel.brand.name} - ${e.product.carModel.name} : ${e.product.productYear?`(${e.product.productYear})`:""}`:""}getSellerName(e){return e&&e.seller?`${e.seller.name}`:""}getRecipientName(e){return e&&e.recipient?`${e.recipient.name}`:""}displayProduct(e){return e?`${e.carModel.brand.name} ${e.carModel.name}`:""}displayCarModelName(e){return e&&e.name?`${e.brand.name} - ${e.name} `:""}displayName(e){return e&&e.name?`${e.name}`:""}displayFirstAndLastName(e){return e&&e.lastName?`${e.firstName} ${e.lastName}`:e&&e.firstName?`${e.firstName}`:""}displayUserGroupName(e){let t=e&&e.name?e.name:"",o=e&&e.groupName?e.groupName:"";return`${t} ${o}`.trim()}displayUserName(e){let t=e&&e.userFirstName?e.userFirstName:"",o=e&&e.userLastName?e.userLastName:"",c=e&&e.userName?e.userName:"";return`${t} ${o} : ${c}`.trim()}};i.\u0275fac=function(t){return new(t||i)(M(I),M(w))},i.\u0275cmp=R({type:i,selectors:[["ng-component"]],standalone:!1,features:[T],decls:0,vars:0,template:function(t,o){},encapsulation:2});let r=i;return r})();var Pt=class{static getColumnDefs(i){return[{field:"id",headerName:"Id",hide:!0,cellClass:"rtl",headerClass:"rtl"},{field:"code",headerName:i.instant("group.code"),filter:"agTextColumnFilter",sortable:!0,cellClass:"rtl",headerClass:"rtl"},{field:"name",headerName:i.instant("group.name"),filter:"agTextColumnFilter",sortable:!0,cellClass:"rtl",headerClass:"rtl"}]}};var Qe=(()=>{let i=class i extends I{constructor(e){super(e),this.setBaseUrl("customgroup")}};i.\u0275fac=function(t){return new(t||i)(W(H))},i.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();function Ai(r,i){if(r&1){let a=v();n(0,"button",18),g("click",function(){_(a);let t=p(2);return b(t.print())}),n(1,"mat-icon"),u(2,"print"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}r&2&&(l(4),C(f(5,1,"crud.btn.printBtn")))}function Ei(r,i){if(r&1){let a=v();n(0,"button",19),g("click",function(){_(a);let t=p(2);return b(t.exportToExcel())}),n(1,"mat-icon"),u(2,"output"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}r&2&&(l(4),C(f(5,1,"crud.btn.export")))}function Ni(r,i){if(r&1){let a=v();n(0,"button",20),g("click",function(){_(a);let t=p(2);return b(t.save())}),n(1,"mat-icon"),u(2,"save"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}if(r&2){let a=p(2);m("disabled",a.groupForm.invalid),l(4),C(f(5,2,"crud.btn.save"))}}function ki(r,i){if(r&1){let a=v();n(0,"button",21),g("click",function(){_(a);let t=p(2);return b(t.delete())}),n(1,"mat-icon"),u(2,"delete"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}if(r&2){let a=p(2);m("disabled",a.selectedId===0),l(4),C(f(5,2,"crud.btn.delete"))}}function Vi(r,i){if(r&1){let a=v();n(0,"button",22),g("click",function(){_(a);let t=p(2);return b(t.resetForm())}),n(1,"mat-icon"),u(2,"add"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}r&2&&(l(4),C(f(5,1,"crud.btn.new")))}function Bi(r,i){if(r&1){let a=v();n(0,"div")(1,"app-page-header",1),u(2),d(3,"translate"),y(4,Ai,6,3,"button",2)(5,Ei,6,3,"button",3)(6,Ni,6,4,"button",4)(7,ki,6,4,"button",5)(8,Vi,6,3,"button",6),s(),n(9,"div",7)(10,"mat-card")(11,"mat-card-content")(12,"form",8)(13,"div",9)(14,"div",10)(15,"label",11),u(16),d(17,"translate"),s(),n(18,"mat-form-field",12),S(19,"input",13),s()(),n(20,"div",10)(21,"label",14),u(22),d(23,"translate"),s(),n(24,"mat-form-field",12),S(25,"input",15),s()()()()()(),n(26,"div",16)(27,"ag-grid-angular",17),g("gridReady",function(t){_(a);let o=p();return b(o.onGridReady(t))}),s()()()()}if(r&2){let a=p();l(2),x(" ",f(3,15,"group.title")," "),l(2),m("ngIf",a.permissionResource.P),l(),m("ngIf",a.permissionResource.X),l(),m("ngIf",a.permissionResource.W),l(),m("ngIf",a.permissionResource.D),l(),m("ngIf",a.permissionResource.R),l(4),m("formGroup",a.groupForm),l(4),x("",f(17,17,"group.code"),":"),l(6),x("",f(23,19,"group.name"),":"),l(5),Ne(a.getGridThemeClass()),m("columnDefs",a.columnDefinitions)("rowData",a.dataset)("gridOptions",a.gridOptions)("enableRtl",!0)}}var bi=(()=>{let i=class i extends Ve{constructor(e,t,o,c){super(t,o),this.fb=e,this.translate=o,this.messageService=c,this.columnDefs=[],this.rowData=[],this.groupService=t,this.getResourcePermissions(L.group)}ngOnInit(){this.initForm(),this.gridConstructor()}getAllEntities(){return this.groupService.getAll()}saveEntity(e){return this.groupService.create(e)}updateEntity(e){return this.groupService.create(e)}deleteEntity(e){return this.groupService.delete(e)}getColumnDefinitions(){return Pt.getColumnDefs(this.translate)}populateFormWithRowData(e){this.groupForm.patchValue(e),this.selectedId=e.id}getFormGroup(){return this.groupForm}getMessageService(){return this.messageService}manipulateDataAfterFetch(e){return e}initForm(){this.groupForm=this.fb.group({id:[],name:["",[G.required]],code:[""]})}};i.\u0275fac=function(t){return new(t||i)(M(J),M(Qe),M(w),M(ke))},i.\u0275cmp=R({type:i,selectors:[["ng-component"]],features:[T],decls:1,vars:1,consts:[[4,"ngIf"],[1,"action"],["mat-flat-button","","type","submit","color","accent","class","action","hidden","",3,"click",4,"ngIf"],["mat-flat-button","","type","submit","color","accent","class","action",3,"click",4,"ngIf"],["mat-flat-button","","color","accent","class","action",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","warn","class","action",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","accent","class","action",3,"click",4,"ngIf"],[1,"parent-card-container"],[3,"formGroup"],[1,"form-grid"],[1,"form-item"],["for","code",1,"form-label"],["appearance","outline",1,"form-field"],["matInput","","id","code","formControlName","code"],["for","name",1,"form-label"],["matInput","","id","name","formControlName","name"],[1,"ag-grid-to-fill"],["tabindex","0",2,"width","100%","height","100%",3,"gridReady","columnDefs","rowData","gridOptions","enableRtl"],["mat-flat-button","","type","submit","color","accent","hidden","",1,"action",3,"click"],["mat-flat-button","","type","submit","color","accent",1,"action",3,"click"],["mat-flat-button","","color","accent",1,"action",3,"click","disabled"],["mat-flat-button","","color","warn",1,"action",3,"click","disabled"],["mat-flat-button","","color","accent",1,"action",3,"click"]],template:function(t,o){t&1&&y(0,Bi,28,21,"div",0),t&2&&m("ngIf",o.permissionResource.R)},dependencies:[A,$,ee,Q,X,q,z,K,Y,Z,Ee,Ae,O,U,pe,E,B,V,_e,ce,ge,te,N,ie,re,ae,oe,ne,se,le,ue,me,de,k,fe,he,be,Me,ve,Ce,xe,De,ye,Se,Re,we,Ie,P,Te,Fe,Ge],styles:["mat-card[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:0}"]});let r=i;return r})();var Ot=class{static getColumnDefs(i){let a=[{field:"id",hide:!0},{field:"userName",headerName:i.instant("user.userName"),width:150,sortable:!0,filter:!0,resizable:!0},{field:"userFirstName",headerName:i.instant("user.userFirstName"),width:150,sortable:!0,filter:!0,resizable:!0},{field:"userLastName",headerName:i.instant("user.userLastName"),width:150,sortable:!0,filter:!0,resizable:!0},{field:"passwordMustChange",headerName:i.instant("user.passwordMustChange"),width:120,cellRenderer:e=>e.value?"\u2713":"\u2717",sortable:!0,filter:!0},{field:"active",headerName:i.instant("user.active"),width:100,cellRenderer:e=>e.value?"\u2713":"\u2717",sortable:!0,filter:!0}];return a.forEach(e=>{e.headerClass="rtl",e.cellClass="rtl"}),a}};function Pi(r,i){if(r&1){let a=v();n(0,"button",24),g("click",function(){_(a);let t=p(2);return b(t.print())}),n(1,"mat-icon"),u(2,"print"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}r&2&&(l(4),C(f(5,1,"crud.btn.print")))}function Ui(r,i){if(r&1){let a=v();n(0,"button",25),g("click",function(){_(a);let t=p(2);return b(t.exportToExcel())}),n(1,"mat-icon"),u(2,"output"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}r&2&&(l(4),C(f(5,1,"crud.btn.export")))}function Oi(r,i){if(r&1){let a=v();n(0,"button",26),g("click",function(){_(a);let t=p(2);return b(t.save())}),n(1,"mat-icon"),u(2,"save"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}if(r&2){let a=p(2);m("disabled",a.userForm.invalid),l(4),C(f(5,2,"crud.btn.save"))}}function Li(r,i){if(r&1){let a=v();n(0,"button",27),g("click",function(){_(a);let t=p(2);return b(t.delete())}),n(1,"mat-icon"),u(2,"delete"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}if(r&2){let a=p(2);m("disabled",a.selectedId===0),l(4),C(f(5,2,"crud.btn.delete"))}}function ji(r,i){if(r&1){let a=v();n(0,"button",28),g("click",function(){_(a);let t=p(2);return b(t.resetForm())}),n(1,"mat-icon"),u(2,"add"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}r&2&&(l(4),C(f(5,1,"crud.btn.new")))}function Wi(r,i){if(r&1){let a=v();n(0,"div")(1,"app-page-header",1),u(2),d(3,"translate"),y(4,Pi,6,3,"button",2)(5,Ui,6,3,"button",3)(6,Oi,6,4,"button",4)(7,Li,6,4,"button",5)(8,ji,6,3,"button",6),s(),n(9,"div",7)(10,"mat-card")(11,"mat-card-content")(12,"form",8)(13,"div",9)(14,"div",10)(15,"label",11),u(16),d(17,"translate"),s(),n(18,"mat-form-field",12),S(19,"input",13),s()(),n(20,"div",10)(21,"label",14),u(22),d(23,"translate"),s(),n(24,"mat-form-field",12),S(25,"input",15),s()(),n(26,"div",10)(27,"label",16),u(28),d(29,"translate"),s(),n(30,"mat-form-field",12),S(31,"input",17),s()(),n(32,"div",10)(33,"label",18),u(34),d(35,"translate"),s(),S(36,"mat-checkbox",19),s(),n(37,"div",10)(38,"label",20),u(39),d(40,"translate"),s(),S(41,"mat-checkbox",21),s()()()()(),n(42,"div",22)(43,"ag-grid-angular",23),g("gridReady",function(t){_(a);let o=p();return b(o.onGridReady(t))}),s()()()()}if(r&2){let a=p();l(2),x(" ",f(3,17,"user.title")," "),l(2),m("ngIf",a.permissionResource.P),l(),m("ngIf",a.permissionResource.X),l(),m("ngIf",a.permissionResource.W),l(),m("ngIf",a.permissionResource.D),l(),m("ngIf",a.permissionResource.R),l(4),m("formGroup",a.userForm),l(4),x("",f(17,19,"user.userName"),":"),l(6),x("",f(23,21,"user.userFirstName"),":"),l(6),x("",f(29,23,"user.userLastName"),":"),l(6),x("",f(35,25,"user.passwordMustChange"),":"),l(5),x("",f(40,27,"user.active"),":"),l(4),Ne(a.getGridThemeClass()),m("columnDefs",a.columnDefinitions)("rowData",a.dataset)("gridOptions",a.gridOptions)}}var Mi=(()=>{let i=class i extends Ve{constructor(e,t,o,c){super(t,o),this.fb=e,this.translate=o,this.messageService=c,this.userService=t}ngOnInit(){this.initForm(),this.getResourcePermissions(L.user),this.gridConstructor()}getAllEntities(){return this.userService.getAll()}saveEntity(e){return this.userService.create(e)}updateEntity(e){return this.userService.create(e)}deleteEntity(e){return this.userService.delete(e)}getColumnDefinitions(){return Ot.getColumnDefs(this.translate)}populateFormWithRowData(e){this.userForm.patchValue(e),this.selectedId=e.id}getFormGroup(){return this.userForm}getMessageService(){return this.messageService}manipulateDataAfterFetch(e){return e}initForm(){this.userForm=this.fb.group({id:[],userName:["",[G.required]],userFirstName:["",[G.required]],userLastName:["",[G.required]],passwordMustChange:[!1],active:[!1]})}};i.\u0275fac=function(t){return new(t||i)(M(J),M(I),M(w),M(ke))},i.\u0275cmp=R({type:i,selectors:[["ng-component"]],features:[T],decls:1,vars:1,consts:[[4,"ngIf"],[1,"action"],["mat-flat-button","","type","submit","color","accent","class","action","hidden","",3,"click",4,"ngIf"],["mat-flat-button","","type","submit","color","accent","class","action",3,"click",4,"ngIf"],["mat-flat-button","","color","accent","class","action",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","warn","class","action",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","accent","class","action",3,"click",4,"ngIf"],[1,"parent-card-container"],[3,"formGroup"],[1,"form-grid"],[1,"form-item"],["for","userName",1,"form-label"],["appearance","outline",1,"form-field"],["matInput","","id","userName","formControlName","userName","required",""],["for","userFirstName",1,"form-label"],["matInput","","id","userFirstName","formControlName","userFirstName","required",""],["for","userLastName",1,"form-label"],["matInput","","id","userLastName","formControlName","userLastName","required",""],["for","passwordMustChange",1,"form-label"],["id","passwordMustChange","formControlName","passwordMustChange"],["for","active",1,"form-label"],["id","active","formControlName","active"],[1,"ag-grid-to-fill"],["tabindex","0",2,"width","100%","height","100%",3,"gridReady","columnDefs","rowData","gridOptions"],["mat-flat-button","","type","submit","color","accent","hidden","",1,"action",3,"click"],["mat-flat-button","","type","submit","color","accent",1,"action",3,"click"],["mat-flat-button","","color","accent",1,"action",3,"click","disabled"],["mat-flat-button","","color","warn",1,"action",3,"click","disabled"],["mat-flat-button","","color","accent",1,"action",3,"click"]],template:function(t,o){t&1&&y(0,Wi,44,29,"div",0),t&2&&m("ngIf",o.permissionResource.R)},dependencies:[A,$,ee,Q,X,q,z,ai,K,Y,Z,Ee,Ae,O,U,pe,E,B,V,_e,ce,ge,te,N,ie,re,ae,oe,ne,se,li,le,ue,me,de,k,fe,he,be,Me,ve,Ce,xe,De,ye,Se,Re,we,Ie,P,Te,Fe,Ge],styles:["mat-card[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:0}"]});let r=i;return r})();var F=(()=>{let i=class i{};i.checkboxRenderer=e=>{let t=document.createElement("div");t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.height="100%";let o=document.createElement("input");return o.type="checkbox",o.checked=!!e.value,o.style.margin="0",o.style.width="16px",o.style.height="16px",o.style.cursor="pointer",o.addEventListener("change",c=>{e.node.setDataValue(e.colDef.field,o.checked)}),t.appendChild(o),t};let r=i;return r})();var Lt=class{static getColumnDefs(i){let a=[{field:"id",hide:!0},{field:"parent",hide:!0},{field:"systemName",headerName:i.instant("groupResource.systemName"),hide:!0,width:110},{field:"resourceName",headerName:i.instant("groupResource.resourceName"),hide:!0},{field:"resourceTitle",headerName:i.instant("groupResource.resourceTitle"),width:200,sortable:!0,filter:!0,resizable:!0},{field:"resourceDescription",headerName:i.instant("groupResource.resourceDescription"),hide:!0},{field:"ALL",headerName:i.instant("groupResource.ALL"),hide:!0,width:60,cellRenderer:F.checkboxRenderer,editable:!1,sortable:!1,filter:!1},{field:"R",headerName:i.instant("groupResource.R"),width:60,cellRenderer:F.checkboxRenderer,editable:!1,sortable:!1,filter:!1},{field:"W",headerName:i.instant("groupResource.W"),width:60,cellRenderer:F.checkboxRenderer,editable:!1,sortable:!1,filter:!1},{field:"E",headerName:i.instant("groupResource.E"),width:60,cellRenderer:F.checkboxRenderer,editable:!1,sortable:!1,filter:!1},{field:"D",headerName:i.instant("groupResource.D"),width:60,cellRenderer:F.checkboxRenderer,editable:!1,sortable:!1,filter:!1},{field:"P",headerName:i.instant("groupResource.P"),width:60,cellRenderer:F.checkboxRenderer,editable:!1,sortable:!1,filter:!1},{field:"X",headerName:i.instant("groupResource.X"),width:60,cellRenderer:F.checkboxRenderer,editable:!1,sortable:!1,filter:!1}];return a.forEach(e=>{e.headerClass="rtl",e.cellClass="rtl"}),a}};var jt=(()=>{let i=class i extends I{constructor(e){super(e),this.setBaseUrl("resource")}};i.\u0275fac=function(t){return new(t||i)(W(H))},i.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var Ci=(()=>{let i=class i extends I{constructor(e){super(e),this.setBaseUrl("groupresource")}getByGroupId(e){return this.http.get(`${this.baseUrl}/getbygroupid/${e}`)}updateAll(e,t){return this.http.put(`${this.baseUrl}/updateall/${t}`,e)}};i.\u0275fac=function(t){return new(t||i)(W(H))},i.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();function Hi(r,i){if(r&1){let a=v();n(0,"button",21),g("click",function(){_(a);let t=p(2);return b(t.print())}),n(1,"mat-icon"),u(2,"print"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}r&2&&(l(4),C(f(5,1,"crud.btn.print")))}function Xi(r,i){if(r&1){let a=v();n(0,"button",22),g("click",function(){_(a);let t=p(2);return b(t.exportToExcel())}),n(1,"mat-icon"),u(2,"output"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}r&2&&(l(4),C(f(5,1,"crud.btn.export")))}function qi(r,i){if(r&1){let a=v();n(0,"button",23),g("click",function(){_(a);let t=p(2);return b(t.save())}),n(1,"mat-icon"),u(2,"save"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}if(r&2){let a=p(2);m("disabled",a.groupForm.invalid),l(4),C(f(5,2,"crud.btn.save"))}}function zi(r,i){if(r&1){let a=v();n(0,"button",24),g("click",function(){_(a);let t=p(2);return b(t.delete())}),n(1,"mat-icon"),u(2,"delete"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}if(r&2){let a=p(2);m("disabled",a.selectedId===0),l(4),C(f(5,2,"crud.btn.delete"))}}function Qi(r,i){if(r&1){let a=v();n(0,"button",25),g("click",function(){_(a);let t=p(2);return b(t.resetForm())}),n(1,"mat-icon"),u(2,"add"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}r&2&&(l(4),C(f(5,1,"crud.btn.new")))}function Ki(r,i){if(r&1&&(n(0,"mat-option",17),u(1),s()),r&2){let a=i.$implicit;m("value",a),l(),x(" ",a.name," ")}}function Yi(r,i){if(r&1){let a=v();n(0,"div")(1,"app-page-header",2),u(2),d(3,"translate"),y(4,Hi,6,3,"button",3)(5,Xi,6,3,"button",4)(6,qi,6,4,"button",5)(7,zi,6,4,"button",6)(8,Qi,6,3,"button",7),n(9,"button",8),g("click",function(){_(a);let t=p();return b(t.selectAll())}),n(10,"mat-icon"),u(11,"check_box"),s(),u(12),d(13,"translate"),s(),n(14,"button",8),g("click",function(){_(a);let t=p();return b(t.deselectAll())}),n(15,"mat-icon"),u(16,"check_box_outline_blank"),s(),u(17),d(18,"translate"),s()(),n(19,"div",9)(20,"mat-card")(21,"mat-card-content")(22,"form",10)(23,"div",11)(24,"div",12)(25,"label",13),u(26),d(27,"translate"),s(),n(28,"mat-form-field",14),S(29,"input",15),n(30,"mat-autocomplete",16,0),g("optionSelected",function(t){_(a);let o=p();return b(o.onGroupSelected(t))}),n(32,"mat-option",17),u(33,"-- None --"),s(),y(34,Ki,2,2,"mat-option",18),d(35,"async"),s()()()()()()(),n(36,"div",19)(37,"ag-grid-angular",20),g("gridReady",function(t){_(a);let o=p();return b(o.onGridReady(t))}),s()()()()}if(r&2){let a=Le(31),e=p();l(2),x(" ",f(3,20,"groupResource.title")," "),l(2),m("ngIf",e.permissionResource.P),l(),m("ngIf",e.permissionResource.X),l(),m("ngIf",e.permissionResource.W),l(),m("ngIf",e.permissionResource.D),l(),m("ngIf",e.permissionResource.R),l(4),C(f(13,22,"crud.btn.selectAll")),l(5),C(f(18,24,"crud.btn.deselectAll")),l(5),m("formGroup",e.groupForm),l(4),x("",f(27,26,"group.title"),":"),l(3),m("matAutocomplete",a),l(),m("displayWith",e.displayName),l(2),m("value",null),l(2),m("ngForOf",f(35,28,e.filterGroupArray)),l(3),Ne(e.getGridThemeClass()),m("columnDefs",e.columnDefinitions)("rowData",e.dataset)("gridOptions",e.gridOptions)("enableRtl",!0)}}var yi=(()=>{let i=class i extends Ve{constructor(e,t,o,c,h,Be){super(t,h),this.fb=e,this.translate=h,this.messageService=Be,this.columnDefs=[],this.rowData=[],this.groupMap=new Map,this.groupService=c,this.resourceService=t,this.groupResourceService=o}ngOnInit(){this.initForm(),this.gridConstructor(),this.gridOptions.pagination=!1,this.getResourcePermissions(L.groupResource),this.loadGroup(),window.ngGroupResourceComponentInstance=this}getAllEntities(){return this.resourceService.getAll()}saveEntity(e){return this.groupResourceService.create(e)}updateEntity(e){return this.groupResourceService.create(e)}deleteEntity(e){return this.groupResourceService.delete(e)}getColumnDefinitions(){return Lt.getColumnDefs(this.translate)}populateFormWithRowData(e){}getFormGroup(){return this.groupForm}getMessageService(){return this.messageService}manipulateDataAfterFetch(e){let t=e.filter(o=>o.parent!==0&&o.parent!==1);return t.forEach(o=>{o.resourceTitle=this.translate.instant(o.resourceTitle),o.R=!1,o.W=!1,o.E=!1,o.D=!1,o.P=!1,o.X=!1,o.ALL=!1}),this.rowData=t,t}loadGroup(){this.groupService.getAll().subscribe(e=>{e.forEach(t=>this.groupMap.set(t.id,t)),console.log("\u2714\uFE0F groupMap loaded:",this.groupMap)},e=>console.error("\u274C Error loading groupMap:",e))}get groupArray(){return Array.from(this.groupMap.values())}groupFilter(){this.filterGroupArray=this.groupForm.controls.group.valueChanges.pipe(Oe(""),Ue(300),Pe(e=>typeof e=="string"?this.groupArray.filter(t=>`${t.name}`.toLowerCase().includes(e.toLowerCase())):this.groupArray.slice()))}initForm(){this.groupForm=this.fb.group({id:[],resourceId:[null],permissions:[""],group:[null,[G.required]]}),this.groupFilter()}onGroupSelected(e){console.log("onGroupSelected",e);let t=e.option.value;t?(this.selectedId=t.id,this.groupForm.patchValue({id:t.id,group:t}),this.groupResourceService.getByGroupId(t.id).subscribe(o=>{this.rowData.forEach(c=>{c.R=!1,c.W=!1,c.E=!1,c.D=!1,c.P=!1,c.X=!1,o.forEach(h=>{c.id===h.resourceId&&(c.R=h.permissions.includes("R"),c.W=h.permissions.includes("W"),c.E=h.permissions.includes("E"),c.D=h.permissions.includes("D"),c.P=h.permissions.includes("P"),c.X=h.permissions.includes("X"))})}),this.gridApi&&(this.gridApi.setGridOption("rowData",this.rowData),this.gridApi.refreshCells()),console.log("\u2714\uFE0F Group resources loaded for group ID:",t.id)},o=>{console.error("\u274C Error loading group resources:",o)})):(this.selectedId=0,this.groupForm.patchValue({id:null,group:null}),this.gridApi&&this.gridApi.setGridOption("rowData",[]),console.log("\u2714\uFE0F No group selected, grid cleared."))}save(){if(this.groupForm.invalid){console.log("form is invalid");return}let e=this.groupForm.value,t;t=this.getGRToSave(e.group.id),this.groupResourceService.updateAll(t,e.group.id).subscribe(o=>{this.resetForm(),this.gridApi&&this.gridApi.setGridOption("rowData",[]),console.log("\u2714\uFE0F Group resources saved successfully."),this.messageService.showMessage(this.translate.instant("crud.btn.updated"),3e3)})}getGRToSave(e){let t=[];return this.rowData.forEach(o=>{let c="";if(o.R==!0&&(c="R"),o.W==!0&&(c=c+",W"),o.E==!0&&(c=c+",E"),o.D==!0&&(c=c+",D"),o.P==!0&&(c=c+",P"),o.X==!0&&(c=c+",X"),c&&c.startsWith(",")&&(c=c.slice(1)),c!=""){let h;h={permissions:c,groupId:e,resourceId:o.id},t.push(h)}}),t}delete(){}markFormGroupTouched(e){Object.values(e.controls).forEach(t=>{t.markAsTouched(),t instanceof Bt&&this.markFormGroupTouched(t)})}resetForm(){this.groupForm.reset(),this.selectedId=0}selectAll(){this.rowData&&(this.rowData.forEach(e=>{e.R=!0,e.W=!0,e.E=!0,e.D=!0,e.P=!0,e.X=!0,e.ALL=!0}),this.gridApi&&(this.gridApi.setGridOption("rowData",this.rowData),this.gridApi.refreshCells()))}deselectAll(){this.rowData&&(this.rowData.forEach(e=>{e.R=!1,e.W=!1,e.E=!1,e.D=!1,e.P=!1,e.X=!1,e.ALL=!1}),this.gridApi&&(this.gridApi.setGridOption("rowData",this.rowData),this.gridApi.refreshCells()))}};i.\u0275fac=function(t){return new(t||i)(M(J),M(jt),M(Ci),M(Qe),M(w),M(ke))},i.\u0275cmp=R({type:i,selectors:[["ng-component"]],features:[T],decls:1,vars:1,consts:[["groupAuto","matAutocomplete"],[4,"ngIf"],[1,"action"],["mat-flat-button","","type","submit","color","accent","class","action","hidden","",3,"click",4,"ngIf"],["mat-flat-button","","type","submit","color","accent","class","action",3,"click",4,"ngIf"],["mat-flat-button","","color","accent","class","action",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","warn","class","action",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","accent","class","action",3,"click",4,"ngIf"],["mat-flat-button","",3,"click"],[1,"parent-card-container"],[3,"formGroup"],[1,"form-grid"],[1,"form-item"],["for","group",1,"form-label"],["appearance","outline",1,"form-field"],["type","text","matInput","","formControlName","group",3,"matAutocomplete"],[3,"optionSelected","displayWith"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"ag-grid-to-fill"],["tabindex","0",2,"width","100%","height","100%",3,"gridReady","columnDefs","rowData","gridOptions","enableRtl"],["mat-flat-button","","type","submit","color","accent","hidden","",1,"action",3,"click"],["mat-flat-button","","type","submit","color","accent",1,"action",3,"click"],["mat-flat-button","","color","accent",1,"action",3,"click","disabled"],["mat-flat-button","","color","warn",1,"action",3,"click","disabled"],["mat-flat-button","","color","accent",1,"action",3,"click"]],template:function(t,o){t&1&&y(0,Yi,38,30,"div",1),t&2&&m("ngIf",o.permissionResource.R)},dependencies:[A,$e,$,ee,Q,X,q,z,K,Y,Z,Ee,Ae,O,U,pe,E,B,V,_e,Xe,ce,ge,te,qe,ze,N,ie,re,ae,oe,ne,se,le,ue,me,de,k,fe,he,be,Me,ve,Ce,xe,De,ye,Se,Re,we,Ie,P,Te,Fe,He,Ge],styles:["mat-card[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:0}"]});let r=i;return r})();var Wt=class{static getColumnDefs(i){return[{field:"id",headerName:"Id",hide:!0,filter:!1,sortable:!1},{field:"userId",headerName:"User ID",hide:!0,filter:!1,sortable:!1},{field:"userName",headerName:i.instant("userGroup.user"),flex:1,minWidth:150,filter:"agTextColumnFilter",sortable:!0,cellClass:"rtl",headerClass:"rtl"},{field:"userFirstName",headerName:i.instant("userGroup.userFirstName"),flex:1,minWidth:150,filter:"agTextColumnFilter",sortable:!0,cellClass:"rtl",headerClass:"rtl"},{field:"userLastName",headerName:i.instant("userGroup.userLastName"),flex:1,minWidth:150,filter:"agTextColumnFilter",sortable:!0,cellClass:"rtl",headerClass:"rtl"},{field:"groupId",headerName:"Group ID",hide:!0,filter:!1,sortable:!1},{field:"groupName",headerName:i.instant("userGroup.group"),flex:1,minWidth:150,filter:"agTextColumnFilter",sortable:!0,cellClass:"rtl",headerClass:"rtl"}]}};var Si=(()=>{let i=class i extends I{constructor(e){super(e),this.setBaseUrl("usergroup")}};i.\u0275fac=function(t){return new(t||i)(W(H))},i.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();function Zi(r,i){if(r&1){let a=v();n(0,"button",22),g("click",function(){_(a);let t=p();return b(t.print())}),n(1,"mat-icon"),u(2,"print"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}r&2&&(l(4),C(f(5,1,"crud.btn.print")))}function er(r,i){if(r&1){let a=v();n(0,"button",23),g("click",function(){_(a);let t=p();return b(t.exportToExcel())}),n(1,"mat-icon"),u(2,"output"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}r&2&&(l(4),C(f(5,1,"crud.btn.export")))}function tr(r,i){if(r&1){let a=v();n(0,"button",24),g("click",function(){_(a);let t=p();return b(t.save())}),n(1,"mat-icon"),u(2,"save"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}if(r&2){let a=p();m("disabled",a.userGroupForm.invalid),l(4),C(f(5,2,"crud.btn.save"))}}function ir(r,i){if(r&1){let a=v();n(0,"button",25),g("click",function(){_(a);let t=p();return b(t.delete())}),n(1,"mat-icon"),u(2,"delete"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}if(r&2){let a=p();m("disabled",a.selectedId===0),l(4),C(f(5,2,"crud.btn.delete"))}}function rr(r,i){if(r&1){let a=v();n(0,"button",26),g("click",function(){_(a);let t=p();return b(t.resetForm())}),n(1,"mat-icon"),u(2,"add"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}r&2&&(l(4),C(f(5,1,"crud.btn.new")))}function or(r,i){if(r&1&&(n(0,"mat-option",16),u(1),s()),r&2){let a=i.$implicit;m("value",a),l(),Vt(" ",a.userFirstName," ",a.userLastName," : ",a.userName," ")}}function nr(r,i){if(r&1&&(n(0,"mat-option",16),u(1),s()),r&2){let a=i.$implicit;m("value",a),l(),x(" ",a.name," ")}}var Ri=(()=>{let i=class i extends Ve{constructor(e,t,o,c,h,Be){super(c,h),this.fb=e,this.userService=t,this.groupService=o,this.userGroupService=c,this.translate=h,this.messageService=Be,this.userMap=new Map,this.groupMap=new Map,this.getResourcePermissions(L.userGroup)}ngOnInit(){this.gridConstructor(),this.loadUsers(),this.loadGroups(),this.initForm()}getAllEntities(){return this.userGroupService.getAll()}saveEntity(e){return this.userGroupService.create(e)}updateEntity(e){return this.userGroupService.update(e.id,e)}deleteEntity(e){return this.userGroupService.delete(e)}getColumnDefinitions(){return Wt.getColumnDefs(this.translate)}populateFormWithRowData(e){this.userGroupForm.patchValue({id:e.id,user:this.userMap.get(e.userId)||null,group:this.groupMap.get(e.groupId)||null}),this.selectedId=e.id}getFormGroup(){return this.userGroupForm}getMessageService(){return this.messageService}manipulateDataAfterFetch(e){return e}loadUsers(){this.userService.getAll().subscribe(e=>{e.forEach(t=>this.userMap.set(t.id,t)),console.log("\u2714\uFE0F User loaded:",this.userMap)},e=>console.error("\u274C Error loading brands:",e))}loadGroups(){this.groupService.getAll().subscribe(e=>{e.forEach(t=>this.groupMap.set(t.id,t)),console.log("\u2714\uFE0F groupMap loaded:",this.groupMap)},e=>console.error("\u274C Error loading brands:",e))}get userArray(){return Array.from(this.userMap.values())}get groupArray(){return Array.from(this.groupMap.values())}initForm(){this.userGroupForm=this.fb.group({id:[null],user:[null,[G.required]],group:[null,[G.required]]}),this.userFilter(),this.groupFilter()}userFilter(){this.filteredUserArray=this.userGroupForm.controls.user.valueChanges.pipe(Oe(""),Ue(300),Pe(e=>{if(typeof e=="string"){let t=e.toLowerCase();return this.userArray.filter(o=>`${o.userFirstName} ${o.userLastName} ${o.userName}`.toLowerCase().includes(t))}return this.userArray.slice()}))}groupFilter(){this.filteredGroupArray=this.userGroupForm.controls.group.valueChanges.pipe(Oe(""),Ue(300),Pe(e=>typeof e=="string"?this.groupArray.filter(t=>`${t.name}`.toLowerCase().includes(e.toLowerCase())):this.groupArray.slice()))}displayUserName(e){return e?`${e.userFirstName} ${e.userLastName} : ${e.userName}`:""}displayUserGroupName(e){return e?e.name:""}manipulateDataBeforeSave(e){this.selectedId?(e.id=this.selectedId,e.userId=e.user.id,e.userFirstName=e.user.userFirstName,e.userLastName=e.user.userLastName,e.userName=e.user.userName,e.groupId=e.group.id,e.groupCode=e.group.code,e.groupName=e.group.name):(e.groupId=e.group.id,e.userId=e.user.id)}};i.\u0275fac=function(t){return new(t||i)(M(J),M(hi),M(Qe),M(Si),M(w),M(ke))},i.\u0275cmp=R({type:i,selectors:[["ng-component"]],features:[T],decls:39,vars:33,consts:[["userAuto","matAutocomplete"],["groupAuto","matAutocomplete"],["icon","    ",1,"action"],["mat-flat-button","","type","submit","color","accent","class","action","hidden","",3,"click",4,"ngIf"],["mat-flat-button","","type","submit","color","accent","class","action",3,"click",4,"ngIf"],["mat-flat-button","","color","accent","class","action",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","warn","class","action",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","accent","class","action",3,"click",4,"ngIf"],[1,"parent-card-container"],[3,"formGroup"],[1,"form-grid"],[1,"form-item"],["for","user",1,"form-label"],["appearance","outline",1,"form-field"],["type","text","matInput","","formControlName","user",3,"matAutocomplete"],[3,"displayWith"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","group",1,"form-label"],["type","text","matInput","","formControlName","group",3,"matAutocomplete"],[1,"ag-grid-to-fill"],["tabindex","0",2,"width","100%","height","100%",3,"gridReady","columnDefs","rowData","gridOptions","enableRtl"],["mat-flat-button","","type","submit","color","accent","hidden","",1,"action",3,"click"],["mat-flat-button","","type","submit","color","accent",1,"action",3,"click"],["mat-flat-button","","color","accent",1,"action",3,"click","disabled"],["mat-flat-button","","color","warn",1,"action",3,"click","disabled"],["mat-flat-button","","color","accent",1,"action",3,"click"]],template:function(t,o){if(t&1){let c=v();n(0,"app-page-header",2),u(1),d(2,"translate"),y(3,Zi,6,3,"button",3)(4,er,6,3,"button",4)(5,tr,6,4,"button",5)(6,ir,6,4,"button",6)(7,rr,6,3,"button",7),s(),n(8,"div",8)(9,"mat-card")(10,"mat-card-content")(11,"form",9)(12,"div",10)(13,"div",11)(14,"label",12),u(15),d(16,"translate"),s(),n(17,"mat-form-field",13),S(18,"input",14),n(19,"mat-autocomplete",15,0)(21,"mat-option",16),u(22,"-- None --"),s(),y(23,or,2,4,"mat-option",17),d(24,"async"),s()()(),n(25,"div",11)(26,"label",18),u(27),d(28,"translate"),s(),n(29,"mat-form-field",13),S(30,"input",19),n(31,"mat-autocomplete",15,1)(33,"mat-option",16),u(34,"-- None --"),s(),y(35,nr,2,2,"mat-option",17),d(36,"async"),s()()()()()()(),n(37,"div",20)(38,"ag-grid-angular",21),g("gridReady",function(Be){return _(c),b(o.onGridReady(Be))}),s()()()}if(t&2){let c=Le(20),h=Le(32);l(),x(" ",f(2,23,"userGroup.title")," "),l(2),m("ngIf",o.permissionResource.P),l(),m("ngIf",o.permissionResource.X),l(),m("ngIf",o.permissionResource.W),l(),m("ngIf",o.permissionResource.D),l(),m("ngIf",o.permissionResource.R),l(4),m("formGroup",o.userGroupForm),l(4),x("",f(16,25,"userGroup.user"),":"),l(3),m("matAutocomplete",c),l(),m("displayWith",o.displayUserName),l(2),m("value",null),l(2),m("ngForOf",f(24,27,o.filteredUserArray)),l(4),x("",f(28,29,"userGroup.group"),":"),l(3),m("matAutocomplete",h),l(),m("displayWith",o.displayUserGroupName),l(2),m("value",null),l(2),m("ngForOf",f(36,31,o.filteredGroupArray)),l(3),Ne(o.getGridThemeClass()),m("columnDefs",o.columnDefinitions)("rowData",o.dataset)("gridOptions",o.gridOptions)("enableRtl",!0)}},dependencies:[A,$e,$,ee,Q,X,q,z,K,Y,Z,Ee,Ae,O,U,pe,E,B,V,_e,Xe,ce,ge,te,qe,ze,N,ie,re,ae,oe,ne,se,le,ue,me,de,k,fe,he,be,Me,ve,Ce,xe,De,ye,Se,Re,we,Ie,P,Te,Fe,He,Ge],styles:["mat-card[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:0}"]});let r=i;return r})();var $t=class{static getColumnDefs(i){return[{field:"id",headerName:"Id",hide:!0,sortable:!1},{field:"parent",headerName:"Parent",hide:!0,sortable:!1},{field:"systemName",headerName:i.instant("groupResource.systemName"),hide:!0,width:110,filter:"agTextColumnFilter",sortable:!0,cellClass:"rtl",headerClass:"rtl"},{field:"resourceName",headerName:i.instant("groupResource.resourceName"),hide:!0,filter:"agTextColumnFilter",sortable:!0,cellClass:"rtl",headerClass:"rtl"},{field:"resourceTitle",headerName:i.instant("groupResource.resourceTitle"),flex:2,minWidth:200,filter:"agTextColumnFilter",sortable:!0,cellClass:"rtl",headerClass:"rtl"},{field:"resourceDescription",headerName:i.instant("groupResource.resourceDescription"),hide:!0,filter:"agTextColumnFilter",sortable:!0,cellClass:"rtl",headerClass:"rtl"},{field:"ALL",headerName:i.instant("groupResource.ALL"),hide:!0,width:60,cellRenderer:F.checkboxRenderer,editable:!1,sortable:!1},{field:"R",headerName:i.instant("groupResource.R"),width:60,cellRenderer:F.checkboxRenderer,editable:!1,sortable:!1},{field:"W",headerName:i.instant("groupResource.W"),width:60,cellRenderer:F.checkboxRenderer,editable:!1,sortable:!1},{field:"E",headerName:i.instant("groupResource.E"),width:60,cellRenderer:F.checkboxRenderer,editable:!1,sortable:!1},{field:"D",headerName:i.instant("groupResource.D"),width:60,cellRenderer:F.checkboxRenderer,editable:!1,sortable:!1},{field:"P",headerName:i.instant("groupResource.P"),width:60,cellRenderer:F.checkboxRenderer,editable:!1,sortable:!1},{field:"X",headerName:i.instant("groupResource.X"),width:60,cellRenderer:F.checkboxRenderer,editable:!1,sortable:!1}]}};var wi=(()=>{let i=class i extends I{constructor(e){super(e),this.setBaseUrl("userresource")}getByUserId(e){return this.http.get(`${this.baseUrl}/getbyuserid/${e}`)}saveAll(e,t){return this.http.post(`${this.baseUrl}/saveall/${t}`,e)}};i.\u0275fac=function(t){return new(t||i)(W(H))},i.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();function sr(r,i){if(r&1){let a=v();n(0,"button",21),g("click",function(){_(a);let t=p(2);return b(t.print())}),n(1,"mat-icon"),u(2,"print"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}r&2&&(l(4),C(f(5,1,"crud.btn.print")))}function lr(r,i){if(r&1){let a=v();n(0,"button",22),g("click",function(){_(a);let t=p(2);return b(t.exportToExcel())}),n(1,"mat-icon"),u(2,"output"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}r&2&&(l(4),C(f(5,1,"crud.btn.export")))}function cr(r,i){if(r&1){let a=v();n(0,"button",23),g("click",function(){_(a);let t=p(2);return b(t.save())}),n(1,"mat-icon"),u(2,"save"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}if(r&2){let a=p(2);m("disabled",a.userForm.invalid),l(4),C(f(5,2,"crud.btn.save"))}}function ur(r,i){if(r&1){let a=v();n(0,"button",24),g("click",function(){_(a);let t=p(2);return b(t.delete())}),n(1,"mat-icon"),u(2,"delete"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}if(r&2){let a=p(2);m("disabled",a.selectedId===0),l(4),C(f(5,2,"crud.btn.delete"))}}function mr(r,i){if(r&1){let a=v();n(0,"button",25),g("click",function(){_(a);let t=p(2);return b(t.resetForm())}),n(1,"mat-icon"),u(2,"add"),s(),n(3,"span"),u(4),d(5,"translate"),s()()}r&2&&(l(4),C(f(5,1,"crud.btn.new")))}function pr(r,i){if(r&1&&(n(0,"mat-option",17),u(1),s()),r&2){let a=i.$implicit;m("value",a),l(),Vt(" ",a.userFirstName," ",a.userLastName," : ",a.userName," ")}}function dr(r,i){if(r&1){let a=v();n(0,"div")(1,"app-page-header",2),u(2),d(3,"translate"),y(4,sr,6,3,"button",3)(5,lr,6,3,"button",4)(6,cr,6,4,"button",5)(7,ur,6,4,"button",6)(8,mr,6,3,"button",7),n(9,"button",8),g("click",function(){_(a);let t=p();return b(t.selectAll())}),n(10,"mat-icon"),u(11,"check_box"),s(),u(12),d(13,"translate"),s(),n(14,"button",8),g("click",function(){_(a);let t=p();return b(t.deselectAll())}),n(15,"mat-icon"),u(16,"check_box_outline_blank"),s(),u(17),d(18,"translate"),s()(),n(19,"div",9)(20,"mat-card")(21,"mat-card-content")(22,"form",10)(23,"div",11)(24,"div",12)(25,"label",13),u(26),d(27,"translate"),s(),n(28,"mat-form-field",14),S(29,"input",15),n(30,"mat-autocomplete",16,0),g("optionSelected",function(t){_(a);let o=p();return b(o.onUserSelected(t))}),n(32,"mat-option",17),u(33,"-- None --"),s(),y(34,pr,2,4,"mat-option",18),d(35,"async"),s()()()()()()(),n(36,"div",19)(37,"ag-grid-angular",20),g("gridReady",function(t){_(a);let o=p();return b(o.onGridReady(t))}),s()()()()}if(r&2){let a=Le(31),e=p();l(2),x(" ",f(3,20,"userResource.title")," "),l(2),m("ngIf",e.permissionResource.P),l(),m("ngIf",e.permissionResource.X),l(),m("ngIf",e.permissionResource.W),l(),m("ngIf",e.permissionResource.D),l(),m("ngIf",e.permissionResource.R),l(4),C(f(13,22,"crud.btn.selectAll")),l(5),C(f(18,24,"crud.btn.deselectAll")),l(5),m("formGroup",e.userForm),l(4),x("",f(27,26,"user.title"),":"),l(3),m("matAutocomplete",a),l(),m("displayWith",e.displayUserName),l(2),m("value",null),l(2),m("ngForOf",f(35,28,e.filterUserArray)),l(3),Ne(e.getGridThemeClass()),m("columnDefs",e.columnDefinitions)("rowData",e.dataset)("gridOptions",e.gridOptions)("enableRtl",!0)}}var Ii=(()=>{let i=class i extends Ve{constructor(e,t,o,c,h,Be){super(o,h),this.fb=e,this.userResourceService=o,this.translate=h,this.messageService=Be,this.gridData=[],this.userMap=new Map,this.userService=c,this.resourceService=t,this.getResourcePermissions(L.userResource)}ngOnInit(){this.initForm(),this.loadUser(),this.gridConstructor(),this.gridOptions.pagination=!1}getAllEntities(){return this.resourceService.getAll()}saveEntity(e){return this.userResourceService.create(e)}updateEntity(e){return this.userResourceService.update(e.id,e)}deleteEntity(e){return this.userResourceService.delete(e)}getColumnDefinitions(){return $t.getColumnDefs(this.translate)}populateFormWithRowData(e){this.selectedId=e.id}getFormGroup(){return this.userForm}getMessageService(){return this.messageService}manipulateDataAfterFetch(e){let t=e.filter(o=>o.parent!==0&&o.parent!==1);return t.forEach(o=>{o.resourceTitle=this.translate.instant(o.resourceTitle),o.R=!1,o.W=!1,o.E=!1,o.D=!1,o.P=!1,o.X=!1,o.ALL=!1}),this.gridData=t,t}loadUser(){this.userService.getAll().subscribe(e=>{e.forEach(t=>this.userMap.set(t.id,t)),console.log("\u2714\uFE0F userMap loaded:",this.userMap)},e=>console.error("\u274C Error loading userMap:",e))}get userArray(){return Array.from(this.userMap.values())}initForm(){this.userForm=this.fb.group({id:[],resourceId:[null],permissions:[""],user:[null,[G.required]]}),this.userFilter()}userFilter(){this.filterUserArray=this.userForm.controls.user.valueChanges.pipe(Oe(""),Ue(300),Pe(e=>{if(typeof e=="string"){let t=e.toLowerCase();return this.userArray.filter(o=>`${o.userFirstName} ${o.userLastName} ${o.userName}`.toLowerCase().includes(t))}return this.userArray.slice()}))}displayUserName(e){return e?`${e.userFirstName} ${e.userLastName} : ${e.userName}`:""}onUserSelected(e){console.log("onUserSelected",e);let t=e.option.value;t?(this.selectedId=t.id,this.userForm.patchValue({id:t.id,user:t}),this.userResourceService.getByUserId(t.id).subscribe(o=>{this.gridData.forEach(c=>{c.R=!1,c.W=!1,c.E=!1,c.D=!1,c.P=!1,c.X=!1,o.forEach(h=>{c.id===h.resourceId&&(c.R=h.permissions.includes("R"),c.W=h.permissions.includes("W"),c.E=h.permissions.includes("E"),c.D=h.permissions.includes("D"),c.P=h.permissions.includes("P"),c.X=h.permissions.includes("X"))})}),this.gridApi&&(this.gridApi.setGridOption("rowData",this.gridData),this.gridApi.refreshCells()),console.log("\u2714\uFE0F User resources loaded for user ID:",t.id)},o=>{console.error("\u274C Error loading user resources:",o)})):(this.selectedId=0,this.userForm.patchValue({id:null,user:null}),this.deselectAll(),console.log("\u2714\uFE0F No user selected, grid cleared."))}save(){if(this.userForm.invalid){console.log("form is invalid");return}let e=this.userForm.value;if(e.user&&e.user.userName==="systemadmin")return;let t;t=this.getGRToSave(e.user.id),this.userResourceService.saveAll(t,e.user.id).subscribe(o=>{this.resetForm(),this.deselectAll(),console.log("\u2714\uFE0F User resources saved successfully."),this.messageService.showMessage(this.translate.instant("crud.btn.updated"),3e3)})}getGRToSave(e){let t=[];return this.gridData.forEach(o=>{let c="";if(o.R==!0&&(c="R"),o.W==!0&&(c=c+",W"),o.E==!0&&(c=c+",E"),o.D==!0&&(c=c+",D"),o.P==!0&&(c=c+",P"),o.X==!0&&(c=c+",X"),c&&c.startsWith(",")&&(c=c.slice(1)),c!=""){let h;h={permissions:c,userId:e,resourceId:o.id},t.push(h)}}),t}selectAll(){this.gridData&&(this.gridData.forEach(e=>{e.R=!0,e.W=!0,e.E=!0,e.D=!0,e.P=!0,e.X=!0,e.ALL=!0}),this.gridApi&&(this.gridApi.setGridOption("rowData",this.gridData),this.gridApi.refreshCells()))}deselectAll(){this.gridData&&(this.gridData.forEach(e=>{e.R=!1,e.W=!1,e.E=!1,e.D=!1,e.P=!1,e.X=!1,e.ALL=!1}),this.gridApi&&(this.gridApi.setGridOption("rowData",this.gridData),this.gridApi.refreshCells()))}};i.\u0275fac=function(t){return new(t||i)(M(J),M(jt),M(wi),M(I),M(w),M(ke))},i.\u0275cmp=R({type:i,selectors:[["ng-component"]],features:[T],decls:1,vars:1,consts:[["userAuto","matAutocomplete"],[4,"ngIf"],[1,"action"],["mat-flat-button","","type","submit","color","accent","class","action","hidden","",3,"click",4,"ngIf"],["mat-flat-button","","type","submit","color","accent","class","action",3,"click",4,"ngIf"],["mat-flat-button","","color","accent","class","action",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","warn","class","action",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","accent","class","action",3,"click",4,"ngIf"],["mat-flat-button","",3,"click"],[1,"parent-card-container"],[3,"formGroup"],[1,"form-grid"],[1,"form-item"],["for","user",1,"form-label"],["appearance","outline",1,"form-field"],["type","text","matInput","","formControlName","user",3,"matAutocomplete"],[3,"optionSelected","displayWith"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"ag-grid-to-fill"],["tabindex","0",2,"width","100%","height","100%",3,"gridReady","columnDefs","rowData","gridOptions","enableRtl"],["mat-flat-button","","type","submit","color","accent","hidden","",1,"action",3,"click"],["mat-flat-button","","type","submit","color","accent",1,"action",3,"click"],["mat-flat-button","","color","accent",1,"action",3,"click","disabled"],["mat-flat-button","","color","warn",1,"action",3,"click","disabled"],["mat-flat-button","","color","accent",1,"action",3,"click"]],template:function(t,o){t&1&&y(0,dr,38,30,"div",1),t&2&&m("ngIf",o.permissionResource.R)},dependencies:[A,$e,$,ee,Q,X,q,z,K,Y,Z,Ee,Ae,O,U,pe,E,B,V,_e,Xe,ce,ge,te,qe,ze,N,ie,re,ae,oe,ne,se,le,ue,me,de,k,fe,he,be,Me,ve,Ce,xe,De,ye,Se,Re,we,Ie,P,Te,Fe,He,Ge],styles:["mat-card[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:0}"]});let r=i;return r})();var Zt=class Zt{};Zt.columnDefs=[{field:"companyId",hide:!0,checkboxSelection:!0},{field:"companyName",headerName:"companyRegistry.companyName"}];var Ht=Zt;var Xt=(()=>{let i=class i extends I{constructor(e){super(e),this.setBaseUrl(L.CompanyRegistry)}};i.\u0275fac=function(t){return new(t||i)(W(H))},i.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var ei=(()=>{let i=class i extends pi{constructor(e,t,o){super(),this.service=e,this.translate=t,this.injector=o,this.dialogData=this.injector.get(ui,null),this.columnDefs=this.translateHeaders(Ht.columnDefs,this.translate)}serverData(){this.dialogData&&this.dialogData.fromDialog&&this.dialogData.fromDialog==!0?this.service.getAll().subscribe(e=>{this.rowData=e}):this.service.getAll().subscribe(e=>{this.rowData=e})}};i.\u0275fac=function(t){return new(t||i)(M(Xt),M(w),M(ii))},i.\u0275cmp=R({type:i,selectors:[["app-company-registry-grid"]],features:[T],decls:8,vars:12,consts:[["dir","rtl",1,"generic-ag-grid-container"],[2,"width","100%","display","flex","gap","8px"],["appearance","outline",2,"flex","1 1 auto","margin-bottom","0px"],["matInput","","type","text","id","filter-text-box",2,"flex","0 0 90%","height","29px","margin-bottom","5px",3,"input","placeholder"],["mat-icon-button","",2,"flex","0 0 calc(1%-8px)",3,"click","matTooltip"],[1,"ag-theme-alpine",2,"height","100%",3,"cellValueChanged","cellEditingStarted","cellClicked","gridReady","selectionChanged","rowDoubleClicked","cellKeyPress","ngClass","rowHeight","headerHeight","floatingFiltersHeight","columnDefs","defaultColDef","gridOptions","rowData"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"input",3),g("input",function(h){return o.onFilterTextBoxChanged(h)}),s()(),n(4,"button",4),g("click",function(){return o.gridExport()}),n(5,"mat-icon"),u(6,"file_download"),s()()(),n(7,"ag-grid-angular",5),g("cellValueChanged",function(h){return o.onCellValueChanged(h)})("cellEditingStarted",function(h){return o.onCellEditingStarted(h)})("cellClicked",function(h){return o.onCellClicked(h)})("gridReady",function(h){return o.onGridReady(h)})("selectionChanged",function(h){return o.onSelectionRowChanged(h)})("rowDoubleClicked",function(h){return o.onRowDoubleClicked(h)})("cellKeyPress",function(h){return o.onCellKeyPress(h)}),s()()),t&2&&(l(3),m("placeholder",Kt(o.filterPlaceholderText)),l(),m("matTooltip",Kt(o.exportBtnText)),l(3),m("ngClass",o.activeTheme)("rowHeight",o.rowHeight)("headerHeight",o.headerHeight)("floatingFiltersHeight",o.floatingFiltersHeight)("columnDefs",o.columnDefs)("defaultColDef",o.defaultColDef)("gridOptions",o.gridOptions)("rowData",o.rowData))},dependencies:[A,oi,O,U,B,V,E,ni,N,si,k,fe,P,ci],encapsulation:2});let r=i;return r})();var qt=class{static createMainForm(i){return i.group({companyId:[null],companyName:[null,[G.required]]})}};function fr(r,i){if(r&1){let a=v();n(0,"button",18),g("click",function(){_(a);let t=p(2);return b(t.action("save"))}),n(1,"span",3),u(2,"crud.btn.save"),s()()}if(r&2){let a=p(2);m("disabled",a.formGroup.invalid)}}function gr(r,i){if(r&1){let a=v();n(0,"button",19),g("click",function(){_(a);let t=p(2);return b(t.action("delete"))}),n(1,"span",3),u(2,"crud.btn.delete"),s()()}if(r&2){let a=p(2);m("disabled",a.formGroup.invalid)}}function hr(r,i){if(r&1){let a=v();n(0,"div")(1,"app-page-header",1),u(2),d(3,"translate"),n(4,"button",2),g("click",function(){_(a);let t=p();return b(t.action("refresh"))}),n(5,"span",3),u(6,"crud.btn.refresh"),s()(),y(7,fr,3,1,"button",4)(8,gr,3,1,"button",5),n(9,"button",2),g("click",function(){_(a);let t=p();return b(t.action("reset"))}),n(10,"span",3),u(11,"crud.btn.new"),s()(),n(12,"button",2),g("click",function(){_(a);let t=p();return b(t.action("gridExport"))}),n(13,"span",3),u(14,"crud.btn.export"),s()()(),n(15,"div",6)(16,"mat-card",7)(17,"mat-card-content")(18,"form",8)(19,"div",9)(20,"div",10)(21,"label",11),u(22,"acc.account.accvchtype.title"),s(),n(23,"mat-form-field",12),S(24,"input",13),s()(),n(25,"div",10)(26,"label",14),u(27,"acc.account.accvchtype.definition"),s(),n(28,"mat-form-field",12),S(29,"input",15),s()()()()()(),n(30,"div",16)(31,"app-company-registry-grid",17),g("outputGetFromGrid",function(t){_(a);let o=p();return b(o.onSelectionChanged(t))}),s()()()()}if(r&2){let a=p();l(2),x(" ",f(3,4,"menuTitle.AccVchType")," "),l(5),m("ngIf",a.permissionResource.W),l(),m("ngIf",a.permissionResource.D),l(10),m("formGroup",a.formGroup)}}var Di=(()=>{let i=class i extends gi{constructor(e,t,o,c){super(e,o,c),this.mainService=e,this.formBuilder=t,this.notifier=o,this.translate=c,this.gv=di.variables,this.formGroup=qt.createMainForm(this.formBuilder),this.getResourcePermissions(L.CompanyRegistry)}ngOnInit(){}action(e){console.log(e),this.actionAbs(e,this.formGroup,this.child)}onSelectionChanged(e){this.formGroup.patchValue(e)}};i.\u0275fac=function(t){return new(t||i)(M(Xt),M(J),M(fi),M(w))},i.\u0275cmp=R({type:i,selectors:[["app-user-company-assignment"]],viewQuery:function(t,o){if(t&1&&Et(ei,5),t&2){let c;Nt(c=kt())&&(o.child=c.first)}},features:[T],decls:1,vars:1,consts:[[4,"ngIf"],[1,"action"],["mat-stroked-button","",1,"action",3,"click"],["translate",""],["mat-stroked-button","","color","accent","class","action",3,"disabled","click",4,"ngIf"],["mat-stroked-button","","color","warn","class","action",3,"disabled","click",4,"ngIf"],[1,"parent-card-container"],[1,"input-mat-card"],[3,"formGroup"],[1,"row-fields"],[1,"field-item"],["for","title","translate",""],["appearance","outline"],["matInput","","id","title","formControlName","title"],["for","definition","translate",""],["matInput","","id","definition","formControlName","definition"],[1,"ag-grid-to-fill"],[3,"outputGetFromGrid"],["mat-stroked-button","","color","accent",1,"action",3,"click","disabled"],["mat-stroked-button","","color","warn",1,"action",3,"click","disabled"]],template:function(t,o){t&1&&y(0,hr,32,6,"div",0),t&2&&m("ngIf",o.permissionResource.R)},dependencies:[A,$,ee,Q,X,q,z,K,Y,Z,Ee,Ae,mi,O,pe,E,B,V,_e,ce,ge,te,N,ie,re,ae,oe,ne,se,le,ue,me,de,k,he,be,Me,ve,Ce,xe,De,ye,Se,Re,we,Ie,P,Te,Fe,ei,Ge],encapsulation:2});let r=i;return r})();var _r=[{path:"group",component:bi,canActivate:[je]},{path:"user",component:Mi,canActivate:[je]},{path:"groupResource",component:yi,canActivate:[je]},{path:"userGroup",component:Ri,canActivate:[je]},{path:"userResource",component:Ii,canActivate:[je]},{path:"companyRegistry",component:Di,canActivate:[je]}],Fi=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=At({type:i}),i.\u0275inj=Gt({imports:[Yt.forChild(_r),Yt]});let r=i;return r})();var bn=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=At({type:i}),i.\u0275inj=Gt({imports:[Fi]});let r=i;return r})();export{bn as UserModule};
